{"ast":null,"code":"import _slicedToArray from\"/home/tejaswi/pdf-passage/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";var API_URL=\"http://localhost:7000\";export function useAuthStatus(){var _useState=useState({isLoading:true,isAuthorized:false,username:\"\"}),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];useEffect(function(){var cancelRequest=false;var authToken=localStorage.getItem(\"psg_auth_token\");axios.post(\"\".concat(API_URL,\"/auth\"),null,{headers:{Authorization:\"Bearer \".concat(authToken)}}).then(function(response){if(cancelRequest){return;}var _response$data=response.data,authStatus=_response$data.authStatus,identifier=_response$data.identifier;if(authStatus===\"success\"){setResult({isLoading:false,isAuthorized:authStatus,username:identifier});}else{setResult({isLoading:false,isAuthorized:false,username:\"\"});}}).catch(function(err){console.log(err);setResult({isLoading:false,isAuthorized:false,username:\"\"});});return function(){cancelRequest=true;};},[]);return result;}","map":{"version":3,"names":["useState","useEffect","axios","API_URL","useAuthStatus","_useState","isLoading","isAuthorized","username","_useState2","_slicedToArray","result","setResult","cancelRequest","authToken","localStorage","getItem","post","concat","headers","Authorization","then","response","_response$data","data","authStatus","identifier","catch","err","console","log"],"sources":["/home/tejaswi/pdf-passage/frontend/src/hooks/useAuthStatus.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst API_URL = \"http://localhost:7000\";\n\nexport function useAuthStatus() {\n  const [result, setResult] = useState({\n    isLoading: true,\n    isAuthorized: false,\n    username: \"\",\n  });\n\n  useEffect(() => {\n    let cancelRequest = false;\n    const authToken = localStorage.getItem(\"psg_auth_token\");\n    axios\n      .post(`${API_URL}/auth`, null, {\n        headers: {\n          Authorization: `Bearer ${authToken}`,\n        },\n      })\n      .then((response) => {\n        if (cancelRequest) {\n          return;\n        }\n        const { authStatus, identifier } = response.data;\n        if (authStatus === \"success\") {\n          setResult({\n            isLoading: false,\n            isAuthorized: authStatus,\n            username: identifier,\n          });\n        } else {\n          setResult({\n            isLoading: false,\n            isAuthorized: false,\n            username: \"\",\n          });\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setResult({\n          isLoading: false,\n          isAuthorized: false,\n          username: \"\",\n        });\n      });\n    return () => {\n      cancelRequest = true;\n    };\n  }, []);\n  return result;\n}\n"],"mappings":"wHAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,GAAM,CAAAC,OAAO,CAAG,uBAAuB,CAEvC,MAAO,SAAS,CAAAC,aAAaA,CAAA,CAAG,CAC9B,IAAAC,SAAA,CAA4BL,QAAQ,CAAC,CACnCM,SAAS,CAAE,IAAI,CACfC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,EACZ,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAL,SAAA,IAJKM,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IAMxBR,SAAS,CAAC,UAAM,CACd,GAAI,CAAAY,aAAa,CAAG,KAAK,CACzB,GAAM,CAAAC,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,CACxDd,KAAK,CACFe,IAAI,IAAAC,MAAA,CAAIf,OAAO,UAAS,IAAI,CAAE,CAC7BgB,OAAO,CAAE,CACPC,aAAa,WAAAF,MAAA,CAAYJ,SAAS,CACpC,CACF,CAAC,CAAC,CACDO,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClB,GAAIT,aAAa,CAAE,CACjB,OACF,CACA,IAAAU,cAAA,CAAmCD,QAAQ,CAACE,IAAI,CAAxCC,UAAU,CAAAF,cAAA,CAAVE,UAAU,CAAEC,UAAU,CAAAH,cAAA,CAAVG,UAAU,CAC9B,GAAID,UAAU,GAAK,SAAS,CAAE,CAC5Bb,SAAS,CAAC,CACRN,SAAS,CAAE,KAAK,CAChBC,YAAY,CAAEkB,UAAU,CACxBjB,QAAQ,CAAEkB,UACZ,CAAC,CAAC,CACJ,CAAC,IAAM,CACLd,SAAS,CAAC,CACRN,SAAS,CAAE,KAAK,CAChBC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,EACZ,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CACDmB,KAAK,CAAC,SAACC,GAAG,CAAK,CACdC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChBhB,SAAS,CAAC,CACRN,SAAS,CAAE,KAAK,CAChBC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,EACZ,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,MAAO,WAAM,CACXK,aAAa,CAAG,IAAI,CACtB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CACN,MAAO,CAAAF,MAAM,CACf"},"metadata":{},"sourceType":"module","externalDependencies":[]}