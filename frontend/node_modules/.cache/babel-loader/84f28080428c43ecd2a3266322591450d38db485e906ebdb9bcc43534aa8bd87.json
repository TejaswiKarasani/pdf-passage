{"ast":null,"code":"var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = value => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = value => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = x => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nimport { f as ref, g as watch, d as defineComponent, h as useLocale, i as computed, j as onMounted, k as oe, l as onBeforeUnmount, c as createElementBlock, w as withDirectives, v as vShow, a as createBaseVNode, m as createTextVNode, t as toDisplayString, u as unref, n as withModifiers, p as normalizeClass, q as vModelText, r as renderSlot, x as normalizeStyle, y as createCommentVNode, z as isStringNullish, o as openBlock, Y, E, A as te, B as readonly, C as useAppId, D as ue, U as UAParser, b as createBlock, e as withCtx, F as createVNode, G as h, H as onBeforeMount, _ as _export_sfc, I as Icons, J as InlineSvg, K as isRef, L as useDefaultCountryCode, T, M as Transition, N as Fragment, O as vModelDynamic, P as renderList, Q as useAddDevice, R as reactive, S as useAppInfo, V as normalizeProps, W as mergeProps, X as resolveDynamicComponent, Z as onBeforeUpdate, $ as useStoreLocale, a0 as useIntlTelInput } from \"./customElements.es.js\";\nimport { i as intlTelInput, t as transformMetadata, L as LayoutType, U as UserMetadata } from \"./customElements.es3.js\";\nvar IdentifierType = /* @__PURE__ */(IdentifierType2 => {\n  IdentifierType2[\"phone\"] = \"PHONE\";\n  IdentifierType2[\"email\"] = \"EMAIL\";\n  return IdentifierType2;\n})(IdentifierType || {});\nfunction useAutofocusButton() {\n  const autofocusButton = ref();\n  function autofocus() {\n    if (autofocusButton.value === void 0 || autofocusButton.value === null) {\n      return;\n    }\n    autofocusButton.value.focus();\n  }\n  watch(autofocusButton, () => {\n    autofocus();\n  });\n  return {\n    autofocusButton\n  };\n}\nfunction inputStyles() {\n  const css = `\n      .psg-input{\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        box-sizing: border-box;\n        color: var(--passage-body-text-color, #000000);\n        font-family: var(--passage-body-font-family, 'Helvetica');\n        font-size: var(--passage-body-font-size, 14px);\n        font-weight: var(--passage-body-font-weight, 400);\n\n        min-height: 40px;\n        width: 100%;\n\n        padding-left: 10px;\n        padding-right: 10px;\n        margin: 0;\n\n        color: var(--app-text);\n\n        background-color: var(--passage-container-background-color, #ffffff);\n        border-style: solid;\n        border-color: var(--passage-control-border-color, #d7d7d7);\n        border-width: 1px;\n        border-radius: var(--passage-control-border-radius, 5px);\n\n        transition: all 0.3s;\n\n        text-overflow: ellipsis;\n      }\n\n      .psg-input:focus{\n        outline: none;\n        box-shadow: none !important;\n        border-color: var(--passage-body-text-color, #000000);\n      }\n\n      .psg-input:active{\n        outline: none;\n        box-shadow: none !important;\n        border-color: var(--passage-body-text-color, #000000);\n      }\n\n      .psg-input.has-error{\n        border-color: var(--passage-error-color, #dd0031);\n      }\n      .psg-input.is-danger{\n        border-color: var(--passage-error-color, #dd0031);\n      }\n      .iti {\n        width: 100%;\n      }\n\n        .iti__country-list {\n            border-radius: 6px;\n        }\n\n        .iti__country {\n            padding: 5px 10px;\n        }\n\n        .iti__selected-flag {\n            border-top-left-radius: var(--passage-control-border-radius, 6px);\n            border-bottom-left-radius: var(--passage-control-border-radius, 6px);\n        }\n\n    .iti--container {\n        top: unset !important;\n        left: unset !important;\n    }`;\n  const style = document.createElement(\"style\");\n  style.appendChild(document.createTextNode(css));\n  return style;\n}\nfunction itiStyles() {\n  const link = document.createElement(\"link\");\n  link.rel = \"stylesheet\";\n  link.href = \"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.16/css/intlTelInput.css\";\n  return link;\n}\nfunction otcStyles() {\n  const css = `\n      .psg-otp-input-container{\n        margin: 0px;\n        padding: 0px;\n        align-items: center;\n        height: auto;\n        width: auto;\n      }\n      .psg-otp-single-input-container{\n        margin: 0px;\n        padding: 0px;\n        height: auto;\n        width: auto;\n      }\n      .psg-otp-input {\n        width: 40px;\n        height: 40px;\n        padding: 0px;\n        margin-left: 4px;\n        margin-right: 4px;\n        font-size: 24px;\n        font-weight: 400;\n        line-height: 29px;\n        border-radius: 4px;\n        border: 1px solid transparent;\n        text-align: center;\n        background-color: var(--passage-otp-input-background-color, #d7d7d7);\n        -moz-appearance: textfield;\n      }\n      .psg-otp-input:read-only {\n        background-color: var(--passage-otp-input-background-color, #d7d7d7);\n      }\n      .psg-otp-input::-webkit-inner-spin-button{\n        -webkit-appearance: none;\n        display: none;\n        margin: 0;\n      }\n      .psg-otp-input::-webkit-outer-spin-button{\n        -webkit-appearance: none;\n        display: none;\n        margin: 0;\n      }\n      .psg-input.has-error{\n        border-color: var(--passage-error-color, #dd0031) !important;\n      }\n      .psg-input.is-danger {\n        border-color: var(--passage-error-color, #dd0031) !important;\n      }\n      .psg-input:focus {\n        outline: none;\n        box-shadow: none !important;\n        border-color: var(--passage-body-text-color, #000000);\n      }\n      .psg-input:active {\n        outline: none;\n        box-shadow: none !important;\n        border-color: var(--passage-body-text-color, #000000);\n      }`;\n  const style = document.createElement(\"style\");\n  style.appendChild(document.createTextNode(css));\n  return style;\n}\nconst _hoisted_1$q = {\n  class: \"identifier-form\"\n};\nconst _hoisted_2$h = {\n  class: \"has-text-centered\"\n};\nconst _hoisted_3$f = /* @__PURE__ */createBaseVNode(\"br\", null, null, -1);\nconst _hoisted_4$e = [\"onSubmit\"];\nconst _hoisted_5$d = [\"autocomplete\", \"inputmode\", \"placeholder\", \"onInput\"];\nconst _hoisted_6$b = {\n  class: \"flex-row flex-center\"\n};\nconst _hoisted_7$b = [\"onClick\"];\nconst _hoisted_8$8 = {\n  key: 0,\n  style: {\n    \"margin-top\": \"30px\"\n  },\n  class: \"link has-text-centered\"\n};\nconst _hoisted_9$7 = [\"onClick\"];\nconst _sfc_main$u = defineComponent({\n  __name: \"ValidatedIdentifierForm\",\n  props: {\n    appId: {},\n    validationError: {\n      default: \"\"\n    },\n    identifier: {},\n    countryCode: {},\n    identifierMode: {},\n    showWelcomeBack: {\n      type: Boolean,\n      default: false\n    },\n    conditionalUI: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"onSubmit\", \"update:validationError\", \"update:identifier\", \"update:countryCode\", \"update:showWelcomeBack\"],\n  setup(__props, _ref) {\n    let {\n      emit\n    } = _ref;\n    const props = __props;\n    const {\n      t\n    } = useLocale();\n    const identifierParseError = ref(\"\");\n    const identifierInput = ref();\n    const controlContainer = ref();\n    const {\n      autofocusButton\n    } = useAutofocusButton();\n    const showWelcomeUI = computed(() => {\n      return props.showWelcomeBack;\n    });\n    const label = computed(() => {\n      let identifierType;\n      switch (props.identifierMode) {\n        case oe.phone:\n          identifierType = t(\"phone-number\");\n          break;\n        case oe.email:\n          identifierType = t(\"email-address\");\n          break;\n        case oe.both:\n          identifierType = t(\"email-or-phone-number\");\n          break;\n      }\n      return identifierType.charAt(0).toUpperCase() + identifierType.slice(1);\n    });\n    const placeholder = computed(() => {\n      return \"example@email.com\";\n    });\n    const inputMode = computed(() => {\n      if (props.identifierMode === oe.phone) {\n        return \"tel\";\n      }\n      return \"email\";\n    });\n    const autocomplete = computed(() => {\n      var _a;\n      if (props.conditionalUI) {\n        return `${inputMode.value} webauthn`;\n      }\n      return (_a = inputMode.value) != null ? _a : \"\";\n    });\n    const identifierText = computed({\n      get() {\n        return props.identifier;\n      },\n      set(newIdentifier) {\n        emit(\"update:identifier\", newIdentifier);\n      }\n    });\n    function formattedIdentifier() {\n      var _a;\n      if (!identifierText.value) {\n        return \"\";\n      }\n      let identifier = identifierText.value;\n      if (!showWelcomeUI.value) {\n        identifier = isPhoneNumber() ? (_a = phoneInput == null ? void 0 : phoneInput.getNumber()) != null ? _a : \"\" : identifierText.value;\n      }\n      return identifier.trim().toLowerCase();\n    }\n    const error = computed(() => {\n      if (!isStringNullish(props.validationError)) {\n        return props.validationError;\n      }\n      if (!isStringNullish(identifierParseError.value)) {\n        return identifierParseError.value;\n      }\n      return \"\";\n    });\n    function clearErrors() {\n      identifierParseError.value = \"\";\n      emit(\"update:validationError\", \"\");\n    }\n    function checkIdentifier() {\n      return __async(this, null, function* () {\n        if (!validateInput()) {\n          return;\n        }\n        const passage = new Y(props.appId);\n        let identifierExists,\n          userHasWebauthn,\n          userHasPasskey,\n          emailVerified,\n          phoneVerified = false;\n        let userStatus;\n        let userID = \"\";\n        try {\n          const userInfo = yield passage.identifierExists(formattedIdentifier());\n          if (userInfo !== null) {\n            identifierExists = true;\n            userHasWebauthn = userInfo.webauthn;\n            userStatus = userInfo.status;\n            userID = userInfo.id;\n            emailVerified = userInfo.email_verified;\n            phoneVerified = userInfo.phone_verified;\n            userHasPasskey = userInfo.webauthn_types.includes(E.Passkey);\n          } else {\n            identifierExists = false;\n            userHasWebauthn = false;\n            userStatus = te.INACTIVE;\n          }\n        } catch (e) {\n          let errorMessage;\n          switch (props.identifierMode) {\n            case oe.email:\n              errorMessage = t(\"enter-a-valid-email-address\");\n              break;\n            case oe.phone:\n              errorMessage = t(\"enter-a-valid-phone-number\");\n              break;\n            case oe.both:\n              errorMessage = t(\"enter-a-valid-email-or-phone-number\");\n              break;\n          }\n          identifierParseError.value = errorMessage;\n          return;\n        }\n        emit(\"onSubmit\", {\n          identifier: formattedIdentifier(),\n          identifierExists,\n          identifierType: isPhoneNumber() ? IdentifierType.phone : IdentifierType.email,\n          userHasWebauthn,\n          userStatus,\n          userID,\n          emailVerified,\n          phoneVerified,\n          userHasPasskey\n        });\n      });\n    }\n    function isEmail() {\n      const emailRegEx = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return emailRegEx.test(formattedIdentifier());\n    }\n    function isPhoneNumber() {\n      if (showWelcomeUI.value) {\n        return isPhoneNumberRegex();\n      }\n      if (phoneInput === void 0) {\n        return false;\n      }\n      return phoneInput.isValidNumber();\n    }\n    function validateInput() {\n      if (formattedIdentifier() === \"\") {\n        let message = \"\";\n        switch (props.identifierMode) {\n          case oe.phone:\n            message = t(\"enter-a-phone-number\");\n            break;\n          case oe.email:\n            message = t(\"enter-an-email-address\");\n            break;\n          case oe.both:\n            message = t(\"enter-an-email-or-phone-number\");\n            break;\n        }\n        identifierParseError.value = message;\n        return false;\n      } else if (props.identifierMode === oe.email && !isEmail()) {\n        identifierParseError.value = t(\"enter-a-valid-email-address\");\n        return false;\n      } else if (props.identifierMode === oe.phone && !isPhoneNumber()) {\n        identifierParseError.value = t(\"enter-a-valid-phone-number\");\n        return false;\n      } else if (props.identifierMode === oe.both && !isPhoneNumber() && !isEmail()) {\n        identifierParseError.value = t(\"enter-a-valid-email-or-phone-number\");\n        return false;\n      }\n      return true;\n    }\n    let phoneInput;\n    function showCountryCode() {\n      if (phoneInput !== void 0) {\n        return;\n      }\n      identifierInput.value.addEventListener(\"countrychange\", () => {\n        var _a;\n        emit(\"update:countryCode\", (_a = phoneInput == null ? void 0 : phoneInput.getSelectedCountryData().iso2) != null ? _a : \"\");\n      });\n      phoneInput = intlTelInput(identifierInput.value, {\n        initialCountry: props.countryCode,\n        utilsScript: \"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js\",\n        dropdownContainer: controlContainer.value,\n        autoPlaceholder: \"aggressive\"\n      });\n      identifierInput.value.focus();\n    }\n    function hideCountryCode() {\n      if (phoneInput === void 0) {\n        return;\n      }\n      phoneInput.destroy();\n      phoneInput = void 0;\n      if (identifierInput.value) {\n        identifierInput.value.focus();\n      }\n    }\n    onMounted(() => {\n      if (props.conditionalUI) {\n        moveInput();\n      }\n      if (props.identifierMode === oe.phone) {\n        showCountryCode();\n      }\n    });\n    function isPhoneNumberRegex() {\n      const phoneNumberRegex = /^\\+$|^\\+?[0-9,(,),\\-, ]+$/;\n      return phoneNumberRegex.test(identifierText.value.trim());\n    }\n    if (props.identifierMode === oe.both) {\n      watch(identifierText, () => {\n        if (isPhoneNumberRegex()) {\n          showCountryCode();\n        } else {\n          hideCountryCode();\n        }\n      });\n    }\n    const countryCodeText = computed(() => {\n      return props.countryCode;\n    });\n    watch(countryCodeText, newValue => {\n      phoneInput == null ? void 0 : phoneInput.setCountry(newValue);\n    });\n    function switchAccount() {\n      emit(\"update:showWelcomeBack\", false);\n      identifierText.value = \"\";\n    }\n    const identifierForm = ref();\n    function moveInput() {\n      const parent = identifierForm.value.getRootNode().host;\n      if (parent !== void 0) {\n        identifierForm.value.appendChild(inputStyles());\n        identifierForm.value.appendChild(itiStyles());\n        parent.appendChild(identifierForm.value);\n      }\n    }\n    function cleanupInput() {\n      identifierForm.value.remove();\n    }\n    onBeforeUnmount(() => {\n      cleanupInput();\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$q, [withDirectives(createBaseVNode(\"div\", _hoisted_2$h, [createTextVNode(toDisplayString(unref(t)(\"welcome-back-sign-in-as\")), 1), _hoisted_3$f, createBaseVNode(\"strong\", null, toDisplayString(identifierText.value), 1)], 512), [[vShow, _ctx.showWelcomeBack]]), withDirectives(createBaseVNode(\"div\", null, [createBaseVNode(\"div\", {\n        class: \"label\",\n        ref: \"labelRef\"\n      }, toDisplayString(label.value), 513), createBaseVNode(\"form\", {\n        ref_key: \"identifierForm\",\n        ref: identifierForm,\n        slot: \"loginInput\",\n        onSubmit: withModifiers(checkIdentifier, [\"prevent\"])\n      }, [withDirectives(createBaseVNode(\"input\", {\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => identifierText.value = $event),\n        type: \"text\",\n        class: normalizeClass([\"input psg-input\", {\n          \"is-danger\": error.value\n        }]),\n        part: \"input\",\n        autocomplete: autocomplete.value,\n        inputmode: inputMode.value,\n        id: \"identifier\",\n        placeholder: placeholder.value,\n        onInput: withModifiers(clearErrors, [\"prevent\"]),\n        \"data-test\": \"identifier-input\",\n        ref_key: \"identifierInput\",\n        ref: identifierInput\n      }, null, 42, _hoisted_5$d), [[vModelText, identifierText.value]])], 40, _hoisted_4$e), renderSlot(_ctx.$slots, \"loginInput\")], 512), [[vShow, !_ctx.showWelcomeBack]]), createBaseVNode(\"div\", {\n        ref_key: \"controlContainer\",\n        ref: controlContainer,\n        style: {\n          \"width\": \"100%\"\n        }\n      }, null, 512), createBaseVNode(\"div\", {\n        style: normalizeStyle(`text-align: ${showWelcomeUI.value ? \"center\" : \"left\"};`),\n        class: \"help is-danger error-message\",\n        \"data-test\": \"validation-error\"\n      }, toDisplayString(error.value), 5), renderSlot(_ctx.$slots, \"metadataFields\"), createBaseVNode(\"div\", _hoisted_6$b, [createBaseVNode(\"button\", {\n        class: \"button is-primary\",\n        part: \"button\",\n        \"data-test\": \"continue-button\",\n        ref_key: \"autofocusButton\",\n        ref: autofocusButton,\n        onClick: withModifiers(checkIdentifier, [\"prevent\"])\n      }, toDisplayString(unref(t)(\"continue\")), 9, _hoisted_7$b)]), showWelcomeUI.value ? (openBlock(), createElementBlock(\"div\", _hoisted_8$8, [createBaseVNode(\"a\", {\n        onClick: withModifiers(switchAccount, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"register-link\"\n      }, toDisplayString(unref(t)(\"switch-account\")), 9, _hoisted_9$7)])) : createCommentVNode(\"\", true)]);\n    };\n  }\n});\nvar OnEventType = /* @__PURE__ */(OnEventType2 => {\n  OnEventType2[\"onLoaded\"] = \"onLoaded\";\n  OnEventType2[\"onRegisterDevice\"] = \"onRegisterDevice\";\n  OnEventType2[\"onVerifyIdentity\"] = \"onVerifyIdentity\";\n  OnEventType2[\"onMagicLinkLogin\"] = \"onMagicLinkLogin\";\n  OnEventType2[\"onMagicLinkRegister\"] = \"onMagicLinkRegister\";\n  OnEventType2[\"onMagicLinkActivated\"] = \"onMagicLinkActivated\";\n  OnEventType2[\"onMagicLinkActivateSuccess\"] = \"onMagicLinkActivateSuccess\";\n  OnEventType2[\"onOneTimePasscodeLogin\"] = \"onOneTimePasscodeLogin\";\n  OnEventType2[\"onOneTimePasscodeRegister\"] = \"onOneTimePasscodeRegister\";\n  OnEventType2[\"onOneTimePasscodeActivated\"] = \"onOneTimePasscodeActivated\";\n  OnEventType2[\"onOneTimePasscodeActivateSuccess\"] = \"onOneTimePasscodeActivateSuccess\";\n  return OnEventType2;\n})(OnEventType || {});\nconst defaultBeforeAuth = () => {\n  return true;\n};\nconst defaultOnSuccess = authResult2 => {\n  window.location.href = authResult2.redirect_url;\n};\nconst defaultOnEvent = () => {\n  return;\n};\nconst beforeAuth = ref(defaultBeforeAuth);\nconst onSuccess = ref(defaultOnSuccess);\nconst onEvent = ref(defaultOnEvent);\nfunction setBeforeAuth(newBeforeAuth) {\n  if (newBeforeAuth === void 0) {\n    beforeAuth.value = defaultBeforeAuth;\n    return;\n  }\n  beforeAuth.value = newBeforeAuth;\n}\nfunction setOnSuccess(newOnSuccess) {\n  if (newOnSuccess === void 0) {\n    onSuccess.value = defaultOnSuccess;\n    return;\n  }\n  onSuccess.value = newOnSuccess;\n}\nfunction setOnEvent(newOnEvent) {\n  if (newOnEvent === void 0) {\n    onEvent.value = defaultOnEvent;\n    return;\n  }\n  onEvent.value = newOnEvent;\n}\nfunction useCallbacks() {\n  return {\n    beforeAuth: readonly(beforeAuth),\n    onSuccess: readonly(onSuccess),\n    onEvent: readonly(onEvent),\n    setBeforeAuth,\n    setOnSuccess,\n    setOnEvent\n  };\n}\nconst storageKey = \"psg_last_login\";\nfunction getLastLogin() {\n  return localStorage.getItem(storageKey);\n}\nfunction storeLastLogin(identiferOrUserInfo) {\n  return __async(this, null, function* () {\n    if (identiferOrUserInfo && typeof identiferOrUserInfo === \"string\") {\n      localStorage.setItem(storageKey, identiferOrUserInfo);\n      return;\n    }\n    let currentInfo = identiferOrUserInfo;\n    if (identiferOrUserInfo === void 0) {\n      const {\n        appId\n      } = useAppId();\n      const passage = new Y(appId.value);\n      currentInfo = yield passage.getCurrentUser().userInfo();\n    }\n    if (currentInfo === void 0) {\n      return;\n    }\n    localStorage.setItem(storageKey, currentInfo.email ? currentInfo.email : currentInfo.phone);\n  });\n}\nfunction createdUserEventHandler(payload, eventHandlerState) {\n  const {\n    webauthnAllowed,\n    appInfo,\n    router\n  } = eventHandlerState;\n  const {\n    identifier,\n    identifierType\n  } = payload;\n  const {\n    emitEvent: emitEvent2\n  } = useAuthEvent();\n  if (!webauthnAllowed || appInfo.require_identifier_verification) {\n    emitEvent2({\n      type: AuthEventType.FallbackAuth,\n      payload: {\n        identifier,\n        identifierType,\n        identifierVerifying: appInfo.require_identifier_verification,\n        userIsRegistering: true,\n        userInitiated: false\n      }\n    });\n    return;\n  }\n  useCallbacks().onEvent.value(OnEventType.onRegisterDevice, {\n    identifier\n  });\n  router.push(RegisterDeviceRoute, {\n    identifier,\n    identifierType,\n    appInfo\n  });\n}\nfunction changeIdenfitierEventHandler(eventHandlerState) {\n  const {\n    appInfo,\n    router,\n    browserFeatures\n  } = eventHandlerState;\n  router.push(router.homeRoute, {\n    appInfo,\n    conditionalUI: browserFeatures.conditionalUI,\n    changeEmail: true\n  });\n}\nfunction isWebauthnGetMonkeypatched() {\n  const isGetNative = navigator.credentials.get.toString().includes(\"[native code]\");\n  return !isGetNative;\n}\nfunction loginUserEventHandler(payload, eventHandlerState) {\n  return __async(this, null, function* () {\n    const {\n      browserFeatures,\n      appInfo,\n      router\n    } = eventHandlerState;\n    const {\n      appId\n    } = useAppId();\n    const passage = new Y(appId.value);\n    const {\n      emitEvent: emitEvent2\n    } = useAuthEvent();\n    const {\n      identifier,\n      identifierType,\n      userHasPasskey,\n      userHasWebauthn,\n      emailVerified,\n      phoneVerified,\n      userID\n    } = payload;\n    const noFallback = appInfo.auth_fallback_method === ue.None;\n    if (!userHasWebauthn && noFallback) {\n      router.push(LoginNotSupportedRoute);\n      return;\n    }\n    const verificationRequired = userNeedsToVerify(appInfo, emailVerified, phoneVerified, identifierType);\n    const canTryPlaform = browserFeatures.platform && userHasWebauthn && passage.credIDExists(userID);\n    const canTryPasskey = browserFeatures.syncedCredential && userHasPasskey;\n    const tryWebauthnWithNoFallback = browserFeatures.platform && noFallback;\n    const tryNonNativeWebauthn = userHasPasskey && browserFeatures.platform && isWebauthnGetMonkeypatched();\n    const canTryWebAuthn = !verificationRequired && (canTryPasskey || canTryPlaform || tryWebauthnWithNoFallback || tryNonNativeWebauthn);\n    if (canTryWebAuthn) {\n      useCallbacks().onEvent.value(OnEventType.onVerifyIdentity);\n      router.push(WebauthnSignInRoute, {\n        identifier,\n        identifierType,\n        appInfo\n      });\n    } else {\n      emitEvent2({\n        type: AuthEventType.FallbackAuth,\n        payload: {\n          identifier,\n          identifierType,\n          userInitiated: false,\n          identifierVerifying: verificationRequired,\n          setupNewDevice: browserFeatures.platform\n        }\n      });\n    }\n  });\n}\nfunction userNeedsToVerify(appInfo, emailVerified, phoneVerified, identifierType) {\n  if (appInfo.require_identifier_verification) {\n    if (identifierType === IdentifierType.email && !emailVerified || identifierType === IdentifierType.phone && !phoneVerified) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction fallbackAuthEventHandler(payload, eventHandlerState) {\n  const {\n    authState,\n    appInfo,\n    router\n  } = eventHandlerState;\n  authState.userInitiatedFallback = payload.userInitiated;\n  switch (appInfo.auth_fallback_method) {\n    case ue.LoginCode:\n      otpCallback(payload);\n      router.push(OneTimePasscodeRoute, payload);\n      break;\n    case ue.MagicLink:\n      magicLinkCallback(payload);\n      router.push(MagicLinkRoute, payload);\n      break;\n    case ue.None:\n      router.push(DisableFallbacksRoute);\n      break;\n  }\n}\nfunction magicLinkCallback(payload) {\n  const {\n    identifier,\n    userIsRegistering\n  } = payload;\n  if (userIsRegistering) {\n    useCallbacks().onEvent.value(OnEventType.onMagicLinkRegister, {\n      identifier\n    });\n  } else {\n    useCallbacks().onEvent.value(OnEventType.onMagicLinkLogin);\n  }\n}\nfunction otpCallback(payload) {\n  const {\n    identifier,\n    userIsRegistering\n  } = payload;\n  if (userIsRegistering) {\n    useCallbacks().onEvent.value(OnEventType.onOneTimePasscodeRegister, {\n      identifier\n    });\n  } else {\n    useCallbacks().onEvent.value(OnEventType.onOneTimePasscodeLogin);\n  }\n}\nfunction authSuccessEventHandler(payload) {\n  return __async(this, null, function* () {\n    if (isStringNullish(payload.authResult.auth_token) || isStringNullish(payload.authResult.redirect_url)) {\n      return;\n    }\n    yield storeLastLogin(payload.identifier);\n    useCallbacks().onSuccess.value(payload.authResult);\n  });\n}\nfunction fallbackAuthSuccessEventHandler(payload, eventHandlerState) {\n  const {\n    webauthnAllowed,\n    authState,\n    router\n  } = eventHandlerState;\n  if (webauthnAllowed && !authState.userInitiatedFallback) {\n    router.push(AddDeviceRoute, payload);\n    return;\n  }\n  useAuthEvent().emitEvent({\n    type: AuthEventType.AuthSuccess,\n    payload\n  });\n}\nfunction isSafariVersionLessThan164() {\n  const userAgent = new UAParser();\n  return userAgent.getBrowser().name == \"Safari\" && parseFloat(userAgent.getBrowser().version || \"\") < 16.4;\n}\nvar AuthEventType = /* @__PURE__ */(AuthEventType2 => {\n  AuthEventType2[\"CreatedUser\"] = \"CreatedUser\";\n  AuthEventType2[\"ChangeIdentifier\"] = \"ChangeIdentifier\";\n  AuthEventType2[\"LoginUser\"] = \"LoginUser\";\n  AuthEventType2[\"FallbackAuth\"] = \"FallbackAuth\";\n  AuthEventType2[\"AuthSuccess\"] = \"AuthSuccess\";\n  AuthEventType2[\"FallbackAuthSuccess\"] = \"FallbackAuthSuccess\";\n  return AuthEventType2;\n})(AuthEventType || {});\nclass EventHandler {\n  constructor(appInfo, router) {\n    this.appInfo = appInfo;\n    this.router = router;\n    this.authState = {\n      userInitiatedFallback: false\n    };\n    this.authOriginValid = false;\n    this.browserFeatures = {\n      securityKey: false,\n      platform: false,\n      syncedCredential: false,\n      crossDeviceCredential: false,\n      conditionalUI: false,\n      isAvailable: false\n    };\n  }\n  initializeEventHandler() {\n    return __async(this, null, function* () {\n      const {\n        appId\n      } = useAppId();\n      const passage = new Y(appId.value);\n      this.authOriginValid = passage.checkWebauthnConfig(this.appInfo);\n      if (this.authOriginValid) {\n        this.browserFeatures = yield passage.getCredentialAvailable();\n        if (isSafariVersionLessThan164()) {\n          this.browserFeatures.conditionalUI = false;\n        }\n      }\n      if (!this.checkMagicLink()) {\n        this.router.push(this.router.homeRoute, {\n          appInfo: this.appInfo,\n          conditionalUI: this.browserFeatures.conditionalUI\n        });\n      }\n    });\n  }\n  handleEvent(event) {\n    return __async(this, null, function* () {\n      switch (event.type) {\n        case \"CreatedUser\":\n          createdUserEventHandler(event.payload, this.eventHandlerState);\n          break;\n        case \"ChangeIdentifier\":\n          changeIdenfitierEventHandler(this.eventHandlerState);\n          break;\n        case \"LoginUser\":\n          loginUserEventHandler(event.payload, this.eventHandlerState);\n          break;\n        case \"FallbackAuth\":\n          fallbackAuthEventHandler(event.payload, this.eventHandlerState);\n          break;\n        case \"AuthSuccess\":\n          authSuccessEventHandler(event.payload);\n          break;\n        case \"FallbackAuthSuccess\":\n          fallbackAuthSuccessEventHandler(event.payload, this.eventHandlerState);\n          break;\n      }\n    });\n  }\n  get eventHandlerState() {\n    return {\n      appInfo: this.appInfo,\n      webauthnAllowed: this.browserFeatures.platform,\n      router: this.router,\n      authState: this.authState,\n      browserFeatures: this.browserFeatures\n    };\n  }\n  checkMagicLink() {\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    let magicLink = null;\n    if (urlParams.has(\"psg_magic_link\")) {\n      magicLink = urlParams.get(\"psg_magic_link\");\n    } else if (urlParams.has(\"psg_verify_link\")) {\n      magicLink = urlParams.get(\"psg_verify_link\");\n    }\n    if (magicLink !== null) {\n      this.router.push(ActivateMagicLinkRoute, {\n        magicLink,\n        webauthnAllowed: this.browserFeatures.platform\n      });\n      return true;\n    }\n    return false;\n  }\n}\nlet eventHandler = void 0;\nfunction initEventHandler(appInfo, router) {\n  return __async(this, null, function* () {\n    eventHandler = new EventHandler(appInfo, router);\n    yield eventHandler.initializeEventHandler();\n  });\n}\nfunction getEventHandler() {\n  return eventHandler;\n}\nfunction emitEvent(event) {\n  return __async(this, null, function* () {\n    return eventHandler == null ? void 0 : eventHandler.handleEvent(event);\n  });\n}\nfunction useAuthEvent() {\n  return {\n    initEventHandler,\n    getEventHandler,\n    emitEvent\n  };\n}\nconst _sfc_main$t = defineComponent({\n  __name: \"Login\",\n  props: {\n    canToggleLoginRegister: {\n      type: Boolean\n    },\n    identifier: {},\n    countryCode: {},\n    appInfo: {},\n    visible: {\n      type: Boolean\n    },\n    conditionalUI: {\n      type: Boolean\n    },\n    changeEmail: {\n      type: Boolean\n    }\n  },\n  emits: [\"update:identifier\", \"update:countryCode\"],\n  setup(__props, _ref2) {\n    let {\n      emit\n    } = _ref2;\n    const props = __props;\n    const {\n      appId\n    } = useAppId();\n    const {\n      t\n    } = useLocale();\n    const error = ref(\"\");\n    const identifierText = computed({\n      get() {\n        return props.identifier;\n      },\n      set(newIdentifier) {\n        emit(\"update:identifier\", newIdentifier);\n      }\n    });\n    const countryCodeText = computed({\n      get() {\n        return props.countryCode;\n      },\n      set(newCountryCode) {\n        emit(\"update:countryCode\", newCountryCode);\n      }\n    });\n    const inputForm = ref();\n    watch(inputForm, () => __async(this, null, function* () {\n      useCallbacks().onEvent.value(OnEventType.onLoaded);\n      triggerConditionalUI();\n    }));\n    const identifierMode = computed(() => {\n      var _a;\n      return (_a = props.appInfo.allowed_identifier) != null ? _a : oe.email;\n    });\n    function onSubmit(event) {\n      return __async(this, null, function* () {\n        const {\n          identifier,\n          identifierExists,\n          userHasWebauthn,\n          userHasPasskey,\n          userStatus,\n          userID,\n          identifierType,\n          emailVerified,\n          phoneVerified\n        } = event;\n        const beforeAuthResult = useCallbacks().beforeAuth.value(identifier);\n        if (!beforeAuthResult) {\n          return;\n        }\n        const errorString = checkIdentifierExistsAndStatus(identifierExists, identifierType, userStatus);\n        if (errorString !== \"\") {\n          error.value = errorString;\n          return;\n        }\n        useAuthEvent().emitEvent({\n          type: AuthEventType.LoginUser,\n          payload: {\n            identifier,\n            identifierType,\n            userHasPasskey,\n            userHasWebauthn,\n            userID,\n            emailVerified,\n            phoneVerified\n          }\n        });\n      });\n    }\n    function checkIdentifierExistsAndStatus(identifierExists, identifierType, userStatus) {\n      if (!identifierExists) {\n        let identiferString = identifierType === IdentifierType.email ? t(\"email\") : t(\"phone\");\n        identiferString = `${identiferString.charAt(0).toUpperCase()}${identiferString.slice(1)}`;\n        let message = `${t(\"not-recognized\", [identiferString])}.`;\n        if (props.canToggleLoginRegister && props.appInfo.public_signup) {\n          message = `${message} ${t(\"toggle-register\")}`;\n        }\n        return message;\n      }\n      if (identifierExists && userStatus === te.INACTIVE) {\n        return t(\"account-no-longer-active\");\n      }\n      return \"\";\n    }\n    const showWelcomeBack = ref(false);\n    let abortController;\n    onMounted(() => {\n      const lastLogin = getLastLogin();\n      if (lastLogin && !props.changeEmail) {\n        identifierText.value = lastLogin;\n        showWelcomeBack.value = true;\n      }\n    });\n    function triggerConditionalUI() {\n      return __async(this, null, function* () {\n        if (props.conditionalUI) {\n          abortController = new AbortController();\n          const passage = new Y(appId.value);\n          passage.loginConditional(abortController.signal).then(authResult => {\n            useAuthEvent().emitEvent({\n              type: AuthEventType.AuthSuccess,\n              payload: {\n                authResult\n              }\n            });\n          }).catch(() => {});\n        }\n      });\n    }\n    function cancelConditionalUI() {\n      abortController == null ? void 0 : abortController.abort();\n    }\n    onBeforeUnmount(() => {\n      cancelConditionalUI();\n    });\n    watch(() => props.visible, () => {\n      if (showWelcomeBack.value === true) {\n        identifierText.value = \"\";\n      }\n      showWelcomeBack.value = false;\n      if (props.visible) {\n        triggerConditionalUI();\n      } else {\n        cancelConditionalUI();\n      }\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$u, {\n        appId: unref(appId),\n        identifierMode: identifierMode.value,\n        conditionalUI: _ctx.conditionalUI,\n        showWelcomeBack: showWelcomeBack.value,\n        \"onUpdate:showWelcomeBack\": _cache[0] || (_cache[0] = $event => showWelcomeBack.value = $event),\n        identifier: identifierText.value,\n        \"onUpdate:identifier\": _cache[1] || (_cache[1] = $event => identifierText.value = $event),\n        validationError: error.value,\n        \"onUpdate:validationError\": _cache[2] || (_cache[2] = $event => error.value = $event),\n        countryCode: countryCodeText.value,\n        \"onUpdate:countryCode\": _cache[3] || (_cache[3] = $event => countryCodeText.value = $event),\n        onOnSubmit: _cache[4] || (_cache[4] = $event => onSubmit($event)),\n        ref_key: \"inputForm\",\n        ref: inputForm\n      }, {\n        loginInput: withCtx(() => [renderSlot(_ctx.$slots, \"loginInput\")]),\n        _: 3\n      }, 8, [\"appId\", \"identifierMode\", \"conditionalUI\", \"showWelcomeBack\", \"identifier\", \"validationError\", \"countryCode\"]);\n    };\n  }\n});\nconst _hoisted_1$p = {\n  key: 0,\n  class: \"notification is-danger has-text-centered\",\n  \"data-test\": \"invalid-app-id\"\n};\nconst _sfc_main$s = defineComponent({\n  __name: \"Register\",\n  props: {\n    canToggleLoginRegister: {\n      type: Boolean\n    },\n    identifier: {},\n    countryCode: {},\n    appInfo: {}\n  },\n  emits: [\"update:identifier\", \"update:countryCode\", \"authEvent\"],\n  setup(__props, _ref3) {\n    let {\n      emit\n    } = _ref3;\n    const props = __props;\n    const {\n      t\n    } = useLocale();\n    const {\n      appId\n    } = useAppId();\n    const {\n      emitEvent: emitEvent2\n    } = useAuthEvent();\n    const error = ref(\"\");\n    const identifierText = computed({\n      get() {\n        return props.identifier;\n      },\n      set(newIdentifier) {\n        emit(\"update:identifier\", newIdentifier);\n      }\n    });\n    const countryCodeText = computed({\n      get() {\n        return props.countryCode;\n      },\n      set(newCountryCode) {\n        emit(\"update:countryCode\", newCountryCode);\n      }\n    });\n    const publicSignup = computed(() => {\n      return props.appInfo.public_signup;\n    });\n    const identifierMode = computed(() => {\n      return props.appInfo.allowed_identifier;\n    });\n    function onSubmit(event) {\n      return __async(this, null, function* () {\n        const {\n          identifier,\n          identifierExists,\n          userStatus,\n          identifierType\n        } = event;\n        const beforeAuthResult = useCallbacks().beforeAuth.value(identifier);\n        if (!beforeAuthResult) {\n          return;\n        }\n        let validMetadata = true;\n        if (metadataComponent.value) {\n          validMetadata = metadataComponent.value.validate();\n        }\n        if (identifierExists) {\n          if (userStatus === te.ACTIVE) {\n            let message = t(\"account-already-exists\", [identifierType === IdentifierType.email ? t(\"email\") : t(\"phone-number\")]);\n            if (props.canToggleLoginRegister) {\n              message = message + \" \" + t(\"toggle-login\");\n            }\n            error.value = message;\n            return;\n          } else if (userStatus === te.INACTIVE) {\n            error.value = t(\"account-no-longer-active\");\n            return;\n          }\n        }\n        const passage = new Y(appId.value);\n        if (!validMetadata) {\n          return;\n        }\n        try {\n          yield passage.createUser({\n            identifier,\n            user_metadata: transformMetadata(metadata.value, props.appInfo.user_metadata_schema, true)\n          });\n        } catch (err) {\n          if (err instanceof h && err.message.startsWith(\"Public signup\")) {\n            error.value = err.message;\n          } else {\n            error.value = t(\"unexpected-error\");\n          }\n          return;\n        }\n        emitEvent2({\n          type: AuthEventType.CreatedUser,\n          payload: {\n            identifier,\n            identifierType\n          }\n        });\n      });\n    }\n    const metadata = ref({});\n    const metadataComponent = ref();\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", null, [createVNode(_sfc_main$u, {\n        appId: unref(appId),\n        identifierMode: identifierMode.value,\n        identifier: identifierText.value,\n        \"onUpdate:identifier\": _cache[0] || (_cache[0] = $event => identifierText.value = $event),\n        validationError: error.value,\n        \"onUpdate:validationError\": _cache[1] || (_cache[1] = $event => error.value = $event),\n        countryCode: countryCodeText.value,\n        \"onUpdate:countryCode\": _cache[2] || (_cache[2] = $event => countryCodeText.value = $event),\n        onOnSubmit: _cache[3] || (_cache[3] = $event => onSubmit($event))\n      }, {\n        metadataFields: withCtx(() => [_ctx.appInfo && _ctx.appInfo.layouts.registration.length > 0 ? (openBlock(), createBlock(UserMetadata, {\n          key: 0,\n          isEditing: true,\n          appInfo: _ctx.appInfo,\n          layoutType: unref(LayoutType).Registration,\n          userMetadata: metadata.value,\n          ref_key: \"metadataComponent\",\n          ref: metadataComponent\n        }, null, 8, [\"appInfo\", \"layoutType\", \"userMetadata\"])) : createCommentVNode(\"\", true)]),\n        _: 1\n      }, 8, [\"appId\", \"identifierMode\", \"identifier\", \"validationError\", \"countryCode\"]), !publicSignup.value ? (openBlock(), createElementBlock(\"div\", _hoisted_1$p, toDisplayString(unref(t)(\"public-registration-not-allowed\")), 1)) : createCommentVNode(\"\", true)]);\n    };\n  }\n});\nconst ephemeralAppIdKey = \"psg_ephemeral_app_id\";\nconst ephemeralAppNameKey = \"psg_ephemeral_app_name\";\nclass EphemeralAppService {\n  newEphemeralApp() {\n    return __async(this, null, function* () {\n      const ephemeralAppUrl = \"https://api.passage.id/v1/apps/\";\n      const response = yield fetch(ephemeralAppUrl, {\n        method: \"POST\",\n        body: JSON.stringify({\n          auth_origin: window.location.origin,\n          name: \"Ephemeral Random \" + (Math.random() * 1e6).toString()\n        })\n      });\n      const responseBody = yield response.json();\n      if (response.status !== 200) {\n        throw responseBody.message;\n      }\n      localStorage.setItem(ephemeralAppIdKey, responseBody.app.id);\n      localStorage.setItem(ephemeralAppNameKey, responseBody.app.name);\n      return responseBody;\n    });\n  }\n}\nconst _sfc_main$r = defineComponent({\n  name: \"EphemeralAppInfo\",\n  setup() {\n    const consoleUrl = \"https://console.passage.id\";\n    const {\n      t\n    } = useLocale();\n    const error = ref(false);\n    const isEphemeral = ref(false);\n    const claimed = ref(false);\n    const ephemeralClaimUrl = ref(\"\");\n    const exampleTag = ref(\"\");\n    const passageWebSetup = () => __async(this, null, function* () {\n      const {\n        appIdUnassigned,\n        updateAppId\n      } = useAppId();\n      if (appIdUnassigned.value) {\n        isEphemeral.value = true;\n        const ephemeralAppId = localStorage.getItem(ephemeralAppIdKey);\n        const ephemeralAppName = localStorage.getItem(ephemeralAppNameKey);\n        if (ephemeralAppId) {\n          const nameParam = ephemeralAppName ? `?name=${encodeURIComponent(ephemeralAppName)}` : \"\";\n          ephemeralClaimUrl.value = `${consoleUrl}/claim/${ephemeralAppId}${nameParam}`;\n          updateAppId(ephemeralAppId);\n          logToConsole();\n        } else {\n          try {\n            const ephemeralService = new EphemeralAppService();\n            const res = yield ephemeralService.newEphemeralApp();\n            updateAppId(res.app.id);\n            const nameParam = res.app.name ? `?name=${encodeURIComponent(res.app.name)}` : \"\";\n            ephemeralClaimUrl.value = `${consoleUrl}/claim/${res.app.id}${nameParam}`;\n            logToConsole();\n          } catch (err) {\n            error.value = true;\n            updateAppId(\"\");\n          }\n        }\n      }\n    });\n    const checkIfClaimed = () => __async(this, null, function* () {\n      const {\n        appId\n      } = useAppId();\n      if (!isEphemeral.value) {\n        return;\n      }\n      const passage = new Y(appId.value);\n      try {\n        const res = yield passage.appInfo();\n        if (!res.ephemeral) {\n          claimed.value = true;\n          exampleTag.value = `<passage-auth app-id=\"${appId.value}\"/>`;\n        }\n      } catch (e) {\n        error.value = true;\n      }\n    });\n    function logToConsole() {\n      const {\n        appId\n      } = useAppId();\n      console.info(`Passage Test App ID: ${appId.value}`);\n      console.info(`Claim your app: ${ephemeralClaimUrl.value}`);\n    }\n    onBeforeMount(() => __async(this, null, function* () {\n      yield passageWebSetup();\n      yield checkIfClaimed();\n    }));\n    return {\n      error,\n      isEphemeral,\n      claimed,\n      ephemeralClaimUrl,\n      exampleTag,\n      t\n    };\n  }\n});\nconst _hoisted_1$o = {\n  key: 0\n};\nconst _hoisted_2$g = {\n  key: 0,\n  class: \"notification is-danger\"\n};\nconst _hoisted_3$e = {\n  key: 1,\n  class: \"notification ephemeral-box\",\n  \"data-test\": \"ephemeral-app-message\"\n};\nconst _hoisted_4$d = {\n  key: 0\n};\nconst _hoisted_5$c = [\"href\"];\nconst _hoisted_6$a = {\n  key: 1\n};\nconst _hoisted_7$a = /* @__PURE__ */createBaseVNode(\"br\", null, null, -1);\nfunction _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return _ctx.isEphemeral ? (openBlock(), createElementBlock(\"div\", _hoisted_1$o, [_ctx.error ? (openBlock(), createElementBlock(\"div\", _hoisted_2$g, toDisplayString(_ctx.t(\"unable-to-create-test-app\")), 1)) : (openBlock(), createElementBlock(\"div\", _hoisted_3$e, [!_ctx.claimed ? (openBlock(), createElementBlock(\"div\", _hoisted_4$d, [createTextVNode(toDisplayString(_ctx.t(\"currently-using-test-app\")) + \" \", 1), createBaseVNode(\"a\", {\n    href: _ctx.ephemeralClaimUrl,\n    target: \"_blank\"\n  }, toDisplayString(_ctx.t(\"click-here\")), 9, _hoisted_5$c), createTextVNode(\".\")])) : (openBlock(), createElementBlock(\"div\", _hoisted_6$a, [createTextVNode(toDisplayString(_ctx.t(\"add-your-claimed-app-like-this\")) + \" \", 1), _hoisted_7$a, createTextVNode(toDisplayString(_ctx.exampleTag), 1)]))]))])) : createCommentVNode(\"\", true);\n}\nvar EphemeralAppInfo = /* @__PURE__ */_export_sfc(_sfc_main$r, [[\"render\", _sfc_render$1]]);\nconst _hoisted_1$n = {\n  key: 0,\n  class: \"link has-text-centered\"\n};\nconst _hoisted_2$f = {\n  class: \"passage-branding\"\n};\nconst _hoisted_3$d = {\n  href: \"https://passage.1password.com/\",\n  target: \"_new_tab\"\n};\nconst _sfc_main$q = defineComponent({\n  __name: \"PassageBranding\",\n  props: {\n    appInfo: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return _ctx.appInfo.passage_branding ? (openBlock(), createElementBlock(\"div\", _hoisted_1$n, [createBaseVNode(\"div\", _hoisted_2$f, [createBaseVNode(\"a\", _hoisted_3$d, [createVNode(unref(InlineSvg), {\n        src: unref(Icons).poweredByPassage,\n        alt: \"Powered by Passage Icon\"\n      }, null, 8, [\"src\"])])])])) : createCommentVNode(\"\", true);\n    };\n  }\n});\nconst _hoisted_1$m = {\n  class: \"view-email-input\"\n};\nconst _hoisted_2$e = {\n  class: \"auth-flex-container\"\n};\nconst _hoisted_3$c = {\n  class: \"title main-title has-text-centered\"\n};\nconst _hoisted_4$c = /* @__PURE__ */createBaseVNode(\"div\", {\n  style: {\n    \"height\": \"20px\"\n  }\n}, null, -1);\nconst _hoisted_5$b = {\n  class: \"spacer\"\n};\nconst _hoisted_6$9 = {\n  class: \"link has-text-centered\"\n};\nconst _hoisted_7$9 = {\n  key: 0\n};\nconst _hoisted_8$7 = [\"onClick\"];\nconst _hoisted_9$6 = {\n  key: 1\n};\nconst _hoisted_10$4 = [\"onClick\"];\nconst _sfc_main$p = defineComponent({\n  __name: \"AuthView\",\n  props: {\n    register: {\n      type: Boolean\n    },\n    appInfo: {},\n    conditionalUI: {\n      type: Boolean\n    },\n    changeEmail: {\n      type: Boolean\n    }\n  },\n  setup(__props) {\n    const props = __props;\n    const {\n      t\n    } = useLocale();\n    const showLogin = ref(!props.register);\n    const identifier = ref(\"\");\n    const {\n      defaultCountryCode\n    } = useDefaultCountryCode();\n    const countryCode = defaultCountryCode;\n    const publicSignup = computed(() => {\n      return props.appInfo.public_signup;\n    });\n    function changeInputPage() {\n      showLogin.value = !showLogin.value;\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$m, [createBaseVNode(\"div\", _hoisted_2$e, [createBaseVNode(\"div\", _hoisted_3$c, toDisplayString(showLogin.value ? unref(t)(\"login-title\") : unref(t)(\"register-title\")), 1), _hoisted_4$c, withDirectives(createVNode(_sfc_main$t, {\n        identifier: identifier.value,\n        \"onUpdate:identifier\": _cache[0] || (_cache[0] = $event => identifier.value = $event),\n        canToggleLoginRegister: true,\n        countryCode: unref(countryCode),\n        \"onUpdate:countryCode\": _cache[1] || (_cache[1] = $event => isRef(countryCode) ? countryCode.value = $event : null),\n        appInfo: _ctx.appInfo,\n        visible: showLogin.value,\n        conditionalUI: _ctx.conditionalUI,\n        changeEmail: _ctx.changeEmail\n      }, {\n        loginInput: withCtx(() => [renderSlot(_ctx.$slots, \"loginInput\")]),\n        _: 3\n      }, 8, [\"identifier\", \"countryCode\", \"appInfo\", \"visible\", \"conditionalUI\", \"changeEmail\"]), [[vShow, showLogin.value]]), withDirectives(createVNode(_sfc_main$s, {\n        identifier: identifier.value,\n        \"onUpdate:identifier\": _cache[2] || (_cache[2] = $event => identifier.value = $event),\n        canToggleLoginRegister: true,\n        countryCode: unref(countryCode),\n        \"onUpdate:countryCode\": _cache[3] || (_cache[3] = $event => isRef(countryCode) ? countryCode.value = $event : null),\n        appInfo: _ctx.appInfo\n      }, null, 8, [\"identifier\", \"countryCode\", \"appInfo\"]), [[vShow, !showLogin.value]]), createBaseVNode(\"div\", _hoisted_5$b, [createVNode(EphemeralAppInfo)]), createBaseVNode(\"div\", _hoisted_6$9, [showLogin.value && publicSignup.value ? (openBlock(), createElementBlock(\"div\", _hoisted_7$9, [createTextVNode(toDisplayString(unref(t)(\"dont-have-an-account\")) + \" \", 1), createBaseVNode(\"a\", {\n        onClick: withModifiers(changeInputPage, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"register-link\"\n      }, toDisplayString(unref(t)(\"register-here\")), 9, _hoisted_8$7)])) : !showLogin.value ? (openBlock(), createElementBlock(\"div\", _hoisted_9$6, [createTextVNode(toDisplayString(unref(t)(\"already-have-an-account\")) + \" \", 1), createBaseVNode(\"a\", {\n        onClick: withModifiers(changeInputPage, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"login-link\"\n      }, toDisplayString(unref(t)(\"login-here\")), 9, _hoisted_10$4)])) : createCommentVNode(\"\", true)])]), createVNode(_sfc_main$q, {\n        \"app-info\": _ctx.appInfo\n      }, null, 8, [\"app-info\"])]);\n    };\n  }\n});\nfunction useUIState() {\n  const showFailure = ref(false);\n  const showSuccess = ref(false);\n  const loading = ref(false);\n  const pageLoading = ref(true);\n  const {\n    t\n  } = useLocale();\n  const title = computed(() => {\n    if (showSuccess.value) {\n      return t(\"success\");\n    }\n    if (showFailure.value) {\n      return t(\"something-went-wrong\");\n    }\n    return t(\"log-in-with-a-passkey\");\n  });\n  const uiSuccess = () => {\n    showSuccess.value = true;\n    showFailure.value = false;\n    loading.value = false;\n  };\n  const uiError = () => {\n    showSuccess.value = false;\n    showFailure.value = true;\n    loading.value = false;\n  };\n  const uiLoading = () => {\n    showSuccess.value = false;\n    showFailure.value = false;\n    loading.value = true;\n  };\n  return {\n    showFailure,\n    showSuccess,\n    loading,\n    pageLoading,\n    title,\n    uiSuccess,\n    uiError,\n    uiLoading\n  };\n}\nvar MagicLinkActionEnum = /* @__PURE__ */(MagicLinkActionEnum2 => {\n  MagicLinkActionEnum2[\"LOGIN\"] = \"psg_magic_link\";\n  MagicLinkActionEnum2[\"VERIFY\"] = \"psg_verify_link\";\n  return MagicLinkActionEnum2;\n})(MagicLinkActionEnum || {});\nconst useMagicLinkUtils = magicLink => {\n  const magicLinkAction = ref();\n  const invalidMagicLink = ref(false);\n  const isMagicLinkValid = () => {\n    const searchParams = new URLSearchParams(window.location.href.split(\"?\")[1]);\n    if (searchParams.has(\"psg_magic_link\")) {\n      magicLinkAction.value = \"psg_magic_link\";\n    } else if (searchParams.has(\"psg_verify_link\")) {\n      magicLinkAction.value = \"psg_verify_link\";\n    }\n    if (!magicLinkAction.value || !magicLink) {\n      invalidMagicLink.value = true;\n    }\n    return !invalidMagicLink.value;\n  };\n  return {\n    magicLinkAction,\n    invalidMagicLink,\n    isMagicLinkValid\n  };\n};\nconst useMagicLinkActivation = _ref4 => {\n  let {\n    magicLink,\n    uiState,\n    magicLinkUtils,\n    passage\n  } = _ref4;\n  const authResult2 = ref(null);\n  const onBeforeActivate = () => {\n    uiState.uiLoading();\n    authResult2.value = {\n      auth_token: \"\",\n      redirect_url: \"\"\n    };\n  };\n  const onActivateError = () => {\n    uiState.uiError();\n  };\n  const onActivateErrorInvalidMagicLink = () => {\n    magicLinkUtils.invalidMagicLink.value = true;\n    uiState.uiError();\n  };\n  const onActivateSuccess = _0 => __async(void 0, [_0], function (_ref5) {\n    let {\n      webauthnAllowed,\n      magicLinkAction,\n      result\n    } = _ref5;\n    return function* () {\n      authResult2.value = result;\n      if (!webauthnAllowed || magicLinkAction === MagicLinkActionEnum.VERIFY) {\n        uiState.uiSuccess();\n        yield new Promise(resolve => {\n          setTimeout(resolve, 2e3);\n        });\n      }\n      if (authResult2.value.redirect_url) {\n        useAuthEvent().emitEvent({\n          type: magicLinkAction === MagicLinkActionEnum.VERIFY ? AuthEventType.AuthSuccess : AuthEventType.FallbackAuthSuccess,\n          payload: {\n            authResult: result\n          }\n        });\n      }\n    }();\n  });\n  const activateWithoutBiometrics = (webauthnAllowed, magicLinkAction) => __async(void 0, null, function* () {\n    onBeforeActivate();\n    try {\n      const result = yield passage.magicLinkActivate(magicLink);\n      onActivateSuccess({\n        webauthnAllowed,\n        magicLinkAction,\n        result\n      });\n    } catch (err) {\n      if (err.statusCode === T.NotFound) {\n        onActivateErrorInvalidMagicLink();\n      } else {\n        onActivateError();\n      }\n    }\n  });\n  return {\n    authResult: authResult2,\n    onBeforeActivate,\n    onActivateError,\n    onActivateErrorInvalidMagicLink,\n    onActivateSuccess,\n    activateWithoutBiometrics\n  };\n};\nconst _hoisted_1$l = {\n  class: \"auth-flex-container\"\n};\nconst _hoisted_2$d = {\n  class: \"image has-text-centered\"\n};\nconst _hoisted_3$b = {\n  class: \"content has-text-centered\",\n  \"data-test\": \"activate-magic-link-message\"\n};\nconst _hoisted_4$b = {\n  key: 0\n};\nconst _hoisted_5$a = {\n  key: 1\n};\nconst _hoisted_6$8 = {\n  key: 2\n};\nconst _hoisted_7$8 = {\n  key: 3\n};\nconst _hoisted_8$6 = {\n  key: 4\n};\nconst _hoisted_9$5 = {\n  key: 0,\n  class: \"flex-row flex-center\",\n  style: {\n    \"padding\": \"20px 0px\"\n  }\n};\nconst _hoisted_10$3 = [\"onClick\", \"disabled\"];\nconst _hoisted_11$3 = {\n  key: 0\n};\nconst _hoisted_12$3 = {\n  key: 1\n};\nconst _hoisted_13$3 = {\n  key: 2\n};\nconst _sfc_main$o = defineComponent({\n  __name: \"ActivateMagicLink\",\n  props: {\n    magicLink: {},\n    webauthnAllowed: {\n      type: Boolean\n    }\n  },\n  setup(__props) {\n    const props = __props;\n    const {\n      t\n    } = useLocale();\n    const {\n      appId\n    } = useAppId();\n    const passage = new Y(appId.value);\n    const uiState = useUIState();\n    const {\n      showFailure,\n      showSuccess,\n      loading,\n      pageLoading,\n      title\n    } = uiState;\n    const magicLinkUtils = useMagicLinkUtils(props.magicLink);\n    const {\n      isMagicLinkValid,\n      invalidMagicLink,\n      magicLinkAction\n    } = magicLinkUtils;\n    const activation = useMagicLinkActivation({\n      uiState,\n      magicLinkUtils,\n      passage,\n      magicLink: props.magicLink\n    });\n    function onButtonClick() {\n      if (invalidMagicLink.value) {\n        window.location.href = window.location.href.split(\"?\")[0];\n      } else {\n        activation.activateWithoutBiometrics(props.webauthnAllowed, magicLinkAction.value);\n      }\n    }\n    onMounted(() => __async(this, null, function* () {\n      if (isMagicLinkValid()) {\n        yield activation.activateWithoutBiometrics(props.webauthnAllowed, magicLinkAction.value);\n        useCallbacks().onEvent.value(OnEventType.onMagicLinkActivateSuccess);\n      } else {\n        uiState.uiError();\n      }\n      pageLoading.value = false;\n    }));\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(Transition, {\n        name: \"fade\",\n        mode: \"out-in\",\n        appear: \"\"\n      }, {\n        default: withCtx(() => [withDirectives(createBaseVNode(\"div\", _hoisted_1$l, [createBaseVNode(\"div\", {\n          class: normalizeClass([\"title has-text-centered\", [unref(showSuccess) ? \"main-title\" : \"secondary-title\"]])\n        }, toDisplayString(unref(showFailure) ? unref(invalidMagicLink) ? unref(t)(\"invalid-link\") : unref(t)(\"device-login-failed-title\") : unref(title)), 3), createBaseVNode(\"figure\", _hoisted_2$d, [unref(showSuccess) ? (openBlock(), createBlock(unref(InlineSvg), {\n          key: 0,\n          src: unref(Icons).success,\n          alt: \"Magic link success\"\n        }, null, 8, [\"src\"])) : unref(showFailure) ? (openBlock(), createBlock(unref(InlineSvg), {\n          key: 1,\n          src: unref(Icons).failure,\n          alt: \"Magic link failure\"\n        }, null, 8, [\"src\"])) : createCommentVNode(\"\", true)]), createBaseVNode(\"div\", _hoisted_3$b, [unref(showSuccess) && unref(magicLinkAction) === unref(MagicLinkActionEnum).LOGIN ? (openBlock(), createElementBlock(\"div\", _hoisted_4$b, toDisplayString(unref(t)(\"successfully-logged-in-redirect\")), 1)) : unref(showSuccess) && unref(magicLinkAction) === unref(MagicLinkActionEnum).VERIFY ? (openBlock(), createElementBlock(\"div\", _hoisted_5$a, toDisplayString(unref(t)(\"successfully-changed-email\")), 1)) : unref(showFailure) && unref(invalidMagicLink) && unref(magicLinkAction) === unref(MagicLinkActionEnum).VERIFY ? (openBlock(), createElementBlock(\"div\", _hoisted_6$8, toDisplayString(unref(t)(\"link-invalid\")), 1)) : unref(showFailure) && unref(invalidMagicLink) ? (openBlock(), createElementBlock(\"div\", _hoisted_7$8, toDisplayString(unref(t)(\"login-link-invalid\")), 1)) : unref(showFailure) && unref(magicLinkAction) === unref(MagicLinkActionEnum).VERIFY ? (openBlock(), createElementBlock(\"div\", _hoisted_8$6, toDisplayString(unref(t)(\"verification-failed-please-try-again\")), 1)) : createCommentVNode(\"\", true)]), unref(showFailure) || unref(showSuccess) ? (openBlock(), createElementBlock(\"div\", _hoisted_9$5, [createBaseVNode(\"button\", {\n          onClick: withModifiers(onButtonClick, [\"prevent\"]),\n          type: \"button\",\n          class: normalizeClass([\"button is-primary\", {\n            \"is-loading\": unref(loading)\n          }]),\n          part: \"button\",\n          disabled: unref(loading),\n          \"data-test\": \"activate-magic-link-button\"\n        }, [unref(showFailure) && unref(invalidMagicLink) ? (openBlock(), createElementBlock(\"span\", _hoisted_11$3, toDisplayString(unref(t)(\"request-new-link\")), 1)) : unref(showFailure) ? (openBlock(), createElementBlock(\"span\", _hoisted_12$3, toDisplayString(unref(t)(\"try-again\")), 1)) : unref(showSuccess) ? (openBlock(), createElementBlock(\"span\", _hoisted_13$3, toDisplayString(unref(t)(\"redirect-now\")), 1)) : createCommentVNode(\"\", true)], 10, _hoisted_10$3)])) : createCommentVNode(\"\", true)], 512), [[vShow, !unref(pageLoading)]])]),\n        _: 1\n      });\n    };\n  }\n});\nconst _hoisted_1$k = {\n  class: \"view-verify-token\"\n};\nconst _sfc_main$n = defineComponent({\n  __name: \"ActivateMagicLinkView\",\n  props: {\n    magicLink: {},\n    webauthnAllowed: {\n      type: Boolean\n    }\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$k, [createVNode(_sfc_main$o, {\n        magicLink: _ctx.magicLink,\n        webauthnAllowed: _ctx.webauthnAllowed\n      }, null, 8, [\"magicLink\", \"webauthnAllowed\"])]);\n    };\n  }\n});\nconst _hoisted_1$j = {\n  class: \"view-email-input\"\n};\nconst _sfc_main$m = defineComponent({\n  __name: \"LoginView\",\n  props: {\n    register: {\n      type: Boolean\n    },\n    appInfo: {},\n    conditionalUI: {\n      type: Boolean\n    },\n    changeEmail: {\n      type: Boolean\n    }\n  },\n  setup(__props) {\n    const identifier = ref(\"\");\n    const {\n      defaultCountryCode\n    } = useDefaultCountryCode();\n    const countryCode = defaultCountryCode;\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$j, [createVNode(_sfc_main$t, {\n        identifier: identifier.value,\n        \"onUpdate:identifier\": _cache[0] || (_cache[0] = $event => identifier.value = $event),\n        countryCode: unref(countryCode),\n        \"onUpdate:countryCode\": _cache[1] || (_cache[1] = $event => isRef(countryCode) ? countryCode.value = $event : null),\n        canToggleLoginRegister: false,\n        appInfo: _ctx.appInfo,\n        conditionalUI: _ctx.conditionalUI,\n        changeEmail: _ctx.changeEmail\n      }, {\n        loginInput: withCtx(() => [renderSlot(_ctx.$slots, \"loginInput\")]),\n        _: 3\n      }, 8, [\"identifier\", \"countryCode\", \"appInfo\", \"conditionalUI\", \"changeEmail\"]), createVNode(_sfc_main$q, {\n        \"app-info\": _ctx.appInfo\n      }, null, 8, [\"app-info\"])]);\n    };\n  }\n});\nconst _hoisted_1$i = {\n  class: \"view-email-input\"\n};\nconst _sfc_main$l = defineComponent({\n  __name: \"RegisterView\",\n  props: {\n    register: {\n      type: Boolean\n    },\n    appInfo: {}\n  },\n  setup(__props) {\n    const identifier = ref(\"\");\n    const {\n      defaultCountryCode\n    } = useDefaultCountryCode();\n    const countryCode = defaultCountryCode;\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$i, [createVNode(_sfc_main$s, {\n        identifier: identifier.value,\n        \"onUpdate:identifier\": _cache[0] || (_cache[0] = $event => identifier.value = $event),\n        countryCode: unref(countryCode),\n        \"onUpdate:countryCode\": _cache[1] || (_cache[1] = $event => isRef(countryCode) ? countryCode.value = $event : null),\n        canToggleLoginRegister: false,\n        appInfo: _ctx.appInfo\n      }, null, 8, [\"identifier\", \"countryCode\", \"appInfo\"]), createVNode(_sfc_main$q, {\n        \"app-info\": _ctx.appInfo\n      }, null, 8, [\"app-info\"])]);\n    };\n  }\n});\nconst _sfc_main$k = defineComponent({\n  name: \"Spinner\"\n});\nconst _hoisted_1$h = {\n  class: \"spinner-box\"\n};\nconst _hoisted_2$c = {\n  class: \"spinner-content\"\n};\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$h, [createBaseVNode(\"div\", _hoisted_2$c, [renderSlot(_ctx.$slots, \"default\")])]);\n}\nvar Spinner = /* @__PURE__ */_export_sfc(_sfc_main$k, [[\"render\", _sfc_render]]);\nconst _hoisted_1$g = {\n  class: \"auth-flex-container\"\n};\nconst _hoisted_2$b = {\n  class: \"title has-text-centered\"\n};\nconst _hoisted_3$a = {\n  key: 0,\n  class: \"content has-text-centered\",\n  style: {\n    \"margin-bottom\": \"15px !important\"\n  }\n};\nconst _hoisted_4$a = [\"innerHTML\"];\nconst _hoisted_5$9 = {\n  class: \"flex-row flex-center\"\n};\nconst _hoisted_6$7 = [\"onClick\", \"disabled\"];\nconst _hoisted_7$7 = /* @__PURE__ */createBaseVNode(\"div\", {\n  class: \"spacer\"\n}, null, -1);\nconst _hoisted_8$5 = {\n  class: \"link has-text-centered\"\n};\nconst _hoisted_9$4 = [\"onClick\"];\nconst _sfc_main$j = defineComponent({\n  __name: \"MagicLink\",\n  props: {\n    identifier: {},\n    userIsRegistering: {\n      type: Boolean\n    },\n    identifierVerifying: {\n      type: Boolean\n    },\n    setupNewDevice: {\n      type: Boolean\n    },\n    identifierType: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const {\n      t,\n      locale\n    } = useLocale();\n    const {\n      appId\n    } = useAppId();\n    const passage = new Y(appId.value);\n    const {\n      emitEvent: emitEvent2\n    } = useAuthEvent();\n    const isEmail = computed(() => {\n      return props.identifierType === IdentifierType.email;\n    });\n    const title = computed(() => {\n      if (props.identifierVerifying) {\n        if (isEmail.value) {\n          if (props.userIsRegistering) {\n            return t(\"verify-email-to-register\");\n          } else {\n            return t(\"verify-email-to-login\");\n          }\n        } else {\n          if (props.userIsRegistering) {\n            return t(\"verify-phone-to-register\");\n          } else {\n            return t(\"verify-phone-to-login\");\n          }\n        }\n      } else {\n        if (isEmail.value) {\n          if (props.userIsRegistering) {\n            return t(\"check-email-to-register\");\n          } else {\n            return t(\"check-email-to-login\");\n          }\n        } else {\n          if (props.userIsRegistering) {\n            return t(\"check-phone-to-register\");\n          } else {\n            return t(\"check-phone-to-login\");\n          }\n        }\n      }\n    });\n    const message = computed(() => {\n      let messageValue = \"\";\n      const messageType = props.identifierType === IdentifierType.email ? t(\"messagetype-email\") : t(\"messagetype-sms\");\n      const messageMedium = props.identifierType === IdentifierType.email ? t(\"email\") : t(\"phone-number\");\n      const registrationType = props.userIsRegistering ? t(\"registration\") : t(\"login\");\n      const loginMessage = props.identifierVerifying ? t(\"please-verify-identifier\", [messageMedium, registrationType]) : t(\"you-will-be-automatically-signed-in\");\n      messageValue = t(\"weve-sent-messagetype\", [messageType, props.identifier, loginMessage]);\n      if (props.setupNewDevice && !props.userIsRegistering) {\n        messageValue = t(\"we-dont-recognize-this-device\") + \" \" + messageValue;\n      }\n      return messageValue;\n    });\n    onMounted(() => {\n      if (props.userIsRegistering) {\n        magicLinkSendRegister();\n      } else {\n        magicLinkSendLogin();\n      }\n    });\n    function changeEmail() {\n      localStorage.removeItem(\"email\");\n      localStorage.removeItem(\"magic_link_id\");\n      localStorage.removeItem(\"wait_count\");\n      waitForActivatedMagicLink(721);\n      emitEvent2({\n        type: AuthEventType.ChangeIdentifier,\n        payload: void 0\n      });\n    }\n    function resendMagicLink() {\n      return __async(this, null, function* () {\n        yield magicLinkSendLogin();\n      });\n    }\n    const showWaiting = ref(false);\n    const loading = ref(true);\n    function magicLinkSendRegister() {\n      return __async(this, null, function* () {\n        showWaiting.value = false;\n        loading.value = true;\n        yield new Promise(resolve => {\n          setTimeout(resolve, 2e3);\n        });\n        try {\n          const res = yield passage.newRegisterMagicLink(props.identifier, locale.value.split(\"-\")[0]);\n          if (res.id != \"\") {\n            localStorage.setItem(\"magic_link_id\", res.id);\n            waitForActivatedMagicLink(0);\n          }\n        } catch (err) {\n          console.log(\"magicLinkSend error\", err);\n        } finally {\n          loading.value = false;\n        }\n      });\n    }\n    function magicLinkSendLogin() {\n      return __async(this, null, function* () {\n        showWaiting.value = false;\n        loading.value = true;\n        try {\n          const res = yield passage.newLoginMagicLink(props.identifier, locale.value.split(\"-\")[0]);\n          if (res.id != \"\") {\n            localStorage.setItem(\"magic_link_id\", res.id);\n            waitForActivatedMagicLink(0);\n          }\n        } catch (err) {\n          console.log(\"magicLinkSend error\", err);\n        } finally {\n          yield new Promise(resolve => {\n            setTimeout(resolve, 3e3);\n          });\n          loading.value = false;\n        }\n      });\n    }\n    let authResult = void 0;\n    function lookupMagicLink() {\n      return __async(this, null, function* () {\n        const id = localStorage.getItem(\"magic_link_id\");\n        yield lookupMagicLinkActivated(id).then(() => __async(this, null, function* () {\n          if (authResult && authResult.redirect_url != \"\") {\n            localStorage.removeItem(\"magic_link_id\");\n            localStorage.removeItem(\"wait_count\");\n            useCallbacks().onEvent.value(OnEventType.onMagicLinkActivated);\n            emitEvent2({\n              type: AuthEventType.FallbackAuthSuccess,\n              payload: {\n                identifier: props.identifier,\n                authResult\n              }\n            });\n          }\n        }));\n      });\n    }\n    function lookupMagicLinkActivated(id) {\n      return __async(this, null, function* () {\n        yield passage.getMagicLinkStatus(id).then(res => {\n          waitForActivatedMagicLink(721);\n          authResult = res;\n        }).catch(() => {});\n        return;\n      });\n    }\n    let timer;\n    function waitForActivatedMagicLink(count) {\n      let i = count;\n      if (i < 720) {\n        showWaiting.value = true;\n        timer = setTimeout(() => __async(this, null, function* () {\n          delay(i);\n          i++;\n          waitForActivatedMagicLink(i);\n        }), 5e3);\n      } else {\n        clearTimeout(timer);\n        showWaiting.value = false;\n        return;\n      }\n    }\n    function delay(i) {\n      lookupMagicLink();\n      localStorage.setItem(\"wait_count\", i.toString());\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$g, [createBaseVNode(\"div\", _hoisted_2$b, [createBaseVNode(\"span\", null, toDisplayString(title.value), 1)]), createVNode(Spinner, null, {\n        default: withCtx(() => [isEmail.value ? (openBlock(), createBlock(unref(InlineSvg), {\n          key: 0,\n          src: unref(Icons).email,\n          alt: \"Email envelope\"\n        }, null, 8, [\"src\"])) : (openBlock(), createBlock(unref(InlineSvg), {\n          key: 1,\n          src: unref(Icons).phone,\n          alt: \"Message bubbles\"\n        }, null, 8, [\"src\"]))]),\n        _: 1\n      }), message.value ? (openBlock(), createElementBlock(\"div\", _hoisted_3$a, [createBaseVNode(\"span\", {\n        innerHTML: message.value\n      }, null, 8, _hoisted_4$a)])) : createCommentVNode(\"\", true), createBaseVNode(\"div\", _hoisted_5$9, [createBaseVNode(\"button\", {\n        onClick: withModifiers(resendMagicLink, [\"prevent\"]),\n        type: \"button\",\n        class: \"button is-primary\",\n        part: \"button\",\n        disabled: loading.value\n      }, toDisplayString(unref(t)(\"resend-isemail-email-message\", [isEmail.value ? unref(t)(\"email\") : unref(t)(\"message\")])), 9, _hoisted_6$7)]), _hoisted_7$7, createBaseVNode(\"div\", _hoisted_8$5, [createBaseVNode(\"a\", {\n        onClick: withModifiers(changeEmail, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"change-email-button\"\n      }, toDisplayString(unref(t)(\"change-isemail-email-phone\", [isEmail.value ? unref(t)(\"email\") : unref(t)(\"phone\")])), 9, _hoisted_9$4)])]);\n    };\n  }\n});\nconst _hoisted_1$f = {\n  class: \"view-access-token\"\n};\nconst _sfc_main$i = defineComponent({\n  __name: \"MagicLinkView\",\n  props: {\n    identifier: {},\n    userIsRegistering: {\n      type: Boolean\n    },\n    identifierVerifying: {\n      type: Boolean\n    },\n    setupNewDevice: {\n      type: Boolean\n    },\n    identifierType: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$f, [createVNode(_sfc_main$j, {\n        identifier: _ctx.identifier,\n        userIsRegistering: _ctx.userIsRegistering,\n        identifierVerifying: _ctx.identifierVerifying,\n        setupNewDevice: _ctx.setupNewDevice,\n        identifierType: _ctx.identifierType\n      }, null, 8, [\"identifier\", \"userIsRegistering\", \"identifierVerifying\", \"setupNewDevice\", \"identifierType\"])]);\n    };\n  }\n});\nconst _hoisted_1$e = {\n  class: \"passage-learnmore-modal\"\n};\nconst _hoisted_2$a = {\n  class: \"passage-learnmore-top\"\n};\nconst _hoisted_3$9 = {\n  class: \"passage-learnmore-close-button\"\n};\nconst _hoisted_4$9 = {\n  class: \"passage-learnmore-content\"\n};\nconst _hoisted_5$8 = {\n  style: {\n    \"margin-bottom\": \"32px\"\n  }\n};\nconst _sfc_main$h = defineComponent({\n  __name: \"LearnMoreLayout\",\n  setup(__props) {\n    const {\n      t\n    } = useLocale();\n    const showModal = ref(false);\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(Fragment, null, [showModal.value ? (openBlock(), createElementBlock(\"div\", {\n        key: 0,\n        class: \"passage-learnmore\",\n        onClick: _cache[1] || (_cache[1] = $event => showModal.value = false)\n      }, [createBaseVNode(\"div\", _hoisted_1$e, [createBaseVNode(\"div\", _hoisted_2$a, [createBaseVNode(\"div\", {\n        style: {\n          \"cursor\": \"pointer\"\n        },\n        onClick: _cache[0] || (_cache[0] = $event => showModal.value = false)\n      }, [createBaseVNode(\"span\", _hoisted_3$9, toDisplayString(unref(t)(\"close\")), 1), createVNode(unref(InlineSvg), {\n        src: unref(Icons).close\n      }, null, 8, [\"src\"])])]), createBaseVNode(\"div\", _hoisted_4$9, [renderSlot(_ctx.$slots, \"body\")])])])) : createCommentVNode(\"\", true), createBaseVNode(\"div\", null, [createBaseVNode(\"div\", _hoisted_5$8, [createBaseVNode(\"span\", null, [renderSlot(_ctx.$slots, \"cta\"), createTextVNode(\" \\xA0 \")]), createBaseVNode(\"a\", {\n        style: {\n          \"text-decoration\": \"underline\"\n        },\n        onClick: _cache[2] || (_cache[2] = $event => showModal.value = true),\n        role: \"button\"\n      }, toDisplayString(unref(t)(\"learn-more\")), 1), createTextVNode(\" \\u2192 \")])])], 64);\n    };\n  }\n});\nconst _hoisted_1$d = {\n  style: {\n    \"margin-bottom\": \"12px\"\n  }\n};\nconst _hoisted_2$9 = {\n  class: \"passage-learnmore-header\"\n};\nconst _hoisted_3$8 = {\n  class: \"passage-learnmore-body\"\n};\nconst _hoisted_4$8 = {\n  class: \"passage-learnmore-header\"\n};\nconst _hoisted_5$7 = {\n  class: \"passage-learnmore-body\"\n};\nconst _hoisted_6$6 = {\n  class: \"passage-learnmore-header\"\n};\nconst _hoisted_7$6 = {\n  class: \"passage-learnmore-body\"\n};\nconst _sfc_main$g = defineComponent({\n  __name: \"LearnMorePasskey\",\n  props: {\n    cta: {}\n  },\n  setup(__props) {\n    const {\n      t\n    } = useLocale();\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$h, null, {\n        cta: withCtx(() => [createBaseVNode(\"div\", _hoisted_1$d, toDisplayString(unref(t)(\"passkeys-are-a-simple\")), 1), createTextVNode(\" \" + toDisplayString(_ctx.cta), 1)]),\n        body: withCtx(() => [createBaseVNode(\"div\", _hoisted_2$9, [createVNode(unref(InlineSvg), {\n          src: unref(Icons).privateIcon,\n          style: {\n            \"margin-right\": \"8px\"\n          }\n        }, null, 8, [\"src\"]), createTextVNode(\" \" + toDisplayString(unref(t)(\"private\")), 1)]), createBaseVNode(\"div\", _hoisted_3$8, toDisplayString(unref(t)(\"unlock-your-passkey\")), 1), createBaseVNode(\"div\", _hoisted_4$8, [createVNode(unref(InlineSvg), {\n          src: unref(Icons).secure,\n          style: {\n            \"margin-right\": \"8px\"\n          }\n        }, null, 8, [\"src\"]), createTextVNode(\" \" + toDisplayString(unref(t)(\"secure\")), 1)]), createBaseVNode(\"div\", _hoisted_5$7, toDisplayString(unref(t)(\"passkey-is-unique\")), 1), createBaseVNode(\"div\", _hoisted_6$6, [createVNode(unref(InlineSvg), {\n          src: unref(Icons).simple,\n          style: {\n            \"margin-right\": \"8px\"\n          }\n        }, null, 8, [\"src\"]), createTextVNode(\" \" + toDisplayString(unref(t)(\"simple\")), 1)]), createBaseVNode(\"div\", _hoisted_7$6, toDisplayString(unref(t)(\"easy-to-use\")), 1)]),\n        _: 1\n      });\n    };\n  }\n});\nconst _hoisted_1$c = {\n  class: \"auth-flex-container\",\n  \"data-tag\": \"register-device-message\"\n};\nconst _hoisted_2$8 = {\n  class: \"title secondary-title has-text-centered\"\n};\nconst _hoisted_3$7 = {\n  class: \"image has-text-centered\"\n};\nconst _hoisted_4$7 = {\n  key: 0\n};\nconst _hoisted_5$6 = {\n  key: 2,\n  class: \"flex-row flex-center\"\n};\nconst _hoisted_6$5 = [\"onClick\", \"disabled\"];\nconst _hoisted_7$5 = [\"onClick\", \"disabled\"];\nconst _hoisted_8$4 = {\n  key: 3,\n  class: \"flex-row flex-center\"\n};\nconst _hoisted_9$3 = [\"onClick\", \"disabled\"];\nconst _hoisted_10$2 = /* @__PURE__ */createBaseVNode(\"div\", {\n  class: \"spacer\"\n}, null, -1);\nconst _hoisted_11$2 = {\n  key: 4,\n  class: \"content has-text-centered\",\n  style: {\n    \"margin-top\": \"20px !important\"\n  }\n};\nconst _hoisted_12$2 = {\n  class: \"link\"\n};\nconst _hoisted_13$2 = [\"onClick\"];\nconst _hoisted_14$2 = {\n  class: \"link\"\n};\nconst _hoisted_15$2 = [\"onClick\"];\nconst _hoisted_16$2 = {\n  key: 0,\n  class: \"link\"\n};\nconst _hoisted_17 = [\"onClick\"];\nconst _sfc_main$f = defineComponent({\n  __name: \"RegisterDevice\",\n  props: {\n    identifier: {},\n    identifierType: {},\n    appInfo: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const showFailure = ref(false);\n    const loading = ref(false);\n    const {\n      t,\n      te: te2\n    } = useLocale();\n    const {\n      appId\n    } = useAppId();\n    const passage = new Y(appId.value);\n    const {\n      emitEvent: emitEvent2\n    } = useAuthEvent();\n    const {\n      autofocusButton\n    } = useAutofocusButton();\n    const isEmail = computed(() => {\n      return props.identifierType === IdentifierType.email;\n    });\n    const fallbackAuth = computed(() => {\n      var _a;\n      return (_a = props.appInfo.auth_fallback_method) != null ? _a : ue.MagicLink;\n    });\n    const supportsFallback = computed(() => {\n      return props.appInfo.auth_fallback_method !== ue.None;\n    });\n    const fallbackRegisterWithCodeEmailOrTextBtnCopy = computed(() => {\n      if (fallbackAuth.value === ue.LoginCode) {\n        return te2(\"register-with-code\") ? t(\"register-with-code\") : \"Register with a code\";\n      } else {\n        return t(\"register-with-link\", [isEmail.value ? t(\"email\") : t(\"sms-text\")]);\n      }\n    });\n    const fallbackSendCodeEmailOrTextBtnCopy = computed(() => {\n      if (fallbackAuth.value === ue.LoginCode) {\n        return te2(\"send-code\") ? t(\"send-code\") : \"Send code\";\n      } else {\n        return t(\"send-email-or-text-link\", [isEmail.value ? t(\"email\") : t(\"sms-text\")]);\n      }\n    });\n    const failureCreateText = computed(() => {\n      switch (props.appInfo.auth_fallback_method) {\n        case ue.LoginCode:\n          return te2(\"passkey-create-fail-try-code\") ? t(\"passkey-create-fail-try-code\") : \"Unable to create a passkey. Try again or register with a one-time code.\";\n        case ue.MagicLink:\n          return t(\"passkey-create-fail-try-link\");\n        case ue.None:\n          return t(\"passkey-create-fail-no-fallback\");\n      }\n    });\n    function signUpWebAuthn(identifier) {\n      return __async(this, null, function* () {\n        loading.value = true;\n        showFailure.value = false;\n        try {\n          const authResult = yield passage.register(identifier);\n          loading.value = false;\n          emitEvent2({\n            type: AuthEventType.AuthSuccess,\n            payload: {\n              authResult,\n              identifier: props.identifier\n            }\n          });\n        } catch (err) {\n          showFailure.value = true;\n          loading.value = false;\n        }\n      });\n    }\n    function registerWithFallback() {\n      emitEvent2({\n        type: AuthEventType.FallbackAuth,\n        payload: {\n          identifier: props.identifier,\n          identifierType: props.identifierType,\n          userIsRegistering: true,\n          userInitiated: true\n        }\n      });\n    }\n    function changeEmail() {\n      localStorage.removeItem(\"email\");\n      useAuthEvent().emitEvent({\n        type: AuthEventType.ChangeIdentifier,\n        payload: void 0\n      });\n    }\n    function onButtonClick() {\n      signUpWebAuthn(props.identifier);\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$c, [createBaseVNode(\"div\", _hoisted_2$8, toDisplayString(unref(t)(\"register-with-a-passkey\")), 1), createBaseVNode(\"figure\", _hoisted_3$7, [createVNode(unref(InlineSvg), {\n        src: unref(Icons).passkey,\n        alt: \"Register with a passkey\",\n        style: {\n          \"margin\": \"5px\"\n        }\n      }, null, 8, [\"src\"])]), showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_4$7, [createBaseVNode(\"p\", null, toDisplayString(failureCreateText.value), 1)])) : (openBlock(), createBlock(_sfc_main$g, {\n        key: 1,\n        cta: unref(t)(\"register-your-account\")\n      }, null, 8, [\"cta\"])), showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_5$6, [createBaseVNode(\"button\", {\n        onClick: withModifiers(onButtonClick, [\"prevent\"]),\n        type: \"button\",\n        part: \"button\",\n        class: \"button is-primary\",\n        disabled: loading.value,\n        style: {\n          \"margin-right\": \"5px\"\n        }\n      }, toDisplayString(unref(t)(\"try-again\")), 9, _hoisted_6$5), _ctx.appInfo.auth_fallback_method !== unref(ue).None ? (openBlock(), createElementBlock(\"button\", {\n        key: 0,\n        onClick: withModifiers(registerWithFallback, [\"prevent\"]),\n        type: \"button\",\n        part: \"button button-secondary\",\n        class: \"button is-secondary\",\n        disabled: loading.value,\n        style: {\n          \"margin-left\": \"5px\"\n        },\n        \"data-test\": \"login-with-email-button\",\n        ref_key: \"autofocusButton\",\n        ref: autofocusButton\n      }, toDisplayString(fallbackSendCodeEmailOrTextBtnCopy.value), 9, _hoisted_7$5)) : createCommentVNode(\"\", true)])) : (openBlock(), createElementBlock(\"div\", _hoisted_8$4, [createBaseVNode(\"button\", {\n        onClick: withModifiers(onButtonClick, [\"prevent\"]),\n        type: \"button\",\n        class: normalizeClass([\"button\", [{\n          \"is-loading\": loading.value\n        }]]),\n        part: \"button\",\n        disabled: loading.value,\n        \"data-test\": \"register-main-button\",\n        tabindex: \"0\",\n        ref_key: \"autofocusButton\",\n        ref: autofocusButton\n      }, [createBaseVNode(\"span\", null, toDisplayString(unref(t)(\"register-with-passkey\")), 1)], 10, _hoisted_9$3)])), _hoisted_10$2, showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_11$2, [createBaseVNode(\"div\", _hoisted_12$2, [createBaseVNode(\"a\", {\n        onClick: withModifiers(changeEmail, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"change-email-button\"\n      }, toDisplayString(unref(t)(\"change-isemail-email-phone\", [isEmail.value ? unref(t)(\"email\") : unref(t)(\"phone\")])), 9, _hoisted_13$2)])])) : createCommentVNode(\"\", true), !showFailure.value ? (openBlock(), createElementBlock(\"div\", {\n        key: 5,\n        class: normalizeClass([\"flex-row flex-wrap\", supportsFallback.value ? \"flex-between\" : \"flex-center\"])\n      }, [createBaseVNode(\"div\", _hoisted_14$2, [createBaseVNode(\"a\", {\n        onClick: withModifiers(changeEmail, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"change-email-button\"\n      }, toDisplayString(unref(t)(\"back\")), 9, _hoisted_15$2)]), supportsFallback.value ? (openBlock(), createElementBlock(\"div\", _hoisted_16$2, [createBaseVNode(\"a\", {\n        onClick: withModifiers(registerWithFallback, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"register-email-button\"\n      }, toDisplayString(fallbackRegisterWithCodeEmailOrTextBtnCopy.value), 9, _hoisted_17)])) : createCommentVNode(\"\", true)], 2)) : createCommentVNode(\"\", true)]);\n    };\n  }\n});\nconst _sfc_main$e = defineComponent({\n  __name: \"RegisterDeviceView\",\n  props: {\n    identifier: {},\n    identifierType: {},\n    appInfo: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$f, {\n        identifier: _ctx.identifier,\n        identifierType: _ctx.identifierType,\n        appInfo: _ctx.appInfo\n      }, null, 8, [\"identifier\", \"identifierType\", \"appInfo\"]);\n    };\n  }\n});\nconst _hoisted_1$b = {\n  class: \"auth-flex-container\"\n};\nconst _hoisted_2$7 = {\n  class: \"title has-text-centered\"\n};\nconst _hoisted_3$6 = {\n  class: \"image has-text-centered\",\n  style: {\n    \"margin\": \"5px auto\"\n  }\n};\nconst _hoisted_4$6 = {\n  key: 1,\n  class: \"wrap-text\",\n  style: {\n    \"margin-bottom\": \"5px !important\"\n  }\n};\nconst _hoisted_5$5 = {\n  \"data-test\": \"failure-message\"\n};\nconst _hoisted_6$4 = {\n  key: 2,\n  class: \"flex-row flex-center\"\n};\nconst _hoisted_7$4 = [\"onClick\", \"disabled\"];\nconst _hoisted_8$3 = [\"onClick\", \"disabled\"];\nconst _hoisted_9$2 = /* @__PURE__ */createBaseVNode(\"div\", {\n  class: \"spacer\"\n}, null, -1);\nconst _hoisted_10$1 = {\n  key: 3,\n  class: \"content has-text-centered\",\n  style: {\n    \"margin-top\": \"20px !important\"\n  }\n};\nconst _hoisted_11$1 = {\n  class: \"link\"\n};\nconst _hoisted_12$1 = [\"onClick\"];\nconst _hoisted_13$1 = {\n  class: \"link\"\n};\nconst _hoisted_14$1 = [\"onClick\"];\nconst _hoisted_15$1 = {\n  key: 0,\n  class: \"link\"\n};\nconst _hoisted_16$1 = [\"onClick\"];\nconst _sfc_main$d = defineComponent({\n  __name: \"WebauthnSignIn\",\n  props: {\n    identifier: {},\n    identifierType: {},\n    appInfo: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const showFailure = ref(false);\n    const loading = ref(false);\n    const {\n      t,\n      te: te2\n    } = useLocale();\n    const {\n      appId\n    } = useAppId();\n    const passage = new Y(appId.value);\n    const {\n      emitEvent: emitEvent2\n    } = useAuthEvent();\n    const isEmail = computed(() => {\n      return props.identifierType === IdentifierType.email;\n    });\n    const {\n      autofocusButton\n    } = useAutofocusButton();\n    const fallbackAuth = computed(() => {\n      var _a;\n      return (_a = props.appInfo.auth_fallback_method) != null ? _a : ue.MagicLink;\n    });\n    const supportsFallback = computed(() => {\n      return props.appInfo.auth_fallback_method !== ue.None;\n    });\n    const fallbackSendCodeEmailOrTextBtnCopy = computed(() => {\n      if (fallbackAuth.value === ue.LoginCode) {\n        return te2(\"send-code\") ? t(\"send-code\") : \"Send code\";\n      } else {\n        return t(\"send-email-or-text-link\", [isEmail.value ? t(\"email\") : t(\"sms-text\")]);\n      }\n    });\n    const loginWithCodeEmailOrTextBtnCopy = computed(() => {\n      if (fallbackAuth.value === ue.LoginCode) {\n        return te2(\"login-with-code\") ? t(\"login-with-code\") : \"Login with a code\";\n      } else {\n        return t(\"login-with-link\", [isEmail.value ? t(\"email\") : t(\"sms-text\")]);\n      }\n    });\n    const failureLoginText = computed(() => {\n      switch (props.appInfo.auth_fallback_method) {\n        case ue.LoginCode:\n          return te2(\"passkey-login-fail-try-code\") ? t(\"passkey-login-fail-try-code\") : \"Unable to log in with a passkey. Try again or log in with a one-time code.\";\n        case ue.MagicLink:\n          return t(\"passkey-login-fail-try-link\");\n        case ue.None:\n          return t(\"passkey-login-fail-no-fallback\");\n      }\n    });\n    function signInWebAuthn() {\n      return __async(this, null, function* () {\n        showFailure.value = false;\n        if (!props.identifier) {\n          return;\n        }\n        loading.value = true;\n        try {\n          const authResult = yield passage.login(props.identifier);\n          emitEvent2({\n            type: AuthEventType.AuthSuccess,\n            payload: {\n              authResult,\n              identifier: props.identifier\n            }\n          });\n          loading.value = false;\n        } catch (err) {\n          const error = err;\n          showFailure.value = true;\n          loading.value = false;\n          if (error.statusCode === T.PSGParsePublicKeyForLoginFailed) {\n            showFailure.value = true;\n          } else {\n            emitEvent2({\n              type: AuthEventType.FallbackAuth,\n              payload: {\n                identifier: props.identifier,\n                identifierType: props.identifierType,\n                userInitiated: false\n              }\n            });\n          }\n        }\n      });\n    }\n    function loginWithFallback() {\n      emitEvent2({\n        type: AuthEventType.FallbackAuth,\n        payload: {\n          identifier: props.identifier,\n          identifierType: props.identifierType,\n          userInitiated: true\n        }\n      });\n    }\n    function changeEmail() {\n      localStorage.removeItem(\"email\");\n      emitEvent2({\n        type: AuthEventType.ChangeIdentifier,\n        payload: void 0\n      });\n    }\n    onMounted(() => {\n      signInWebAuthn();\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$b, [createBaseVNode(\"div\", _hoisted_2$7, toDisplayString(unref(t)(\"log-in-with-a-passkey\")), 1), createBaseVNode(\"figure\", _hoisted_3$6, [createVNode(unref(InlineSvg), {\n        src: unref(Icons).passkey,\n        alt: \"Log in with a passkey\",\n        style: {\n          \"margin\": \"5px\"\n        }\n      }, null, 8, [\"src\"])]), !showFailure.value ? (openBlock(), createBlock(_sfc_main$g, {\n        key: 0,\n        cta: unref(t)(\"log-into-your-account\")\n      }, null, 8, [\"cta\"])) : showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_4$6, [createBaseVNode(\"div\", _hoisted_5$5, [createBaseVNode(\"p\", null, toDisplayString(failureLoginText.value), 1)])])) : createCommentVNode(\"\", true), showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_6$4, [createBaseVNode(\"button\", {\n        onClick: withModifiers(signInWebAuthn, [\"prevent\"]),\n        type: \"button\",\n        part: \"button\",\n        class: \"button is-primary\",\n        disabled: loading.value,\n        style: {\n          \"margin-right\": \"5px\"\n        }\n      }, toDisplayString(unref(t)(\"try-again\")), 9, _hoisted_7$4), _ctx.appInfo.auth_fallback_method !== unref(ue).None ? (openBlock(), createElementBlock(\"button\", {\n        key: 0,\n        onClick: withModifiers(loginWithFallback, [\"prevent\"]),\n        type: \"button\",\n        part: \"button button-secondary\",\n        class: \"button is-secondary\",\n        disabled: loading.value,\n        style: {\n          \"margin-left\": \"5px\"\n        },\n        \"data-test\": \"login-with-email-button\",\n        ref_key: \"autofocusButton\",\n        ref: autofocusButton\n      }, toDisplayString(fallbackSendCodeEmailOrTextBtnCopy.value), 9, _hoisted_8$3)) : createCommentVNode(\"\", true)])) : createCommentVNode(\"\", true), _hoisted_9$2, showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_10$1, [createBaseVNode(\"div\", _hoisted_11$1, [createBaseVNode(\"a\", {\n        onClick: withModifiers(changeEmail, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"change-email-button\"\n      }, toDisplayString(unref(t)(\"change-isemail-email-phone\", [isEmail.value ? unref(t)(\"email\") : unref(t)(\"phone\")])), 9, _hoisted_12$1)])])) : createCommentVNode(\"\", true), !showFailure.value ? (openBlock(), createElementBlock(\"div\", {\n        key: 4,\n        class: normalizeClass([\"flex-row flex-wrap\", supportsFallback.value ? \"flex-between\" : \"flex-center\"])\n      }, [createBaseVNode(\"div\", _hoisted_13$1, [createBaseVNode(\"a\", {\n        onClick: withModifiers(changeEmail, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"change-email-button\"\n      }, toDisplayString(unref(t)(\"back\")), 9, _hoisted_14$1)]), supportsFallback.value ? (openBlock(), createElementBlock(\"div\", _hoisted_15$1, [createBaseVNode(\"a\", {\n        onClick: withModifiers(loginWithFallback, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"register-email-button\"\n      }, toDisplayString(loginWithCodeEmailOrTextBtnCopy.value), 9, _hoisted_16$1)])) : createCommentVNode(\"\", true)], 2)) : createCommentVNode(\"\", true)]);\n    };\n  }\n});\nconst _hoisted_1$a = {\n  class: \"view-webauthn-sign-in\"\n};\nconst _sfc_main$c = defineComponent({\n  __name: \"WebauthnSignInView\",\n  props: {\n    identifier: {},\n    identifierType: {},\n    appInfo: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$a, [createVNode(_sfc_main$d, {\n        identifier: _ctx.identifier,\n        identifierType: _ctx.identifierType,\n        appInfo: _ctx.appInfo\n      }, null, 8, [\"identifier\", \"identifierType\", \"appInfo\"])]);\n    };\n  }\n});\nconst _hoisted_1$9 = {\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  },\n  class: \"psg-otp-single-input-container\"\n};\nconst _hoisted_2$6 = [\"data-test\", \"type\", \"inputtype\", \"placeholder\", \"inputmode\", \"disabled\", \"maxlength\", \"autocomplete\"];\nconst _hoisted_3$5 = {\n  key: 0\n};\nconst _hoisted_4$5 = [\"innerHTML\"];\nconst _sfc_main$b = defineComponent({\n  __name: \"OneTimePasscodeSingleInput\",\n  props: {\n    conditionalClass: {},\n    focus: {\n      type: Boolean\n    },\n    inputClasses: {\n      default: () => []\n    },\n    inputmode: {\n      default: \"numeric\"\n    },\n    inputType: {\n      default: \"number\"\n    },\n    isDisabled: {\n      type: Boolean\n    },\n    isLastChild: {\n      type: Boolean\n    },\n    placeholder: {},\n    separator: {\n      default: \"\"\n    },\n    shouldAutoFocus: {\n      type: Boolean,\n      default: false\n    },\n    value: {\n      default: \"\"\n    },\n    isFirstChild: {\n      type: Boolean\n    },\n    inputIdx: {},\n    inputCount: {}\n  },\n  emits: [\"on-change\", \"on-keydown\", \"on-paste\", \"on-focus\", \"on-blur\"],\n  setup(__props, _ref6) {\n    let {\n      emit\n    } = _ref6;\n    const props = __props;\n    const model = ref(props.value || \"\");\n    const input = ref(null);\n    const inputTypeValue = computed(() => {\n      return props.inputType === \"letter-numeric\" ? \"text\" : props.inputType;\n    });\n    const handleOnChange = () => {\n      model.value = model.value.toString();\n      if (model.value.length > 1) {\n        model.value = model.value.slice(0, 1);\n      }\n      return emit(\"on-change\", model.value);\n    };\n    const isCodeLetter = charCode => charCode >= 65 && charCode <= 90;\n    const isCodeNumeric = charCode => charCode >= 48 && charCode <= 57 || charCode >= 96 && charCode <= 105;\n    const handleOnKeyDown = event => {\n      if (props.isDisabled) {\n        event.preventDefault();\n      }\n      const keyEvent = event || window.event;\n      const charCode = keyEvent.which ? keyEvent.which : keyEvent.keyCode;\n      if (isCodeNumeric(charCode) || props.inputType === \"letter-numeric\" && isCodeLetter(charCode) || [8, 9, 13, 37, 39, 46, 86].includes(charCode)) {\n        emit(\"on-keydown\", event);\n      } else {\n        keyEvent.preventDefault();\n      }\n    };\n    const handleOnPaste = event => emit(\"on-paste\", event);\n    const handleOnFocus = () => {\n      input.value.select();\n      return emit(\"on-focus\");\n    };\n    const handleOnBlur = () => emit(\"on-blur\");\n    watch(() => props.value, (newValue, oldValue) => {\n      if (newValue !== oldValue) {\n        model.value = newValue;\n      }\n    });\n    watch(() => props.focus, (newFocusValue, oldFocusValue) => {\n      if (oldFocusValue !== newFocusValue && input.value && props.focus) {\n        input.value.focus();\n        input.value.select();\n      }\n    });\n    onMounted(() => {\n      if (input.value && props.focus && props.shouldAutoFocus) {\n        input.value.focus();\n        input.value.select();\n      }\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$9, [withDirectives(createBaseVNode(\"input\", {\n        \"data-test\": `single-input-${_ctx.inputIdx}`,\n        type: inputTypeValue.value,\n        inputtype: inputTypeValue.value,\n        placeholder: _ctx.placeholder,\n        inputmode: _ctx.inputmode,\n        disabled: _ctx.isDisabled,\n        ref_key: \"input\",\n        ref: input,\n        pattern: \"[0-9]*\",\n        maxlength: _ctx.isFirstChild ? _ctx.inputCount : 1,\n        min: \"0\",\n        max: \"9\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => model.value = $event),\n        class: normalizeClass([\"psg-input\", \"psg-otp-input\", [...(_ctx.inputClasses || [])]]),\n        onInput: handleOnChange,\n        onKeydown: handleOnKeyDown,\n        onPaste: handleOnPaste,\n        onFocus: handleOnFocus,\n        onBlur: handleOnBlur,\n        autocomplete: _ctx.isFirstChild ? \"one-time-code\" : \"off\"\n      }, null, 42, _hoisted_2$6), [[vModelDynamic, model.value]]), !_ctx.isLastChild && _ctx.separator ? (openBlock(), createElementBlock(\"span\", _hoisted_3$5, [createBaseVNode(\"span\", {\n        innerHTML: _ctx.separator\n      }, null, 8, _hoisted_4$5)])) : createCommentVNode(\"\", true)]);\n    };\n  }\n});\nconst _hoisted_1$8 = {\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"space-between\"\n  },\n  class: \"psg-otp-input-container\"\n};\nconst _hoisted_2$5 = {\n  key: 0,\n  autocomplete: \"off\",\n  name: \"hidden\",\n  type: \"text\",\n  style: {\n    \"display\": \"none\"\n  }\n};\nconst _sfc_main$a = defineComponent({\n  __name: \"OneTimePasscodeInput\",\n  props: {\n    value: {\n      default: \"\"\n    },\n    numInputs: {\n      default: 6\n    },\n    separator: {\n      default: \"\"\n    },\n    inputClasses: {},\n    conditionalClass: {\n      default: () => []\n    },\n    inputType: {\n      default: \"number\"\n    },\n    inputmode: {\n      default: \"numeric\"\n    },\n    shouldAutoFocus: {\n      type: Boolean,\n      default: false\n    },\n    placeholder: {\n      default: () => []\n    },\n    isDisabled: {\n      type: Boolean,\n      default: false\n    },\n    disableNonCurrent: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"update:value\", \"on-complete\", \"on-change\"],\n  setup(__props, _ref7) {\n    let {\n      emit\n    } = _ref7;\n    const props = __props;\n    const activeInput = ref(0);\n    const otp = ref([]);\n    const oldOtp = ref([]);\n    watch(() => props.value, val => {\n      const fill = (unref(val) || \"\").padEnd(props.numInputs, \" \").split(\"\");\n      otp.value = fill;\n    }, {\n      immediate: true\n    });\n    const handleOnFocus = index => {\n      activeInput.value = index;\n    };\n    const handleOnBlur = () => {\n      activeInput.value = -1;\n    };\n    const checkFilledAllInputs = () => {\n      if (otp.value.join(\"\").length === props.numInputs) {\n        emit(\"update:value\", otp.value.join(\"\"));\n        return emit(\"on-complete\", otp.value.join(\"\"));\n      }\n      return \"Wait until the user enters the required number of characters\";\n    };\n    const focusInput = input => {\n      activeInput.value = Math.max(Math.min(props.numInputs - 1, input), 0);\n    };\n    const focusNextInput = () => {\n      if (props.disableNonCurrent) {\n        setTimeout(() => {\n          focusInput(activeInput.value + 1);\n        }, 200);\n      } else {\n        focusInput(activeInput.value + 1);\n      }\n    };\n    const focusPrevInput = () => {\n      focusInput(activeInput.value - 1);\n    };\n    const changeCodeAtFocus = value => {\n      oldOtp.value = Object.assign([], otp.value);\n      otp.value[activeInput.value] = value;\n      if (oldOtp.value.join(\"\") !== otp.value.join(\"\")) {\n        emit(\"update:value\", otp.value.join(\"\"));\n        emit(\"on-change\", otp.value.join(\"\"));\n      }\n    };\n    const handleOnPaste = event => {\n      var _a;\n      event.preventDefault();\n      const pastedData = (_a = event.clipboardData) == null ? void 0 : _a.getData(\"text/plain\").slice(0, props.numInputs - activeInput.value).split(\"\");\n      if (props.inputType === \"number\" && !(pastedData == null ? void 0 : pastedData.join(\"\").match(/^\\d+$/))) {\n        return \"Invalid pasted data\";\n      }\n      if (props.inputType === \"letter-numeric\" && !(pastedData == null ? void 0 : pastedData.join(\"\").match(/^\\w+$/))) {\n        return \"Invalid pasted data\";\n      }\n      const currentCharsInOTP = otp.value.slice(0, activeInput.value);\n      const combinedWithPastedData = currentCharsInOTP.concat(pastedData || \"\");\n      combinedWithPastedData.slice(0, props.numInputs).forEach((value, i) => {\n        otp.value[i] = value;\n      });\n      focusInput(combinedWithPastedData.slice(0, props.numInputs).length);\n      return checkFilledAllInputs();\n    };\n    const handleOnChange = value => {\n      changeCodeAtFocus(value);\n      focusNextInput();\n    };\n    const handleOnKeyDown = event => {\n      switch (event.keyCode) {\n        case 8:\n          event.preventDefault();\n          changeCodeAtFocus(\"\");\n          focusPrevInput();\n          break;\n        case 46:\n          event.preventDefault();\n          changeCodeAtFocus(\"\");\n          break;\n        case 37:\n          event.preventDefault();\n          focusPrevInput();\n          break;\n        case 39:\n          event.preventDefault();\n          focusNextInput();\n          break;\n      }\n    };\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$8, [_ctx.inputType === \"password\" ? (openBlock(), createElementBlock(\"input\", _hoisted_2$5)) : createCommentVNode(\"\", true), (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.numInputs, (_, i) => {\n        return openBlock(), createBlock(_sfc_main$b, {\n          key: i,\n          focus: activeInput.value === i,\n          value: otp.value[i],\n          separator: _ctx.separator,\n          \"input-type\": _ctx.inputType,\n          inputmode: _ctx.inputmode,\n          \"input-classes\": _ctx.inputClasses,\n          conditionalClass: _ctx.conditionalClass[i],\n          \"is-last-child\": i === _ctx.numInputs - 1,\n          \"is-first-child\": i === 0,\n          \"should-auto-focus\": _ctx.shouldAutoFocus,\n          placeholder: _ctx.placeholder[i],\n          \"is-disabled\": _ctx.isDisabled || _ctx.disableNonCurrent && i > otp.value.join(\"\").trim().length,\n          \"input-idx\": i,\n          \"input-count\": _ctx.numInputs,\n          onOnChange: handleOnChange,\n          onOnKeydown: handleOnKeyDown,\n          onOnPaste: handleOnPaste,\n          onOnFocus: $event => handleOnFocus(i),\n          onOnBlur: handleOnBlur\n        }, null, 8, [\"focus\", \"value\", \"separator\", \"input-type\", \"inputmode\", \"input-classes\", \"conditionalClass\", \"is-last-child\", \"is-first-child\", \"should-auto-focus\", \"placeholder\", \"is-disabled\", \"input-idx\", \"input-count\", \"onOnFocus\"]);\n      }), 128))]);\n    };\n  }\n});\nconst _hoisted_1$7 = {\n  class: \"auth-flex-container\"\n};\nconst _hoisted_2$4 = {\n  class: \"title has-text-centered\"\n};\nconst _hoisted_3$4 = {\n  class: \"content wrap-text\"\n};\nconst _hoisted_4$4 = {\n  style: {\n    \"margin-top\": \"32px\",\n    \"margin-bottom\": \"40px\"\n  }\n};\nconst _hoisted_5$4 = [\"innerHTML\"];\nconst _hoisted_6$3 = {\n  class: \"flex flex-row flex-center\"\n};\nconst _hoisted_7$3 = {\n  class: \"flex-row\",\n  style: {\n    \"margin-top\": \"8px\"\n  }\n};\nconst _hoisted_8$2 = {\n  class: \"error-message\",\n  style: {\n    \"min-height\": \"17px\"\n  }\n};\nconst _hoisted_9$1 = {\n  class: \"flex-row flex-center\",\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_10 = [\"onClick\", \"disabled\"];\nconst _hoisted_11 = /* @__PURE__ */createBaseVNode(\"div\", {\n  class: \"spacer\"\n}, null, -1);\nconst _hoisted_12 = {\n  class: \"flex-row flex-wrap flex-between\"\n};\nconst _hoisted_13 = {\n  class: \"link\"\n};\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = {\n  class: \"link\"\n};\nconst _hoisted_16 = [\"onClick\"];\nconst numInputs = 6;\nconst disableInputsOnSendCodeError = false;\nconst _sfc_main$9 = defineComponent({\n  __name: \"OneTimePasscode\",\n  props: {\n    identifier: {},\n    userIsRegistering: {\n      type: Boolean\n    },\n    identifierVerifying: {\n      type: Boolean\n    },\n    setupNewDevice: {\n      type: Boolean\n    },\n    identifierType: {}\n  },\n  setup(__props) {\n    var _this = this;\n    const props = __props;\n    const {\n      t,\n      te: te2,\n      locale\n    } = useLocale();\n    const {\n      appId\n    } = useAppId();\n    const loading = ref(true);\n    const oneTimePasscode = ref(void 0);\n    const errorWithOneTimePasscode = ref(false);\n    const errorSendingOneTimePasscode = ref(false);\n    const errorMessage = ref(void 0);\n    const otpId = ref(void 0);\n    const title = computed(() => {\n      return te2(\"enter-code\") ? t(\"enter-code\", {}) : \"Enter code\";\n    });\n    const message = computed(() => {\n      return te2(\"enter-code-sent\") ? t(\"enter-code-sent\", [props.identifier]) : `A one-time code has been sent to <span style=\"font-weight: 700;\">${props.identifier}</span>. Enter the code here to log in.`;\n    });\n    const btnGoBackText = computed(() => {\n      return te2(\"back\") ? t(\"back\") : \"Back\";\n    });\n    const btnResendText = computed(() => {\n      return te2(\"resend-code\") ? t(\"resend-code\") : \"Resend code\";\n    });\n    const oneTimePasscodeInputClasses = computed(() => {\n      return errorWithOneTimePasscode.value ? [\"has-error\"] : [];\n    });\n    const oneTimePasscodeInputsDisabled = computed(() => {\n      return disableInputsOnSendCodeError;\n    });\n    const continueBtnDisabled = computed(() => {\n      return loading.value;\n    });\n    watch(oneTimePasscode, () => {\n      var _a;\n      _resetErrorState();\n      if (((_a = oneTimePasscode.value) == null ? void 0 : _a.trim().length) === numInputs) {\n        activateOneTimePasscode();\n      }\n    });\n    const passage = new Y(appId.value);\n    const sendOneTimePasscode = function () {\n      let isRegistering = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      return __async(_this, null, function* () {\n        _resetLoadingState();\n        _resetErrorState();\n        _resetOneTimePasscode();\n        loading.value = true;\n        try {\n          const res = isRegistering ? yield passage.newRegisterOneTimePasscode(props.identifier, locale.value.split(\"-\")[0]) : yield passage.newLoginOneTimePasscode(props.identifier, locale.value.split(\"-\")[0]);\n          if (res.otp_id != \"\") {\n            localStorage.setItem(\"otp_id\", res.otp_id);\n            otpId.value = res.otp_id;\n          }\n        } catch (err) {\n          setError(te2(\"code-send-error\") ? t(\"code-send-error\") : \"An error occurred sending the code.\", true);\n        } finally {\n          loading.value = false;\n        }\n      });\n    };\n    const activateOneTimePasscode = () => __async(this, null, function* () {\n      _resetLoadingState();\n      _resetErrorState();\n      loading.value = true;\n      try {\n        if (!oneTimePasscode.value) {\n          throw new Error(\"Login code is undefined.\");\n        }\n        if (oneTimePasscode.value.length !== numInputs) {\n          throw new Error(\"Login code is invalid length.\");\n        }\n        if (!otpId.value) {\n          throw new Error(\"Login code id is undefined.\");\n        }\n        const result = yield passage.oneTimePasscodeActivate(oneTimePasscode.value, otpId.value);\n        if (result && result.redirect_url != \"\") {\n          localStorage.removeItem(\"otp_id\");\n          useCallbacks().onEvent.value(OnEventType.onOneTimePasscodeActivated);\n          useAuthEvent().emitEvent({\n            type: AuthEventType.FallbackAuthSuccess,\n            payload: {\n              identifier: props.identifier,\n              authResult: result\n            }\n          });\n        }\n      } catch (err) {\n        setError(te2(\"code-invalid-or-expired\") ? t(\"code-invalid-or-expired\") : \"Code is invalid or expired. Please try again.\");\n      } finally {\n        loading.value = false;\n      }\n    });\n    const onGoBackClicked = () => {\n      useAuthEvent().emitEvent({\n        type: AuthEventType.ChangeIdentifier,\n        payload: void 0\n      });\n    };\n    const onResendCodeClicked = () => {\n      sendOneTimePasscode();\n    };\n    const onSubmitClicked = () => {\n      activateOneTimePasscode();\n    };\n    onMounted(() => {\n      sendOneTimePasscode(props.userIsRegistering);\n      moveInput();\n    });\n    onBeforeUnmount(() => {\n      cleanupInput();\n    });\n    const _resetLoadingState = () => {\n      loading.value = true;\n    };\n    const _resetErrorState = () => {\n      errorMessage.value = void 0;\n      errorWithOneTimePasscode.value = false;\n      errorSendingOneTimePasscode.value = false;\n    };\n    const _resetOneTimePasscode = () => {\n      oneTimePasscode.value = void 0;\n    };\n    const setError = function (message2) {\n      let sending = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      errorMessage.value = message2;\n      errorWithOneTimePasscode.value = !sending;\n      errorSendingOneTimePasscode.value = sending;\n    };\n    const otpInput = ref();\n    function moveInput() {\n      const parent = otpInput.value.getRootNode().host;\n      otpInput.value.appendChild(otcStyles());\n      parent.appendChild(otpInput.value);\n    }\n    function cleanupInput() {\n      otpInput.value.remove();\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$7, [createBaseVNode(\"form\", null, [createBaseVNode(\"div\", _hoisted_2$4, [createBaseVNode(\"span\", null, toDisplayString(title.value), 1)]), createBaseVNode(\"div\", _hoisted_3$4, [createBaseVNode(\"div\", _hoisted_4$4, [createBaseVNode(\"p\", {\n        innerHTML: message.value\n      }, null, 8, _hoisted_5$4)])]), createBaseVNode(\"div\", _hoisted_6$3, [createBaseVNode(\"div\", {\n        ref_key: \"otpInput\",\n        ref: otpInput,\n        slot: \"otpInput\"\n      }, [createVNode(_sfc_main$a, {\n        \"num-inputs\": numInputs,\n        \"is-disabled\": oneTimePasscodeInputsDisabled.value,\n        value: oneTimePasscode.value,\n        \"onUpdate:value\": _cache[0] || (_cache[0] = $event => oneTimePasscode.value = $event),\n        \"input-classes\": oneTimePasscodeInputClasses.value,\n        \"disable-non-current\": false\n      }, null, 8, [\"is-disabled\", \"value\", \"input-classes\"])], 512), renderSlot(_ctx.$slots, \"otpInput\")]), createBaseVNode(\"div\", _hoisted_7$3, [createBaseVNode(\"div\", _hoisted_8$2, toDisplayString(errorMessage.value ? errorMessage.value : \" \"), 1)]), createBaseVNode(\"div\", _hoisted_9$1, [createBaseVNode(\"button\", {\n        type: \"submit\",\n        class: \"button is-primary\",\n        part: \"button\",\n        \"data-test\": \"continue-button\",\n        onClick: withModifiers(onSubmitClicked, [\"prevent\"]),\n        disabled: continueBtnDisabled.value\n      }, toDisplayString(unref(t)(\"continue\")), 9, _hoisted_10)]), _hoisted_11, createBaseVNode(\"div\", _hoisted_12, [createBaseVNode(\"div\", _hoisted_13, [createBaseVNode(\"a\", {\n        onClick: withModifiers(onGoBackClicked, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"one-time-passcode-goback-button\"\n      }, toDisplayString(btnGoBackText.value), 9, _hoisted_14)]), createBaseVNode(\"div\", _hoisted_15, [createBaseVNode(\"a\", {\n        onClick: withModifiers(onResendCodeClicked, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"one-time-passcode-resend-button\"\n      }, toDisplayString(btnResendText.value), 9, _hoisted_16)])])])]);\n    };\n  }\n});\nconst _hoisted_1$6 = {\n  class: \"view-access-token\"\n};\nconst _sfc_main$8 = defineComponent({\n  __name: \"OneTimePasscodeView\",\n  props: {\n    identifier: {},\n    userIsRegistering: {\n      type: Boolean\n    },\n    identifierVerifying: {\n      type: Boolean\n    },\n    setupNewDevice: {\n      type: Boolean\n    },\n    identifierType: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$6, [createVNode(_sfc_main$9, {\n        identifier: _ctx.identifier,\n        userIsRegistering: _ctx.userIsRegistering,\n        identifierVerifying: _ctx.identifierVerifying,\n        setupNewDevice: _ctx.setupNewDevice,\n        identifierType: _ctx.identifierType\n      }, {\n        otpInput: withCtx(() => [renderSlot(_ctx.$slots, \"otpInput\")]),\n        _: 3\n      }, 8, [\"identifier\", \"userIsRegistering\", \"identifierVerifying\", \"setupNewDevice\", \"identifierType\"])]);\n    };\n  }\n});\nconst _hoisted_1$5 = {\n  class: \"image has-text-centered\"\n};\nconst _hoisted_2$3 = {\n  key: 0\n};\nconst _hoisted_3$3 = {\n  class: \"flex-row flex-center\",\n  style: {\n    \"padding\": \"20px 0px\"\n  }\n};\nconst _hoisted_4$3 = [\"onClick\", \"disabled\"];\nconst _hoisted_5$3 = {\n  key: 0\n};\nconst _hoisted_6$2 = {\n  key: 1\n};\nconst _hoisted_7$2 = {\n  key: 2,\n  class: \"link has-text-centered\"\n};\nconst _hoisted_8$1 = [\"onClick\"];\nconst _sfc_main$7 = defineComponent({\n  __name: \"AddDevice\",\n  props: {\n    authResult: {},\n    identifier: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const {\n      t\n    } = useLocale();\n    const {\n      appId\n    } = useAppId();\n    const showFailure = ref(false);\n    const showSuccess = ref(false);\n    const newDevice = ref();\n    const {\n      addDevice,\n      addPending\n    } = useAddDevice(appId.value);\n    const {\n      autofocusButton\n    } = useAutofocusButton();\n    const title = computed(() => {\n      if (showFailure.value) {\n        return t(\"something-went-wrong\");\n      } else {\n        return t(\"add-passkey\");\n      }\n    });\n    function onButtonClick() {\n      return __async(this, null, function* () {\n        var _a;\n        newDevice.value = yield addDevice();\n        if ((_a = newDevice.value) == null ? void 0 : _a.id) {\n          showSuccess.value = true;\n          showFailure.value = false;\n          finishAuth();\n        } else {\n          showFailure.value = true;\n          showSuccess.value = false;\n        }\n      });\n    }\n    const finishAuth = () => {\n      useAuthEvent().emitEvent({\n        type: AuthEventType.AuthSuccess,\n        payload: {\n          identifier: props.identifier,\n          authResult: props.authResult\n        }\n      });\n    };\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(Fragment, null, [createBaseVNode(\"div\", {\n        class: normalizeClass([\"title has-text-centered\", [showFailure.value ? \"secondary-title\" : \"main-title\"]]),\n        \"data-test\": \"activate-magic-link-message\"\n      }, toDisplayString(title.value), 3), createBaseVNode(\"figure\", _hoisted_1$5, [showFailure.value ? (openBlock(), createBlock(unref(InlineSvg), {\n        key: 0,\n        src: unref(Icons).fingerprintFailed,\n        alt: \"Device failure\"\n      }, null, 8, [\"src\"])) : (openBlock(), createBlock(unref(InlineSvg), {\n        key: 1,\n        src: unref(Icons).passkey,\n        alt: \"Add a passkey\",\n        style: {\n          \"margin\": \"5px\"\n        }\n      }, null, 8, [\"src\"]))]), showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_2$3, toDisplayString(unref(t)(\"failed-to-add-this-device\")), 1)) : (openBlock(), createBlock(_sfc_main$g, {\n        key: 1,\n        cta: unref(t)(\"log-into-your-account\")\n      }, null, 8, [\"cta\"])), createBaseVNode(\"div\", _hoisted_3$3, [createBaseVNode(\"button\", {\n        onClick: withModifiers(onButtonClick, [\"prevent\"]),\n        type: \"button\",\n        class: normalizeClass([\"button is-primary\", {\n          \"is-loading\": unref(addPending)\n        }]),\n        part: \"button\",\n        disabled: unref(addPending),\n        \"data-test\": \"save-device-button\",\n        ref_key: \"autofocusButton\",\n        ref: autofocusButton\n      }, [showFailure.value ? (openBlock(), createElementBlock(\"span\", _hoisted_5$3, toDisplayString(unref(t)(\"try-again\")), 1)) : (openBlock(), createElementBlock(\"span\", _hoisted_6$2, toDisplayString(unref(t)(\"add-passkey\")), 1))], 10, _hoisted_4$3)]), !showSuccess.value ? (openBlock(), createElementBlock(\"div\", _hoisted_7$2, [createBaseVNode(\"div\", null, [createBaseVNode(\"a\", {\n        onClick: withModifiers(finishAuth, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"add-device-skip\"\n      }, toDisplayString(unref(t)(\"skip\")), 9, _hoisted_8$1)])])) : createCommentVNode(\"\", true)], 64);\n    };\n  }\n});\nconst _hoisted_1$4 = {\n  class: \"view-add-device\"\n};\nconst _sfc_main$6 = defineComponent({\n  __name: \"AddDeviceView\",\n  props: {\n    authResult: {},\n    identifier: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$4, [createVNode(_sfc_main$7, {\n        authResult: _ctx.authResult,\n        identifier: _ctx.identifier\n      }, null, 8, [\"authResult\", \"identifier\"])]);\n    };\n  }\n});\nconst _hoisted_1$3 = {\n  class: \"wrap-text\",\n  style: {\n    \"margin-bottom\": \"12px !important\"\n  }\n};\nconst _hoisted_2$2 = {\n  class: \"passage-learnmore-header\"\n};\nconst _hoisted_3$2 = {\n  class: \"passage-learnmore-body\"\n};\nconst _hoisted_4$2 = {\n  class: \"passage-learnmore-header\"\n};\nconst _hoisted_5$2 = {\n  class: \"passage-learnmore-body\"\n};\nconst _sfc_main$5 = defineComponent({\n  __name: \"LearnMoreDisabledFallbacks\",\n  setup(__props) {\n    const {\n      t\n    } = useLocale();\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$h, null, {\n        cta: withCtx(() => [createBaseVNode(\"div\", _hoisted_1$3, toDisplayString(unref(t)(\"passkeys-are-required\")) + toDisplayString(\" \"), 1), createTextVNode(\" \" + toDisplayString(unref(t)(\"try-again-on-device-with-passkeys\")), 1)]),\n        body: withCtx(() => [createBaseVNode(\"div\", _hoisted_2$2, toDisplayString(unref(t)(\"what-are-passkeys\")), 1), createBaseVNode(\"div\", _hoisted_3$2, toDisplayString(unref(t)(\"passkeys-are-a-simpler-and-more-secure-alternative\")), 1), createBaseVNode(\"div\", _hoisted_4$2, toDisplayString(unref(t)(\"devices-that-support-passkeys\")), 1), createBaseVNode(\"div\", _hoisted_5$2, toDisplayString(unref(t)(\"devices-with-a-biometric-sensor-are-likely-to-support-passkeys\")), 1)]),\n        _: 1\n      });\n    };\n  }\n});\nconst _hoisted_1$2 = {\n  class: \"auth-flex-container\"\n};\nconst _hoisted_2$1 = {\n  class: \"title has-text-centered\"\n};\nconst _hoisted_3$1 = {\n  class: \"image has-text-centered\",\n  style: {\n    \"margin\": \"5px auto\"\n  }\n};\nconst _hoisted_4$1 = /* @__PURE__ */createBaseVNode(\"div\", {\n  class: \"spacer\"\n}, null, -1);\nconst _hoisted_5$1 = {\n  class: \"flex-row flex-wrap flex-center\"\n};\nconst _hoisted_6$1 = {\n  class: \"link\"\n};\nconst _hoisted_7$1 = [\"onClick\"];\nconst _sfc_main$4 = defineComponent({\n  __name: \"DisableFallbacks\",\n  setup(__props) {\n    const {\n      t\n    } = useLocale();\n    const {\n      emitEvent: emitEvent2\n    } = useAuthEvent();\n    function changeEmail() {\n      localStorage.removeItem(\"email\");\n      emitEvent2({\n        type: AuthEventType.ChangeIdentifier,\n        payload: void 0\n      });\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$2, [createBaseVNode(\"div\", _hoisted_2$1, toDisplayString(unref(t)(\"device-not-supported\")), 1), createBaseVNode(\"figure\", _hoisted_3$1, [createVNode(unref(InlineSvg), {\n        src: unref(Icons).passkeyArrow,\n        alt: \"Device not supported\",\n        style: {\n          \"margin\": \"5px\"\n        }\n      }, null, 8, [\"src\"])]), createVNode(_sfc_main$5), _hoisted_4$1, createBaseVNode(\"div\", _hoisted_5$1, [createBaseVNode(\"div\", _hoisted_6$1, [createBaseVNode(\"a\", {\n        onClick: withModifiers(changeEmail, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"change-email-button\"\n      }, toDisplayString(unref(t)(\"back\")), 9, _hoisted_7$1)])])]);\n    };\n  }\n});\nconst _sfc_main$3 = defineComponent({\n  __name: \"DisableFallbackView\",\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$4);\n    };\n  }\n});\nconst _hoisted_1$1 = {\n  class: \"auth-flex-container\"\n};\nconst _hoisted_2 = {\n  class: \"title has-text-centered\"\n};\nconst _hoisted_3 = {\n  class: \"image has-text-centered\",\n  style: {\n    \"margin\": \"5px auto\"\n  }\n};\nconst _hoisted_4 = {\n  class: \"wrap-text\",\n  style: {\n    \"margin-bottom\": \"12px !important\"\n  }\n};\nconst _hoisted_5 = {\n  class: \"wrap-text\"\n};\nconst _hoisted_6 = /* @__PURE__ */createBaseVNode(\"div\", {\n  class: \"spacer\"\n}, null, -1);\nconst _hoisted_7 = {\n  class: \"flex-row flex-wrap flex-center\"\n};\nconst _hoisted_8 = {\n  class: \"link\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _sfc_main$2 = defineComponent({\n  __name: \"LoginNotSupported\",\n  setup(__props) {\n    const {\n      t\n    } = useLocale();\n    const {\n      emitEvent: emitEvent2\n    } = useAuthEvent();\n    function changeEmail() {\n      localStorage.removeItem(\"email\");\n      emitEvent2({\n        type: AuthEventType.ChangeIdentifier,\n        payload: void 0\n      });\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$1, [createBaseVNode(\"div\", _hoisted_2, toDisplayString(unref(t)(\"login-not-supported\")), 1), createBaseVNode(\"figure\", _hoisted_3, [createVNode(unref(InlineSvg), {\n        src: unref(Icons).passkeyArrow,\n        alt: \"Device not supported\",\n        style: {\n          \"margin\": \"5px\"\n        }\n      }, null, 8, [\"src\"])]), createBaseVNode(\"div\", _hoisted_4, toDisplayString(unref(t)(\"passkeys-are-now-required\")), 1), createBaseVNode(\"div\", _hoisted_5, toDisplayString(unref(t)(\"please-contact-support-to-regain-access\")), 1), _hoisted_6, createBaseVNode(\"div\", _hoisted_7, [createBaseVNode(\"div\", _hoisted_8, [createBaseVNode(\"a\", {\n        onClick: withModifiers(changeEmail, [\"prevent\"]),\n        role: \"button\",\n        \"data-test\": \"change-email-button\"\n      }, toDisplayString(unref(t)(\"back\")), 9, _hoisted_9)])])]);\n    };\n  }\n});\nconst _sfc_main$1 = defineComponent({\n  __name: \"LoginNotSupportedView\",\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$2);\n    };\n  }\n});\nconst AuthRoute = {\n  component: _sfc_main$p\n};\nconst LoginRoute = {\n  component: _sfc_main$m\n};\nconst RegisterRoute = {\n  component: _sfc_main$l\n};\nconst RegisterDeviceRoute = {\n  component: _sfc_main$e\n};\nconst MagicLinkRoute = {\n  component: _sfc_main$i\n};\nconst WebauthnSignInRoute = {\n  component: _sfc_main$c\n};\nconst ActivateMagicLinkRoute = {\n  component: _sfc_main$n\n};\nconst OneTimePasscodeRoute = {\n  component: _sfc_main$8\n};\nconst AddDeviceRoute = {\n  component: _sfc_main$6\n};\nconst DisableFallbacksRoute = {\n  component: _sfc_main$3\n};\nconst LoginNotSupportedRoute = {\n  component: _sfc_main$1\n};\nclass Router {\n  constructor(homeRoute) {\n    this._homeRoute = AuthRoute;\n    this._history = [];\n    if (homeRoute !== void 0) {\n      this._homeRoute = homeRoute;\n    }\n  }\n  get homeRoute() {\n    return this._homeRoute;\n  }\n  set homeRoute(homeRoute) {\n    this._homeRoute = homeRoute;\n  }\n  get currentRoute() {\n    if (this._history.length === 0) {\n      return void 0;\n    }\n    return this._history[this._history.length - 1];\n  }\n  push(route, props) {\n    this._history.push(__spreadProps(__spreadValues({}, route), {\n      props\n    }));\n  }\n  resetRouter() {\n    this._history = [];\n  }\n}\nconst _hoisted_1 = {\n  key: 0,\n  class: \"notification is-danger has-text-centered\",\n  \"data-test\": \"invalid-app-id\"\n};\nconst _sfc_main = defineComponent({\n  __name: \"SmartRouter\",\n  props: {\n    homeRoute: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const router = reactive(new Router(props.homeRoute));\n    const currentRoute = computed(() => router.currentRoute);\n    const {\n      t\n    } = useLocale();\n    const {\n      appInfo,\n      loading,\n      invalidAppId\n    } = useAppInfo();\n    const {\n      initEventHandler: initEventHandler2\n    } = useAuthEvent();\n    const currentComponent = computed(() => {\n      var _a;\n      return (_a = currentRoute.value) == null ? void 0 : _a.component;\n    });\n    const currentProps = computed(() => {\n      var _a;\n      const props2 = (_a = currentRoute.value) == null ? void 0 : _a.props;\n      if (props2 === void 0) {\n        return {};\n      }\n      return props2;\n    });\n    const initialized = ref(false);\n    watch(appInfo, () => __async(this, null, function* () {\n      initialized.value = false;\n      if (appInfo.value === void 0) {\n        return;\n      }\n      yield initEventHandler2(appInfo.value, router);\n      initialized.value = true;\n    }));\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(Fragment, null, [createVNode(Transition, {\n        name: \"fade\",\n        mode: \"out-in\",\n        appear: \"\"\n      }, {\n        default: withCtx(() => [!unref(loading) && initialized.value ? (openBlock(), createBlock(resolveDynamicComponent(currentComponent.value), normalizeProps(mergeProps({\n          key: 0\n        }, currentProps.value)), {\n          otpInput: withCtx(() => [renderSlot(_ctx.$slots, \"otpInput\")]),\n          loginInput: withCtx(() => [renderSlot(_ctx.$slots, \"loginInput\")]),\n          _: 3\n        }, 16)) : createCommentVNode(\"\", true)]),\n        _: 3\n      }), unref(invalidAppId) ? (openBlock(), createElementBlock(\"div\", _hoisted_1, toDisplayString(unref(t)(\"invalid-app-id\")), 1)) : createCommentVNode(\"\", true)], 64);\n    };\n  }\n});\nfunction useElementSetup(props) {\n  function storeProps() {\n    const {\n      updateAppId\n    } = useAppId();\n    if (props.appId) {\n      updateAppId(props.appId);\n    }\n    const {\n      updateDefaultCountryCode\n    } = useDefaultCountryCode();\n    updateDefaultCountryCode(props.defaultCountryCode);\n    const {\n      setBeforeAuth: setBeforeAuth2,\n      setOnSuccess: setOnSuccess2,\n      setOnEvent: setOnEvent2\n    } = useCallbacks();\n    setBeforeAuth2(props.beforeAuth);\n    setOnSuccess2(props.onSuccess);\n    setOnEvent2(props.onEvent);\n  }\n  storeProps();\n  onBeforeUpdate(() => {\n    storeProps();\n  });\n  const {\n    languageLoading\n  } = useStoreLocale(props);\n  const containerRef = ref();\n  useIntlTelInput(containerRef);\n  return {\n    languageLoading,\n    containerRef\n  };\n}\nexport { AuthRoute as A, LoginRoute as L, RegisterRoute as R, _sfc_main as _, useElementSetup as u };\n//#","map":{"version":3,"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","__async","__this","__arguments","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","throw","x","done","then","apply","f","ref","g","watch","d","defineComponent","h","useLocale","i","computed","j","onMounted","k","oe","l","onBeforeUnmount","c","createElementBlock","w","withDirectives","v","vShow","createBaseVNode","m","createTextVNode","t","toDisplayString","u","unref","n","withModifiers","p","normalizeClass","q","vModelText","r","renderSlot","normalizeStyle","y","createCommentVNode","z","isStringNullish","o","openBlock","Y","E","A","te","B","readonly","C","useAppId","D","ue","U","UAParser","createBlock","withCtx","F","createVNode","G","H","onBeforeMount","_","_export_sfc","I","Icons","J","InlineSvg","K","isRef","L","useDefaultCountryCode","T","M","Transition","N","Fragment","O","vModelDynamic","P","renderList","Q","useAddDevice","R","reactive","S","useAppInfo","V","normalizeProps","W","mergeProps","X","resolveDynamicComponent","Z","onBeforeUpdate","$","useStoreLocale","a0","useIntlTelInput","intlTelInput","transformMetadata","LayoutType","UserMetadata","IdentifierType","IdentifierType2","useAutofocusButton","autofocusButton","autofocus","focus","inputStyles","css","style","document","createElement","appendChild","createTextNode","itiStyles","link","rel","href","otcStyles","_hoisted_1$q","class","_hoisted_2$h","_hoisted_3$f","_hoisted_4$e","_hoisted_5$d","_hoisted_6$b","_hoisted_7$b","_hoisted_8$8","_hoisted_9$7","_sfc_main$u","__name","props","appId","validationError","default","identifier","countryCode","identifierMode","showWelcomeBack","type","Boolean","conditionalUI","emits","setup","__props","_ref","emit","identifierParseError","identifierInput","controlContainer","showWelcomeUI","label","identifierType","phone","email","both","charAt","toUpperCase","slice","placeholder","inputMode","autocomplete","_a","identifierText","get","set","newIdentifier","formattedIdentifier","isPhoneNumber","phoneInput","getNumber","trim","toLowerCase","error","clearErrors","checkIdentifier","validateInput","passage","identifierExists","userHasWebauthn","userHasPasskey","emailVerified","phoneVerified","userStatus","userID","userInfo","webauthn","status","id","email_verified","phone_verified","webauthn_types","includes","Passkey","INACTIVE","errorMessage","isEmail","emailRegEx","test","isPhoneNumberRegex","isValidNumber","message","showCountryCode","addEventListener","getSelectedCountryData","iso2","initialCountry","utilsScript","dropdownContainer","autoPlaceholder","hideCountryCode","destroy","moveInput","phoneNumberRegex","countryCodeText","newValue","setCountry","switchAccount","identifierForm","parent","getRootNode","host","cleanupInput","remove","_ctx","_cache","ref_key","slot","onSubmit","$event","part","inputmode","onInput","$slots","onClick","role","OnEventType","OnEventType2","defaultBeforeAuth","defaultOnSuccess","authResult2","window","location","redirect_url","defaultOnEvent","beforeAuth","onSuccess","onEvent","setBeforeAuth","newBeforeAuth","setOnSuccess","newOnSuccess","setOnEvent","newOnEvent","useCallbacks","storageKey","getLastLogin","localStorage","getItem","storeLastLogin","identiferOrUserInfo","setItem","currentInfo","getCurrentUser","createdUserEventHandler","payload","eventHandlerState","webauthnAllowed","appInfo","router","emitEvent","emitEvent2","useAuthEvent","require_identifier_verification","AuthEventType","FallbackAuth","identifierVerifying","userIsRegistering","userInitiated","onRegisterDevice","push","RegisterDeviceRoute","changeIdenfitierEventHandler","browserFeatures","homeRoute","changeEmail","isWebauthnGetMonkeypatched","isGetNative","navigator","credentials","toString","loginUserEventHandler","noFallback","auth_fallback_method","None","LoginNotSupportedRoute","verificationRequired","userNeedsToVerify","canTryPlaform","platform","credIDExists","canTryPasskey","syncedCredential","tryWebauthnWithNoFallback","tryNonNativeWebauthn","canTryWebAuthn","onVerifyIdentity","WebauthnSignInRoute","setupNewDevice","fallbackAuthEventHandler","authState","userInitiatedFallback","LoginCode","otpCallback","OneTimePasscodeRoute","MagicLink","magicLinkCallback","MagicLinkRoute","DisableFallbacksRoute","onMagicLinkRegister","onMagicLinkLogin","onOneTimePasscodeRegister","onOneTimePasscodeLogin","authSuccessEventHandler","authResult","auth_token","fallbackAuthSuccessEventHandler","AddDeviceRoute","AuthSuccess","isSafariVersionLessThan164","userAgent","getBrowser","name","parseFloat","version","AuthEventType2","EventHandler","constructor","authOriginValid","securityKey","crossDeviceCredential","isAvailable","initializeEventHandler","checkWebauthnConfig","getCredentialAvailable","checkMagicLink","handleEvent","event","queryString","search","urlParams","URLSearchParams","magicLink","has","ActivateMagicLinkRoute","eventHandler","initEventHandler","getEventHandler","_sfc_main$t","canToggleLoginRegister","visible","_ref2","newCountryCode","inputForm","onLoaded","triggerConditionalUI","allowed_identifier","beforeAuthResult","errorString","checkIdentifierExistsAndStatus","LoginUser","identiferString","public_signup","abortController","lastLogin","AbortController","loginConditional","signal","catch","cancelConditionalUI","abort","onOnSubmit","loginInput","_hoisted_1$p","_sfc_main$s","_ref3","publicSignup","validMetadata","metadataComponent","validate","ACTIVE","createUser","user_metadata","metadata","user_metadata_schema","err","startsWith","CreatedUser","metadataFields","layouts","registration","length","isEditing","layoutType","Registration","userMetadata","ephemeralAppIdKey","ephemeralAppNameKey","EphemeralAppService","newEphemeralApp","ephemeralAppUrl","response","fetch","method","body","JSON","stringify","auth_origin","origin","Math","random","responseBody","json","app","_sfc_main$r","consoleUrl","isEphemeral","claimed","ephemeralClaimUrl","exampleTag","passageWebSetup","appIdUnassigned","updateAppId","ephemeralAppId","ephemeralAppName","nameParam","encodeURIComponent","logToConsole","ephemeralService","res","checkIfClaimed","ephemeral","console","info","_hoisted_1$o","_hoisted_2$g","_hoisted_3$e","_hoisted_4$d","_hoisted_5$c","_hoisted_6$a","_hoisted_7$a","_sfc_render$1","$props","$setup","$data","$options","target","EphemeralAppInfo","_hoisted_1$n","_hoisted_2$f","_hoisted_3$d","_sfc_main$q","passage_branding","src","poweredByPassage","alt","_hoisted_1$m","_hoisted_2$e","_hoisted_3$c","_hoisted_4$c","_hoisted_5$b","_hoisted_6$9","_hoisted_7$9","_hoisted_8$7","_hoisted_9$6","_hoisted_10$4","_sfc_main$p","register","showLogin","defaultCountryCode","changeInputPage","useUIState","showFailure","showSuccess","loading","pageLoading","title","uiSuccess","uiError","uiLoading","MagicLinkActionEnum","MagicLinkActionEnum2","useMagicLinkUtils","magicLinkAction","invalidMagicLink","isMagicLinkValid","searchParams","split","useMagicLinkActivation","_ref4","uiState","magicLinkUtils","onBeforeActivate","onActivateError","onActivateErrorInvalidMagicLink","onActivateSuccess","_0","_ref5","result","VERIFY","setTimeout","FallbackAuthSuccess","activateWithoutBiometrics","magicLinkActivate","statusCode","NotFound","_hoisted_1$l","_hoisted_2$d","_hoisted_3$b","_hoisted_4$b","_hoisted_5$a","_hoisted_6$8","_hoisted_7$8","_hoisted_8$6","_hoisted_9$5","_hoisted_10$3","_hoisted_11$3","_hoisted_12$3","_hoisted_13$3","_sfc_main$o","activation","onButtonClick","onMagicLinkActivateSuccess","mode","appear","success","failure","LOGIN","disabled","_hoisted_1$k","_sfc_main$n","_hoisted_1$j","_sfc_main$m","_hoisted_1$i","_sfc_main$l","_sfc_main$k","_hoisted_1$h","_hoisted_2$c","_sfc_render","Spinner","_hoisted_1$g","_hoisted_2$b","_hoisted_3$a","_hoisted_4$a","_hoisted_5$9","_hoisted_6$7","_hoisted_7$7","_hoisted_8$5","_hoisted_9$4","_sfc_main$j","locale","messageValue","messageType","messageMedium","registrationType","loginMessage","magicLinkSendRegister","magicLinkSendLogin","removeItem","waitForActivatedMagicLink","ChangeIdentifier","resendMagicLink","showWaiting","newRegisterMagicLink","log","newLoginMagicLink","lookupMagicLink","lookupMagicLinkActivated","onMagicLinkActivated","getMagicLinkStatus","timer","count","delay","clearTimeout","innerHTML","_hoisted_1$f","_sfc_main$i","_hoisted_1$e","_hoisted_2$a","_hoisted_3$9","_hoisted_4$9","_hoisted_5$8","_sfc_main$h","showModal","close","_hoisted_1$d","_hoisted_2$9","_hoisted_3$8","_hoisted_4$8","_hoisted_5$7","_hoisted_6$6","_hoisted_7$6","_sfc_main$g","cta","privateIcon","secure","simple","_hoisted_1$c","_hoisted_2$8","_hoisted_3$7","_hoisted_4$7","_hoisted_5$6","_hoisted_6$5","_hoisted_7$5","_hoisted_8$4","_hoisted_9$3","_hoisted_10$2","_hoisted_11$2","_hoisted_12$2","_hoisted_13$2","_hoisted_14$2","_hoisted_15$2","_hoisted_16$2","_hoisted_17","_sfc_main$f","te2","fallbackAuth","supportsFallback","fallbackRegisterWithCodeEmailOrTextBtnCopy","fallbackSendCodeEmailOrTextBtnCopy","failureCreateText","signUpWebAuthn","registerWithFallback","passkey","tabindex","_sfc_main$e","_hoisted_1$b","_hoisted_2$7","_hoisted_3$6","_hoisted_4$6","_hoisted_5$5","_hoisted_6$4","_hoisted_7$4","_hoisted_8$3","_hoisted_9$2","_hoisted_10$1","_hoisted_11$1","_hoisted_12$1","_hoisted_13$1","_hoisted_14$1","_hoisted_15$1","_hoisted_16$1","_sfc_main$d","loginWithCodeEmailOrTextBtnCopy","failureLoginText","signInWebAuthn","login","PSGParsePublicKeyForLoginFailed","loginWithFallback","_hoisted_1$a","_sfc_main$c","_hoisted_1$9","_hoisted_2$6","_hoisted_3$5","_hoisted_4$5","_sfc_main$b","conditionalClass","inputClasses","inputType","isDisabled","isLastChild","separator","shouldAutoFocus","isFirstChild","inputIdx","inputCount","_ref6","model","input","inputTypeValue","handleOnChange","isCodeLetter","charCode","isCodeNumeric","handleOnKeyDown","preventDefault","keyEvent","which","keyCode","handleOnPaste","handleOnFocus","select","handleOnBlur","oldValue","newFocusValue","oldFocusValue","inputtype","pattern","maxlength","min","max","onKeydown","onPaste","onFocus","onBlur","_hoisted_1$8","_hoisted_2$5","_sfc_main$a","numInputs","disableNonCurrent","_ref7","activeInput","otp","oldOtp","val","fill","padEnd","immediate","index","checkFilledAllInputs","join","focusInput","focusNextInput","focusPrevInput","changeCodeAtFocus","assign","pastedData","clipboardData","getData","match","currentCharsInOTP","combinedWithPastedData","concat","forEach","onOnChange","onOnKeydown","onOnPaste","onOnFocus","onOnBlur","_hoisted_1$7","_hoisted_2$4","_hoisted_3$4","_hoisted_4$4","_hoisted_5$4","_hoisted_6$3","_hoisted_7$3","_hoisted_8$2","_hoisted_9$1","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","disableInputsOnSendCodeError","_sfc_main$9","_this","oneTimePasscode","errorWithOneTimePasscode","errorSendingOneTimePasscode","otpId","btnGoBackText","btnResendText","oneTimePasscodeInputClasses","oneTimePasscodeInputsDisabled","continueBtnDisabled","_resetErrorState","activateOneTimePasscode","sendOneTimePasscode","isRegistering","arguments","undefined","_resetLoadingState","_resetOneTimePasscode","newRegisterOneTimePasscode","newLoginOneTimePasscode","otp_id","setError","Error","oneTimePasscodeActivate","onOneTimePasscodeActivated","onGoBackClicked","onResendCodeClicked","onSubmitClicked","message2","sending","otpInput","_hoisted_1$6","_sfc_main$8","_hoisted_1$5","_hoisted_2$3","_hoisted_3$3","_hoisted_4$3","_hoisted_5$3","_hoisted_6$2","_hoisted_7$2","_hoisted_8$1","_sfc_main$7","newDevice","addDevice","addPending","finishAuth","fingerprintFailed","_hoisted_1$4","_sfc_main$6","_hoisted_1$3","_hoisted_2$2","_hoisted_3$2","_hoisted_4$2","_hoisted_5$2","_sfc_main$5","_hoisted_1$2","_hoisted_2$1","_hoisted_3$1","_hoisted_4$1","_hoisted_5$1","_hoisted_6$1","_hoisted_7$1","_sfc_main$4","passkeyArrow","_sfc_main$3","_hoisted_1$1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_sfc_main$2","_sfc_main$1","AuthRoute","component","LoginRoute","RegisterRoute","Router","_homeRoute","_history","currentRoute","route","resetRouter","_hoisted_1","_sfc_main","invalidAppId","initEventHandler2","currentComponent","currentProps","props2","initialized","useElementSetup","storeProps","updateDefaultCountryCode","setBeforeAuth2","setOnSuccess2","setOnEvent2","languageLoading","containerRef"],"sources":["/home/tejaswi/pdf-passage/frontend/node_modules/@passageidentity/passage-elements/dist/package/customElements.es2.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\nimport { f as ref, g as watch, d as defineComponent, h as useLocale, i as computed, j as onMounted, k as oe, l as onBeforeUnmount, c as createElementBlock, w as withDirectives, v as vShow, a as createBaseVNode, m as createTextVNode, t as toDisplayString, u as unref, n as withModifiers, p as normalizeClass, q as vModelText, r as renderSlot, x as normalizeStyle, y as createCommentVNode, z as isStringNullish, o as openBlock, Y, E, A as te, B as readonly, C as useAppId, D as ue, U as UAParser, b as createBlock, e as withCtx, F as createVNode, G as h, H as onBeforeMount, _ as _export_sfc, I as Icons, J as InlineSvg, K as isRef, L as useDefaultCountryCode, T, M as Transition, N as Fragment, O as vModelDynamic, P as renderList, Q as useAddDevice, R as reactive, S as useAppInfo, V as normalizeProps, W as mergeProps, X as resolveDynamicComponent, Z as onBeforeUpdate, $ as useStoreLocale, a0 as useIntlTelInput } from \"./customElements.es.js\";\nimport { i as intlTelInput, t as transformMetadata, L as LayoutType, U as UserMetadata } from \"./customElements.es3.js\";\nvar IdentifierType = /* @__PURE__ */ ((IdentifierType2) => {\n  IdentifierType2[\"phone\"] = \"PHONE\";\n  IdentifierType2[\"email\"] = \"EMAIL\";\n  return IdentifierType2;\n})(IdentifierType || {});\nfunction useAutofocusButton() {\n  const autofocusButton = ref();\n  function autofocus() {\n    if (autofocusButton.value === void 0 || autofocusButton.value === null) {\n      return;\n    }\n    autofocusButton.value.focus();\n  }\n  watch(autofocusButton, () => {\n    autofocus();\n  });\n  return {\n    autofocusButton\n  };\n}\nfunction inputStyles() {\n  const css = `\n      .psg-input{\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        box-sizing: border-box;\n        color: var(--passage-body-text-color, #000000);\n        font-family: var(--passage-body-font-family, 'Helvetica');\n        font-size: var(--passage-body-font-size, 14px);\n        font-weight: var(--passage-body-font-weight, 400);\n\n        min-height: 40px;\n        width: 100%;\n\n        padding-left: 10px;\n        padding-right: 10px;\n        margin: 0;\n\n        color: var(--app-text);\n\n        background-color: var(--passage-container-background-color, #ffffff);\n        border-style: solid;\n        border-color: var(--passage-control-border-color, #d7d7d7);\n        border-width: 1px;\n        border-radius: var(--passage-control-border-radius, 5px);\n\n        transition: all 0.3s;\n\n        text-overflow: ellipsis;\n      }\n\n      .psg-input:focus{\n        outline: none;\n        box-shadow: none !important;\n        border-color: var(--passage-body-text-color, #000000);\n      }\n\n      .psg-input:active{\n        outline: none;\n        box-shadow: none !important;\n        border-color: var(--passage-body-text-color, #000000);\n      }\n\n      .psg-input.has-error{\n        border-color: var(--passage-error-color, #dd0031);\n      }\n      .psg-input.is-danger{\n        border-color: var(--passage-error-color, #dd0031);\n      }\n      .iti {\n        width: 100%;\n      }\n\n        .iti__country-list {\n            border-radius: 6px;\n        }\n\n        .iti__country {\n            padding: 5px 10px;\n        }\n\n        .iti__selected-flag {\n            border-top-left-radius: var(--passage-control-border-radius, 6px);\n            border-bottom-left-radius: var(--passage-control-border-radius, 6px);\n        }\n\n    .iti--container {\n        top: unset !important;\n        left: unset !important;\n    }`;\n  const style = document.createElement(\"style\");\n  style.appendChild(document.createTextNode(css));\n  return style;\n}\nfunction itiStyles() {\n  const link = document.createElement(\"link\");\n  link.rel = \"stylesheet\";\n  link.href = \"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.16/css/intlTelInput.css\";\n  return link;\n}\nfunction otcStyles() {\n  const css = `\n      .psg-otp-input-container{\n        margin: 0px;\n        padding: 0px;\n        align-items: center;\n        height: auto;\n        width: auto;\n      }\n      .psg-otp-single-input-container{\n        margin: 0px;\n        padding: 0px;\n        height: auto;\n        width: auto;\n      }\n      .psg-otp-input {\n        width: 40px;\n        height: 40px;\n        padding: 0px;\n        margin-left: 4px;\n        margin-right: 4px;\n        font-size: 24px;\n        font-weight: 400;\n        line-height: 29px;\n        border-radius: 4px;\n        border: 1px solid transparent;\n        text-align: center;\n        background-color: var(--passage-otp-input-background-color, #d7d7d7);\n        -moz-appearance: textfield;\n      }\n      .psg-otp-input:read-only {\n        background-color: var(--passage-otp-input-background-color, #d7d7d7);\n      }\n      .psg-otp-input::-webkit-inner-spin-button{\n        -webkit-appearance: none;\n        display: none;\n        margin: 0;\n      }\n      .psg-otp-input::-webkit-outer-spin-button{\n        -webkit-appearance: none;\n        display: none;\n        margin: 0;\n      }\n      .psg-input.has-error{\n        border-color: var(--passage-error-color, #dd0031) !important;\n      }\n      .psg-input.is-danger {\n        border-color: var(--passage-error-color, #dd0031) !important;\n      }\n      .psg-input:focus {\n        outline: none;\n        box-shadow: none !important;\n        border-color: var(--passage-body-text-color, #000000);\n      }\n      .psg-input:active {\n        outline: none;\n        box-shadow: none !important;\n        border-color: var(--passage-body-text-color, #000000);\n      }`;\n  const style = document.createElement(\"style\");\n  style.appendChild(document.createTextNode(css));\n  return style;\n}\nconst _hoisted_1$q = { class: \"identifier-form\" };\nconst _hoisted_2$h = { class: \"has-text-centered\" };\nconst _hoisted_3$f = /* @__PURE__ */ createBaseVNode(\"br\", null, null, -1);\nconst _hoisted_4$e = [\"onSubmit\"];\nconst _hoisted_5$d = [\"autocomplete\", \"inputmode\", \"placeholder\", \"onInput\"];\nconst _hoisted_6$b = { class: \"flex-row flex-center\" };\nconst _hoisted_7$b = [\"onClick\"];\nconst _hoisted_8$8 = {\n  key: 0,\n  style: { \"margin-top\": \"30px\" },\n  class: \"link has-text-centered\"\n};\nconst _hoisted_9$7 = [\"onClick\"];\nconst _sfc_main$u = defineComponent({\n  __name: \"ValidatedIdentifierForm\",\n  props: {\n    appId: {},\n    validationError: { default: \"\" },\n    identifier: {},\n    countryCode: {},\n    identifierMode: {},\n    showWelcomeBack: { type: Boolean, default: false },\n    conditionalUI: { type: Boolean, default: false }\n  },\n  emits: [\n    \"onSubmit\",\n    \"update:validationError\",\n    \"update:identifier\",\n    \"update:countryCode\",\n    \"update:showWelcomeBack\"\n  ],\n  setup(__props, { emit }) {\n    const props = __props;\n    const { t } = useLocale();\n    const identifierParseError = ref(\"\");\n    const identifierInput = ref();\n    const controlContainer = ref();\n    const { autofocusButton } = useAutofocusButton();\n    const showWelcomeUI = computed(() => {\n      return props.showWelcomeBack;\n    });\n    const label = computed(() => {\n      let identifierType;\n      switch (props.identifierMode) {\n        case oe.phone:\n          identifierType = t(\"phone-number\");\n          break;\n        case oe.email:\n          identifierType = t(\"email-address\");\n          break;\n        case oe.both:\n          identifierType = t(\"email-or-phone-number\");\n          break;\n      }\n      return identifierType.charAt(0).toUpperCase() + identifierType.slice(1);\n    });\n    const placeholder = computed(() => {\n      return \"example@email.com\";\n    });\n    const inputMode = computed(() => {\n      if (props.identifierMode === oe.phone) {\n        return \"tel\";\n      }\n      return \"email\";\n    });\n    const autocomplete = computed(() => {\n      var _a;\n      if (props.conditionalUI) {\n        return `${inputMode.value} webauthn`;\n      }\n      return (_a = inputMode.value) != null ? _a : \"\";\n    });\n    const identifierText = computed({\n      get() {\n        return props.identifier;\n      },\n      set(newIdentifier) {\n        emit(\"update:identifier\", newIdentifier);\n      }\n    });\n    function formattedIdentifier() {\n      var _a;\n      if (!identifierText.value) {\n        return \"\";\n      }\n      let identifier = identifierText.value;\n      if (!showWelcomeUI.value) {\n        identifier = isPhoneNumber() ? (_a = phoneInput == null ? void 0 : phoneInput.getNumber()) != null ? _a : \"\" : identifierText.value;\n      }\n      return identifier.trim().toLowerCase();\n    }\n    const error = computed(() => {\n      if (!isStringNullish(props.validationError)) {\n        return props.validationError;\n      }\n      if (!isStringNullish(identifierParseError.value)) {\n        return identifierParseError.value;\n      }\n      return \"\";\n    });\n    function clearErrors() {\n      identifierParseError.value = \"\";\n      emit(\"update:validationError\", \"\");\n    }\n    function checkIdentifier() {\n      return __async(this, null, function* () {\n        if (!validateInput()) {\n          return;\n        }\n        const passage = new Y(props.appId);\n        let identifierExists, userHasWebauthn, userHasPasskey, emailVerified, phoneVerified = false;\n        let userStatus;\n        let userID = \"\";\n        try {\n          const userInfo = yield passage.identifierExists(formattedIdentifier());\n          if (userInfo !== null) {\n            identifierExists = true;\n            userHasWebauthn = userInfo.webauthn;\n            userStatus = userInfo.status;\n            userID = userInfo.id;\n            emailVerified = userInfo.email_verified;\n            phoneVerified = userInfo.phone_verified;\n            userHasPasskey = userInfo.webauthn_types.includes(E.Passkey);\n          } else {\n            identifierExists = false;\n            userHasWebauthn = false;\n            userStatus = te.INACTIVE;\n          }\n        } catch (e) {\n          let errorMessage;\n          switch (props.identifierMode) {\n            case oe.email:\n              errorMessage = t(\"enter-a-valid-email-address\");\n              break;\n            case oe.phone:\n              errorMessage = t(\"enter-a-valid-phone-number\");\n              break;\n            case oe.both:\n              errorMessage = t(\"enter-a-valid-email-or-phone-number\");\n              break;\n          }\n          identifierParseError.value = errorMessage;\n          return;\n        }\n        emit(\"onSubmit\", {\n          identifier: formattedIdentifier(),\n          identifierExists,\n          identifierType: isPhoneNumber() ? IdentifierType.phone : IdentifierType.email,\n          userHasWebauthn,\n          userStatus,\n          userID,\n          emailVerified,\n          phoneVerified,\n          userHasPasskey\n        });\n      });\n    }\n    function isEmail() {\n      const emailRegEx = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return emailRegEx.test(formattedIdentifier());\n    }\n    function isPhoneNumber() {\n      if (showWelcomeUI.value) {\n        return isPhoneNumberRegex();\n      }\n      if (phoneInput === void 0) {\n        return false;\n      }\n      return phoneInput.isValidNumber();\n    }\n    function validateInput() {\n      if (formattedIdentifier() === \"\") {\n        let message = \"\";\n        switch (props.identifierMode) {\n          case oe.phone:\n            message = t(\"enter-a-phone-number\");\n            break;\n          case oe.email:\n            message = t(\"enter-an-email-address\");\n            break;\n          case oe.both:\n            message = t(\"enter-an-email-or-phone-number\");\n            break;\n        }\n        identifierParseError.value = message;\n        return false;\n      } else if (props.identifierMode === oe.email && !isEmail()) {\n        identifierParseError.value = t(\"enter-a-valid-email-address\");\n        return false;\n      } else if (props.identifierMode === oe.phone && !isPhoneNumber()) {\n        identifierParseError.value = t(\"enter-a-valid-phone-number\");\n        return false;\n      } else if (props.identifierMode === oe.both && !isPhoneNumber() && !isEmail()) {\n        identifierParseError.value = t(\"enter-a-valid-email-or-phone-number\");\n        return false;\n      }\n      return true;\n    }\n    let phoneInput;\n    function showCountryCode() {\n      if (phoneInput !== void 0) {\n        return;\n      }\n      identifierInput.value.addEventListener(\"countrychange\", () => {\n        var _a;\n        emit(\"update:countryCode\", (_a = phoneInput == null ? void 0 : phoneInput.getSelectedCountryData().iso2) != null ? _a : \"\");\n      });\n      phoneInput = intlTelInput(identifierInput.value, {\n        initialCountry: props.countryCode,\n        utilsScript: \"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js\",\n        dropdownContainer: controlContainer.value,\n        autoPlaceholder: \"aggressive\"\n      });\n      identifierInput.value.focus();\n    }\n    function hideCountryCode() {\n      if (phoneInput === void 0) {\n        return;\n      }\n      phoneInput.destroy();\n      phoneInput = void 0;\n      if (identifierInput.value) {\n        identifierInput.value.focus();\n      }\n    }\n    onMounted(() => {\n      if (props.conditionalUI) {\n        moveInput();\n      }\n      if (props.identifierMode === oe.phone) {\n        showCountryCode();\n      }\n    });\n    function isPhoneNumberRegex() {\n      const phoneNumberRegex = /^\\+$|^\\+?[0-9,(,),\\-, ]+$/;\n      return phoneNumberRegex.test(identifierText.value.trim());\n    }\n    if (props.identifierMode === oe.both) {\n      watch(identifierText, () => {\n        if (isPhoneNumberRegex()) {\n          showCountryCode();\n        } else {\n          hideCountryCode();\n        }\n      });\n    }\n    const countryCodeText = computed(() => {\n      return props.countryCode;\n    });\n    watch(countryCodeText, (newValue) => {\n      phoneInput == null ? void 0 : phoneInput.setCountry(newValue);\n    });\n    function switchAccount() {\n      emit(\"update:showWelcomeBack\", false);\n      identifierText.value = \"\";\n    }\n    const identifierForm = ref();\n    function moveInput() {\n      const parent = identifierForm.value.getRootNode().host;\n      if (parent !== void 0) {\n        identifierForm.value.appendChild(inputStyles());\n        identifierForm.value.appendChild(itiStyles());\n        parent.appendChild(identifierForm.value);\n      }\n    }\n    function cleanupInput() {\n      identifierForm.value.remove();\n    }\n    onBeforeUnmount(() => {\n      cleanupInput();\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$q, [\n        withDirectives(createBaseVNode(\"div\", _hoisted_2$h, [\n          createTextVNode(toDisplayString(unref(t)(\"welcome-back-sign-in-as\")), 1),\n          _hoisted_3$f,\n          createBaseVNode(\"strong\", null, toDisplayString(identifierText.value), 1)\n        ], 512), [\n          [vShow, _ctx.showWelcomeBack]\n        ]),\n        withDirectives(createBaseVNode(\"div\", null, [\n          createBaseVNode(\"div\", {\n            class: \"label\",\n            ref: \"labelRef\"\n          }, toDisplayString(label.value), 513),\n          createBaseVNode(\"form\", {\n            ref_key: \"identifierForm\",\n            ref: identifierForm,\n            slot: \"loginInput\",\n            onSubmit: withModifiers(checkIdentifier, [\"prevent\"])\n          }, [\n            withDirectives(createBaseVNode(\"input\", {\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => identifierText.value = $event),\n              type: \"text\",\n              class: normalizeClass([\"input psg-input\", { \"is-danger\": error.value }]),\n              part: \"input\",\n              autocomplete: autocomplete.value,\n              inputmode: inputMode.value,\n              id: \"identifier\",\n              placeholder: placeholder.value,\n              onInput: withModifiers(clearErrors, [\"prevent\"]),\n              \"data-test\": \"identifier-input\",\n              ref_key: \"identifierInput\",\n              ref: identifierInput\n            }, null, 42, _hoisted_5$d), [\n              [vModelText, identifierText.value]\n            ])\n          ], 40, _hoisted_4$e),\n          renderSlot(_ctx.$slots, \"loginInput\")\n        ], 512), [\n          [vShow, !_ctx.showWelcomeBack]\n        ]),\n        createBaseVNode(\"div\", {\n          ref_key: \"controlContainer\",\n          ref: controlContainer,\n          style: { \"width\": \"100%\" }\n        }, null, 512),\n        createBaseVNode(\"div\", {\n          style: normalizeStyle(`text-align: ${showWelcomeUI.value ? \"center\" : \"left\"};`),\n          class: \"help is-danger error-message\",\n          \"data-test\": \"validation-error\"\n        }, toDisplayString(error.value), 5),\n        renderSlot(_ctx.$slots, \"metadataFields\"),\n        createBaseVNode(\"div\", _hoisted_6$b, [\n          createBaseVNode(\"button\", {\n            class: \"button is-primary\",\n            part: \"button\",\n            \"data-test\": \"continue-button\",\n            ref_key: \"autofocusButton\",\n            ref: autofocusButton,\n            onClick: withModifiers(checkIdentifier, [\"prevent\"])\n          }, toDisplayString(unref(t)(\"continue\")), 9, _hoisted_7$b)\n        ]),\n        showWelcomeUI.value ? (openBlock(), createElementBlock(\"div\", _hoisted_8$8, [\n          createBaseVNode(\"a\", {\n            onClick: withModifiers(switchAccount, [\"prevent\"]),\n            role: \"button\",\n            \"data-test\": \"register-link\"\n          }, toDisplayString(unref(t)(\"switch-account\")), 9, _hoisted_9$7)\n        ])) : createCommentVNode(\"\", true)\n      ]);\n    };\n  }\n});\nvar OnEventType = /* @__PURE__ */ ((OnEventType2) => {\n  OnEventType2[\"onLoaded\"] = \"onLoaded\";\n  OnEventType2[\"onRegisterDevice\"] = \"onRegisterDevice\";\n  OnEventType2[\"onVerifyIdentity\"] = \"onVerifyIdentity\";\n  OnEventType2[\"onMagicLinkLogin\"] = \"onMagicLinkLogin\";\n  OnEventType2[\"onMagicLinkRegister\"] = \"onMagicLinkRegister\";\n  OnEventType2[\"onMagicLinkActivated\"] = \"onMagicLinkActivated\";\n  OnEventType2[\"onMagicLinkActivateSuccess\"] = \"onMagicLinkActivateSuccess\";\n  OnEventType2[\"onOneTimePasscodeLogin\"] = \"onOneTimePasscodeLogin\";\n  OnEventType2[\"onOneTimePasscodeRegister\"] = \"onOneTimePasscodeRegister\";\n  OnEventType2[\"onOneTimePasscodeActivated\"] = \"onOneTimePasscodeActivated\";\n  OnEventType2[\"onOneTimePasscodeActivateSuccess\"] = \"onOneTimePasscodeActivateSuccess\";\n  return OnEventType2;\n})(OnEventType || {});\nconst defaultBeforeAuth = () => {\n  return true;\n};\nconst defaultOnSuccess = (authResult2) => {\n  window.location.href = authResult2.redirect_url;\n};\nconst defaultOnEvent = () => {\n  return;\n};\nconst beforeAuth = ref(defaultBeforeAuth);\nconst onSuccess = ref(defaultOnSuccess);\nconst onEvent = ref(defaultOnEvent);\nfunction setBeforeAuth(newBeforeAuth) {\n  if (newBeforeAuth === void 0) {\n    beforeAuth.value = defaultBeforeAuth;\n    return;\n  }\n  beforeAuth.value = newBeforeAuth;\n}\nfunction setOnSuccess(newOnSuccess) {\n  if (newOnSuccess === void 0) {\n    onSuccess.value = defaultOnSuccess;\n    return;\n  }\n  onSuccess.value = newOnSuccess;\n}\nfunction setOnEvent(newOnEvent) {\n  if (newOnEvent === void 0) {\n    onEvent.value = defaultOnEvent;\n    return;\n  }\n  onEvent.value = newOnEvent;\n}\nfunction useCallbacks() {\n  return {\n    beforeAuth: readonly(beforeAuth),\n    onSuccess: readonly(onSuccess),\n    onEvent: readonly(onEvent),\n    setBeforeAuth,\n    setOnSuccess,\n    setOnEvent\n  };\n}\nconst storageKey = \"psg_last_login\";\nfunction getLastLogin() {\n  return localStorage.getItem(storageKey);\n}\nfunction storeLastLogin(identiferOrUserInfo) {\n  return __async(this, null, function* () {\n    if (identiferOrUserInfo && typeof identiferOrUserInfo === \"string\") {\n      localStorage.setItem(storageKey, identiferOrUserInfo);\n      return;\n    }\n    let currentInfo = identiferOrUserInfo;\n    if (identiferOrUserInfo === void 0) {\n      const { appId } = useAppId();\n      const passage = new Y(appId.value);\n      currentInfo = yield passage.getCurrentUser().userInfo();\n    }\n    if (currentInfo === void 0) {\n      return;\n    }\n    localStorage.setItem(storageKey, currentInfo.email ? currentInfo.email : currentInfo.phone);\n  });\n}\nfunction createdUserEventHandler(payload, eventHandlerState) {\n  const { webauthnAllowed, appInfo, router } = eventHandlerState;\n  const { identifier, identifierType } = payload;\n  const { emitEvent: emitEvent2 } = useAuthEvent();\n  if (!webauthnAllowed || appInfo.require_identifier_verification) {\n    emitEvent2({\n      type: AuthEventType.FallbackAuth,\n      payload: {\n        identifier,\n        identifierType,\n        identifierVerifying: appInfo.require_identifier_verification,\n        userIsRegistering: true,\n        userInitiated: false\n      }\n    });\n    return;\n  }\n  useCallbacks().onEvent.value(OnEventType.onRegisterDevice, { identifier });\n  router.push(RegisterDeviceRoute, { identifier, identifierType, appInfo });\n}\nfunction changeIdenfitierEventHandler(eventHandlerState) {\n  const { appInfo, router, browserFeatures } = eventHandlerState;\n  router.push(router.homeRoute, { appInfo, conditionalUI: browserFeatures.conditionalUI, changeEmail: true });\n}\nfunction isWebauthnGetMonkeypatched() {\n  const isGetNative = navigator.credentials.get.toString().includes(\"[native code]\");\n  return !isGetNative;\n}\nfunction loginUserEventHandler(payload, eventHandlerState) {\n  return __async(this, null, function* () {\n    const { browserFeatures, appInfo, router } = eventHandlerState;\n    const { appId } = useAppId();\n    const passage = new Y(appId.value);\n    const { emitEvent: emitEvent2 } = useAuthEvent();\n    const { identifier, identifierType, userHasPasskey, userHasWebauthn, emailVerified, phoneVerified, userID } = payload;\n    const noFallback = appInfo.auth_fallback_method === ue.None;\n    if (!userHasWebauthn && noFallback) {\n      router.push(LoginNotSupportedRoute);\n      return;\n    }\n    const verificationRequired = userNeedsToVerify(appInfo, emailVerified, phoneVerified, identifierType);\n    const canTryPlaform = browserFeatures.platform && userHasWebauthn && passage.credIDExists(userID);\n    const canTryPasskey = browserFeatures.syncedCredential && userHasPasskey;\n    const tryWebauthnWithNoFallback = browserFeatures.platform && noFallback;\n    const tryNonNativeWebauthn = userHasPasskey && browserFeatures.platform && isWebauthnGetMonkeypatched();\n    const canTryWebAuthn = !verificationRequired && (canTryPasskey || canTryPlaform || tryWebauthnWithNoFallback || tryNonNativeWebauthn);\n    if (canTryWebAuthn) {\n      useCallbacks().onEvent.value(OnEventType.onVerifyIdentity);\n      router.push(WebauthnSignInRoute, { identifier, identifierType, appInfo });\n    } else {\n      emitEvent2({\n        type: AuthEventType.FallbackAuth,\n        payload: {\n          identifier,\n          identifierType,\n          userInitiated: false,\n          identifierVerifying: verificationRequired,\n          setupNewDevice: browserFeatures.platform\n        }\n      });\n    }\n  });\n}\nfunction userNeedsToVerify(appInfo, emailVerified, phoneVerified, identifierType) {\n  if (appInfo.require_identifier_verification) {\n    if (identifierType === IdentifierType.email && !emailVerified || identifierType === IdentifierType.phone && !phoneVerified) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction fallbackAuthEventHandler(payload, eventHandlerState) {\n  const { authState, appInfo, router } = eventHandlerState;\n  authState.userInitiatedFallback = payload.userInitiated;\n  switch (appInfo.auth_fallback_method) {\n    case ue.LoginCode:\n      otpCallback(payload);\n      router.push(OneTimePasscodeRoute, payload);\n      break;\n    case ue.MagicLink:\n      magicLinkCallback(payload);\n      router.push(MagicLinkRoute, payload);\n      break;\n    case ue.None:\n      router.push(DisableFallbacksRoute);\n      break;\n  }\n}\nfunction magicLinkCallback(payload) {\n  const { identifier, userIsRegistering } = payload;\n  if (userIsRegistering) {\n    useCallbacks().onEvent.value(OnEventType.onMagicLinkRegister, { identifier });\n  } else {\n    useCallbacks().onEvent.value(OnEventType.onMagicLinkLogin);\n  }\n}\nfunction otpCallback(payload) {\n  const { identifier, userIsRegistering } = payload;\n  if (userIsRegistering) {\n    useCallbacks().onEvent.value(OnEventType.onOneTimePasscodeRegister, { identifier });\n  } else {\n    useCallbacks().onEvent.value(OnEventType.onOneTimePasscodeLogin);\n  }\n}\nfunction authSuccessEventHandler(payload) {\n  return __async(this, null, function* () {\n    if (isStringNullish(payload.authResult.auth_token) || isStringNullish(payload.authResult.redirect_url)) {\n      return;\n    }\n    yield storeLastLogin(payload.identifier);\n    useCallbacks().onSuccess.value(payload.authResult);\n  });\n}\nfunction fallbackAuthSuccessEventHandler(payload, eventHandlerState) {\n  const { webauthnAllowed, authState, router } = eventHandlerState;\n  if (webauthnAllowed && !authState.userInitiatedFallback) {\n    router.push(AddDeviceRoute, payload);\n    return;\n  }\n  useAuthEvent().emitEvent({\n    type: AuthEventType.AuthSuccess,\n    payload\n  });\n}\nfunction isSafariVersionLessThan164() {\n  const userAgent = new UAParser();\n  return userAgent.getBrowser().name == \"Safari\" && parseFloat(userAgent.getBrowser().version || \"\") < 16.4;\n}\nvar AuthEventType = /* @__PURE__ */ ((AuthEventType2) => {\n  AuthEventType2[\"CreatedUser\"] = \"CreatedUser\";\n  AuthEventType2[\"ChangeIdentifier\"] = \"ChangeIdentifier\";\n  AuthEventType2[\"LoginUser\"] = \"LoginUser\";\n  AuthEventType2[\"FallbackAuth\"] = \"FallbackAuth\";\n  AuthEventType2[\"AuthSuccess\"] = \"AuthSuccess\";\n  AuthEventType2[\"FallbackAuthSuccess\"] = \"FallbackAuthSuccess\";\n  return AuthEventType2;\n})(AuthEventType || {});\nclass EventHandler {\n  constructor(appInfo, router) {\n    this.appInfo = appInfo;\n    this.router = router;\n    this.authState = {\n      userInitiatedFallback: false\n    };\n    this.authOriginValid = false;\n    this.browserFeatures = {\n      securityKey: false,\n      platform: false,\n      syncedCredential: false,\n      crossDeviceCredential: false,\n      conditionalUI: false,\n      isAvailable: false\n    };\n  }\n  initializeEventHandler() {\n    return __async(this, null, function* () {\n      const { appId } = useAppId();\n      const passage = new Y(appId.value);\n      this.authOriginValid = passage.checkWebauthnConfig(this.appInfo);\n      if (this.authOriginValid) {\n        this.browserFeatures = yield passage.getCredentialAvailable();\n        if (isSafariVersionLessThan164()) {\n          this.browserFeatures.conditionalUI = false;\n        }\n      }\n      if (!this.checkMagicLink()) {\n        this.router.push(this.router.homeRoute, {\n          appInfo: this.appInfo,\n          conditionalUI: this.browserFeatures.conditionalUI\n        });\n      }\n    });\n  }\n  handleEvent(event) {\n    return __async(this, null, function* () {\n      switch (event.type) {\n        case \"CreatedUser\":\n          createdUserEventHandler(event.payload, this.eventHandlerState);\n          break;\n        case \"ChangeIdentifier\":\n          changeIdenfitierEventHandler(this.eventHandlerState);\n          break;\n        case \"LoginUser\":\n          loginUserEventHandler(event.payload, this.eventHandlerState);\n          break;\n        case \"FallbackAuth\":\n          fallbackAuthEventHandler(event.payload, this.eventHandlerState);\n          break;\n        case \"AuthSuccess\":\n          authSuccessEventHandler(event.payload);\n          break;\n        case \"FallbackAuthSuccess\":\n          fallbackAuthSuccessEventHandler(event.payload, this.eventHandlerState);\n          break;\n      }\n    });\n  }\n  get eventHandlerState() {\n    return {\n      appInfo: this.appInfo,\n      webauthnAllowed: this.browserFeatures.platform,\n      router: this.router,\n      authState: this.authState,\n      browserFeatures: this.browserFeatures\n    };\n  }\n  checkMagicLink() {\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    let magicLink = null;\n    if (urlParams.has(\"psg_magic_link\")) {\n      magicLink = urlParams.get(\"psg_magic_link\");\n    } else if (urlParams.has(\"psg_verify_link\")) {\n      magicLink = urlParams.get(\"psg_verify_link\");\n    }\n    if (magicLink !== null) {\n      this.router.push(ActivateMagicLinkRoute, { magicLink, webauthnAllowed: this.browserFeatures.platform });\n      return true;\n    }\n    return false;\n  }\n}\nlet eventHandler = void 0;\nfunction initEventHandler(appInfo, router) {\n  return __async(this, null, function* () {\n    eventHandler = new EventHandler(appInfo, router);\n    yield eventHandler.initializeEventHandler();\n  });\n}\nfunction getEventHandler() {\n  return eventHandler;\n}\nfunction emitEvent(event) {\n  return __async(this, null, function* () {\n    return eventHandler == null ? void 0 : eventHandler.handleEvent(event);\n  });\n}\nfunction useAuthEvent() {\n  return {\n    initEventHandler,\n    getEventHandler,\n    emitEvent\n  };\n}\nconst _sfc_main$t = defineComponent({\n  __name: \"Login\",\n  props: {\n    canToggleLoginRegister: { type: Boolean },\n    identifier: {},\n    countryCode: {},\n    appInfo: {},\n    visible: { type: Boolean },\n    conditionalUI: { type: Boolean },\n    changeEmail: { type: Boolean }\n  },\n  emits: [\"update:identifier\", \"update:countryCode\"],\n  setup(__props, { emit }) {\n    const props = __props;\n    const { appId } = useAppId();\n    const { t } = useLocale();\n    const error = ref(\"\");\n    const identifierText = computed({\n      get() {\n        return props.identifier;\n      },\n      set(newIdentifier) {\n        emit(\"update:identifier\", newIdentifier);\n      }\n    });\n    const countryCodeText = computed({\n      get() {\n        return props.countryCode;\n      },\n      set(newCountryCode) {\n        emit(\"update:countryCode\", newCountryCode);\n      }\n    });\n    const inputForm = ref();\n    watch(inputForm, () => __async(this, null, function* () {\n      useCallbacks().onEvent.value(OnEventType.onLoaded);\n      triggerConditionalUI();\n    }));\n    const identifierMode = computed(() => {\n      var _a;\n      return (_a = props.appInfo.allowed_identifier) != null ? _a : oe.email;\n    });\n    function onSubmit(event) {\n      return __async(this, null, function* () {\n        const {\n          identifier,\n          identifierExists,\n          userHasWebauthn,\n          userHasPasskey,\n          userStatus,\n          userID,\n          identifierType,\n          emailVerified,\n          phoneVerified\n        } = event;\n        const beforeAuthResult = useCallbacks().beforeAuth.value(identifier);\n        if (!beforeAuthResult) {\n          return;\n        }\n        const errorString = checkIdentifierExistsAndStatus(identifierExists, identifierType, userStatus);\n        if (errorString !== \"\") {\n          error.value = errorString;\n          return;\n        }\n        useAuthEvent().emitEvent({\n          type: AuthEventType.LoginUser,\n          payload: {\n            identifier,\n            identifierType,\n            userHasPasskey,\n            userHasWebauthn,\n            userID,\n            emailVerified,\n            phoneVerified\n          }\n        });\n      });\n    }\n    function checkIdentifierExistsAndStatus(identifierExists, identifierType, userStatus) {\n      if (!identifierExists) {\n        let identiferString = identifierType === IdentifierType.email ? t(\"email\") : t(\"phone\");\n        identiferString = `${identiferString.charAt(0).toUpperCase()}${identiferString.slice(1)}`;\n        let message = `${t(\"not-recognized\", [identiferString])}.`;\n        if (props.canToggleLoginRegister && props.appInfo.public_signup) {\n          message = `${message} ${t(\"toggle-register\")}`;\n        }\n        return message;\n      }\n      if (identifierExists && userStatus === te.INACTIVE) {\n        return t(\"account-no-longer-active\");\n      }\n      return \"\";\n    }\n    const showWelcomeBack = ref(false);\n    let abortController;\n    onMounted(() => {\n      const lastLogin = getLastLogin();\n      if (lastLogin && !props.changeEmail) {\n        identifierText.value = lastLogin;\n        showWelcomeBack.value = true;\n      }\n    });\n    function triggerConditionalUI() {\n      return __async(this, null, function* () {\n        if (props.conditionalUI) {\n          abortController = new AbortController();\n          const passage = new Y(appId.value);\n          passage.loginConditional(abortController.signal).then((authResult) => {\n            useAuthEvent().emitEvent({\n              type: AuthEventType.AuthSuccess,\n              payload: {\n                authResult\n              }\n            });\n          }).catch(() => {\n          });\n        }\n      });\n    }\n    function cancelConditionalUI() {\n      abortController == null ? void 0 : abortController.abort();\n    }\n    onBeforeUnmount(() => {\n      cancelConditionalUI();\n    });\n    watch(\n      () => props.visible,\n      () => {\n        if (showWelcomeBack.value === true) {\n          identifierText.value = \"\";\n        }\n        showWelcomeBack.value = false;\n        if (props.visible) {\n          triggerConditionalUI();\n        } else {\n          cancelConditionalUI();\n        }\n      }\n    );\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$u, {\n        appId: unref(appId),\n        identifierMode: identifierMode.value,\n        conditionalUI: _ctx.conditionalUI,\n        showWelcomeBack: showWelcomeBack.value,\n        \"onUpdate:showWelcomeBack\": _cache[0] || (_cache[0] = ($event) => showWelcomeBack.value = $event),\n        identifier: identifierText.value,\n        \"onUpdate:identifier\": _cache[1] || (_cache[1] = ($event) => identifierText.value = $event),\n        validationError: error.value,\n        \"onUpdate:validationError\": _cache[2] || (_cache[2] = ($event) => error.value = $event),\n        countryCode: countryCodeText.value,\n        \"onUpdate:countryCode\": _cache[3] || (_cache[3] = ($event) => countryCodeText.value = $event),\n        onOnSubmit: _cache[4] || (_cache[4] = ($event) => onSubmit($event)),\n        ref_key: \"inputForm\",\n        ref: inputForm\n      }, {\n        loginInput: withCtx(() => [\n          renderSlot(_ctx.$slots, \"loginInput\")\n        ]),\n        _: 3\n      }, 8, [\"appId\", \"identifierMode\", \"conditionalUI\", \"showWelcomeBack\", \"identifier\", \"validationError\", \"countryCode\"]);\n    };\n  }\n});\nconst _hoisted_1$p = {\n  key: 0,\n  class: \"notification is-danger has-text-centered\",\n  \"data-test\": \"invalid-app-id\"\n};\nconst _sfc_main$s = defineComponent({\n  __name: \"Register\",\n  props: {\n    canToggleLoginRegister: { type: Boolean },\n    identifier: {},\n    countryCode: {},\n    appInfo: {}\n  },\n  emits: [\"update:identifier\", \"update:countryCode\", \"authEvent\"],\n  setup(__props, { emit }) {\n    const props = __props;\n    const { t } = useLocale();\n    const { appId } = useAppId();\n    const { emitEvent: emitEvent2 } = useAuthEvent();\n    const error = ref(\"\");\n    const identifierText = computed({\n      get() {\n        return props.identifier;\n      },\n      set(newIdentifier) {\n        emit(\"update:identifier\", newIdentifier);\n      }\n    });\n    const countryCodeText = computed({\n      get() {\n        return props.countryCode;\n      },\n      set(newCountryCode) {\n        emit(\"update:countryCode\", newCountryCode);\n      }\n    });\n    const publicSignup = computed(() => {\n      return props.appInfo.public_signup;\n    });\n    const identifierMode = computed(() => {\n      return props.appInfo.allowed_identifier;\n    });\n    function onSubmit(event) {\n      return __async(this, null, function* () {\n        const { identifier, identifierExists, userStatus, identifierType } = event;\n        const beforeAuthResult = useCallbacks().beforeAuth.value(identifier);\n        if (!beforeAuthResult) {\n          return;\n        }\n        let validMetadata = true;\n        if (metadataComponent.value) {\n          validMetadata = metadataComponent.value.validate();\n        }\n        if (identifierExists) {\n          if (userStatus === te.ACTIVE) {\n            let message = t(\"account-already-exists\", [\n              identifierType === IdentifierType.email ? t(\"email\") : t(\"phone-number\")\n            ]);\n            if (props.canToggleLoginRegister) {\n              message = message + \" \" + t(\"toggle-login\");\n            }\n            error.value = message;\n            return;\n          } else if (userStatus === te.INACTIVE) {\n            error.value = t(\"account-no-longer-active\");\n            return;\n          }\n        }\n        const passage = new Y(appId.value);\n        if (!validMetadata) {\n          return;\n        }\n        try {\n          yield passage.createUser({\n            identifier,\n            user_metadata: transformMetadata(metadata.value, props.appInfo.user_metadata_schema, true)\n          });\n        } catch (err) {\n          if (err instanceof h && err.message.startsWith(\"Public signup\")) {\n            error.value = err.message;\n          } else {\n            error.value = t(\"unexpected-error\");\n          }\n          return;\n        }\n        emitEvent2({\n          type: AuthEventType.CreatedUser,\n          payload: {\n            identifier,\n            identifierType\n          }\n        });\n      });\n    }\n    const metadata = ref({});\n    const metadataComponent = ref();\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", null, [\n        createVNode(_sfc_main$u, {\n          appId: unref(appId),\n          identifierMode: identifierMode.value,\n          identifier: identifierText.value,\n          \"onUpdate:identifier\": _cache[0] || (_cache[0] = ($event) => identifierText.value = $event),\n          validationError: error.value,\n          \"onUpdate:validationError\": _cache[1] || (_cache[1] = ($event) => error.value = $event),\n          countryCode: countryCodeText.value,\n          \"onUpdate:countryCode\": _cache[2] || (_cache[2] = ($event) => countryCodeText.value = $event),\n          onOnSubmit: _cache[3] || (_cache[3] = ($event) => onSubmit($event))\n        }, {\n          metadataFields: withCtx(() => [\n            _ctx.appInfo && _ctx.appInfo.layouts.registration.length > 0 ? (openBlock(), createBlock(UserMetadata, {\n              key: 0,\n              isEditing: true,\n              appInfo: _ctx.appInfo,\n              layoutType: unref(LayoutType).Registration,\n              userMetadata: metadata.value,\n              ref_key: \"metadataComponent\",\n              ref: metadataComponent\n            }, null, 8, [\"appInfo\", \"layoutType\", \"userMetadata\"])) : createCommentVNode(\"\", true)\n          ]),\n          _: 1\n        }, 8, [\"appId\", \"identifierMode\", \"identifier\", \"validationError\", \"countryCode\"]),\n        !publicSignup.value ? (openBlock(), createElementBlock(\"div\", _hoisted_1$p, toDisplayString(unref(t)(\"public-registration-not-allowed\")), 1)) : createCommentVNode(\"\", true)\n      ]);\n    };\n  }\n});\nconst ephemeralAppIdKey = \"psg_ephemeral_app_id\";\nconst ephemeralAppNameKey = \"psg_ephemeral_app_name\";\nclass EphemeralAppService {\n  newEphemeralApp() {\n    return __async(this, null, function* () {\n      const ephemeralAppUrl = \"https://api.passage.id/v1/apps/\";\n      const response = yield fetch(ephemeralAppUrl, {\n        method: \"POST\",\n        body: JSON.stringify({\n          auth_origin: window.location.origin,\n          name: \"Ephemeral Random \" + (Math.random() * 1e6).toString()\n        })\n      });\n      const responseBody = yield response.json();\n      if (response.status !== 200) {\n        throw responseBody.message;\n      }\n      localStorage.setItem(ephemeralAppIdKey, responseBody.app.id);\n      localStorage.setItem(ephemeralAppNameKey, responseBody.app.name);\n      return responseBody;\n    });\n  }\n}\nconst _sfc_main$r = defineComponent({\n  name: \"EphemeralAppInfo\",\n  setup() {\n    const consoleUrl = \"https://console.passage.id\";\n    const { t } = useLocale();\n    const error = ref(false);\n    const isEphemeral = ref(false);\n    const claimed = ref(false);\n    const ephemeralClaimUrl = ref(\"\");\n    const exampleTag = ref(\"\");\n    const passageWebSetup = () => __async(this, null, function* () {\n      const { appIdUnassigned, updateAppId } = useAppId();\n      if (appIdUnassigned.value) {\n        isEphemeral.value = true;\n        const ephemeralAppId = localStorage.getItem(ephemeralAppIdKey);\n        const ephemeralAppName = localStorage.getItem(ephemeralAppNameKey);\n        if (ephemeralAppId) {\n          const nameParam = ephemeralAppName ? `?name=${encodeURIComponent(ephemeralAppName)}` : \"\";\n          ephemeralClaimUrl.value = `${consoleUrl}/claim/${ephemeralAppId}${nameParam}`;\n          updateAppId(ephemeralAppId);\n          logToConsole();\n        } else {\n          try {\n            const ephemeralService = new EphemeralAppService();\n            const res = yield ephemeralService.newEphemeralApp();\n            updateAppId(res.app.id);\n            const nameParam = res.app.name ? `?name=${encodeURIComponent(res.app.name)}` : \"\";\n            ephemeralClaimUrl.value = `${consoleUrl}/claim/${res.app.id}${nameParam}`;\n            logToConsole();\n          } catch (err) {\n            error.value = true;\n            updateAppId(\"\");\n          }\n        }\n      }\n    });\n    const checkIfClaimed = () => __async(this, null, function* () {\n      const { appId } = useAppId();\n      if (!isEphemeral.value) {\n        return;\n      }\n      const passage = new Y(appId.value);\n      try {\n        const res = yield passage.appInfo();\n        if (!res.ephemeral) {\n          claimed.value = true;\n          exampleTag.value = `<passage-auth app-id=\"${appId.value}\"/>`;\n        }\n      } catch (e) {\n        error.value = true;\n      }\n    });\n    function logToConsole() {\n      const { appId } = useAppId();\n      console.info(`Passage Test App ID: ${appId.value}`);\n      console.info(`Claim your app: ${ephemeralClaimUrl.value}`);\n    }\n    onBeforeMount(() => __async(this, null, function* () {\n      yield passageWebSetup();\n      yield checkIfClaimed();\n    }));\n    return {\n      error,\n      isEphemeral,\n      claimed,\n      ephemeralClaimUrl,\n      exampleTag,\n      t\n    };\n  }\n});\nconst _hoisted_1$o = { key: 0 };\nconst _hoisted_2$g = {\n  key: 0,\n  class: \"notification is-danger\"\n};\nconst _hoisted_3$e = {\n  key: 1,\n  class: \"notification ephemeral-box\",\n  \"data-test\": \"ephemeral-app-message\"\n};\nconst _hoisted_4$d = { key: 0 };\nconst _hoisted_5$c = [\"href\"];\nconst _hoisted_6$a = { key: 1 };\nconst _hoisted_7$a = /* @__PURE__ */ createBaseVNode(\"br\", null, null, -1);\nfunction _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  return _ctx.isEphemeral ? (openBlock(), createElementBlock(\"div\", _hoisted_1$o, [\n    _ctx.error ? (openBlock(), createElementBlock(\"div\", _hoisted_2$g, toDisplayString(_ctx.t(\"unable-to-create-test-app\")), 1)) : (openBlock(), createElementBlock(\"div\", _hoisted_3$e, [\n      !_ctx.claimed ? (openBlock(), createElementBlock(\"div\", _hoisted_4$d, [\n        createTextVNode(toDisplayString(_ctx.t(\"currently-using-test-app\")) + \" \", 1),\n        createBaseVNode(\"a\", {\n          href: _ctx.ephemeralClaimUrl,\n          target: \"_blank\"\n        }, toDisplayString(_ctx.t(\"click-here\")), 9, _hoisted_5$c),\n        createTextVNode(\".\")\n      ])) : (openBlock(), createElementBlock(\"div\", _hoisted_6$a, [\n        createTextVNode(toDisplayString(_ctx.t(\"add-your-claimed-app-like-this\")) + \" \", 1),\n        _hoisted_7$a,\n        createTextVNode(toDisplayString(_ctx.exampleTag), 1)\n      ]))\n    ]))\n  ])) : createCommentVNode(\"\", true);\n}\nvar EphemeralAppInfo = /* @__PURE__ */ _export_sfc(_sfc_main$r, [[\"render\", _sfc_render$1]]);\nconst _hoisted_1$n = {\n  key: 0,\n  class: \"link has-text-centered\"\n};\nconst _hoisted_2$f = { class: \"passage-branding\" };\nconst _hoisted_3$d = {\n  href: \"https://passage.1password.com/\",\n  target: \"_new_tab\"\n};\nconst _sfc_main$q = defineComponent({\n  __name: \"PassageBranding\",\n  props: {\n    appInfo: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return _ctx.appInfo.passage_branding ? (openBlock(), createElementBlock(\"div\", _hoisted_1$n, [\n        createBaseVNode(\"div\", _hoisted_2$f, [\n          createBaseVNode(\"a\", _hoisted_3$d, [\n            createVNode(unref(InlineSvg), {\n              src: unref(Icons).poweredByPassage,\n              alt: \"Powered by Passage Icon\"\n            }, null, 8, [\"src\"])\n          ])\n        ])\n      ])) : createCommentVNode(\"\", true);\n    };\n  }\n});\nconst _hoisted_1$m = { class: \"view-email-input\" };\nconst _hoisted_2$e = { class: \"auth-flex-container\" };\nconst _hoisted_3$c = { class: \"title main-title has-text-centered\" };\nconst _hoisted_4$c = /* @__PURE__ */ createBaseVNode(\"div\", { style: { \"height\": \"20px\" } }, null, -1);\nconst _hoisted_5$b = { class: \"spacer\" };\nconst _hoisted_6$9 = { class: \"link has-text-centered\" };\nconst _hoisted_7$9 = { key: 0 };\nconst _hoisted_8$7 = [\"onClick\"];\nconst _hoisted_9$6 = { key: 1 };\nconst _hoisted_10$4 = [\"onClick\"];\nconst _sfc_main$p = defineComponent({\n  __name: \"AuthView\",\n  props: {\n    register: { type: Boolean },\n    appInfo: {},\n    conditionalUI: { type: Boolean },\n    changeEmail: { type: Boolean }\n  },\n  setup(__props) {\n    const props = __props;\n    const { t } = useLocale();\n    const showLogin = ref(!props.register);\n    const identifier = ref(\"\");\n    const { defaultCountryCode } = useDefaultCountryCode();\n    const countryCode = defaultCountryCode;\n    const publicSignup = computed(() => {\n      return props.appInfo.public_signup;\n    });\n    function changeInputPage() {\n      showLogin.value = !showLogin.value;\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$m, [\n        createBaseVNode(\"div\", _hoisted_2$e, [\n          createBaseVNode(\"div\", _hoisted_3$c, toDisplayString(showLogin.value ? unref(t)(\"login-title\") : unref(t)(\"register-title\")), 1),\n          _hoisted_4$c,\n          withDirectives(createVNode(_sfc_main$t, {\n            identifier: identifier.value,\n            \"onUpdate:identifier\": _cache[0] || (_cache[0] = ($event) => identifier.value = $event),\n            canToggleLoginRegister: true,\n            countryCode: unref(countryCode),\n            \"onUpdate:countryCode\": _cache[1] || (_cache[1] = ($event) => isRef(countryCode) ? countryCode.value = $event : null),\n            appInfo: _ctx.appInfo,\n            visible: showLogin.value,\n            conditionalUI: _ctx.conditionalUI,\n            changeEmail: _ctx.changeEmail\n          }, {\n            loginInput: withCtx(() => [\n              renderSlot(_ctx.$slots, \"loginInput\")\n            ]),\n            _: 3\n          }, 8, [\"identifier\", \"countryCode\", \"appInfo\", \"visible\", \"conditionalUI\", \"changeEmail\"]), [\n            [vShow, showLogin.value]\n          ]),\n          withDirectives(createVNode(_sfc_main$s, {\n            identifier: identifier.value,\n            \"onUpdate:identifier\": _cache[2] || (_cache[2] = ($event) => identifier.value = $event),\n            canToggleLoginRegister: true,\n            countryCode: unref(countryCode),\n            \"onUpdate:countryCode\": _cache[3] || (_cache[3] = ($event) => isRef(countryCode) ? countryCode.value = $event : null),\n            appInfo: _ctx.appInfo\n          }, null, 8, [\"identifier\", \"countryCode\", \"appInfo\"]), [\n            [vShow, !showLogin.value]\n          ]),\n          createBaseVNode(\"div\", _hoisted_5$b, [\n            createVNode(EphemeralAppInfo)\n          ]),\n          createBaseVNode(\"div\", _hoisted_6$9, [\n            showLogin.value && publicSignup.value ? (openBlock(), createElementBlock(\"div\", _hoisted_7$9, [\n              createTextVNode(toDisplayString(unref(t)(\"dont-have-an-account\")) + \" \", 1),\n              createBaseVNode(\"a\", {\n                onClick: withModifiers(changeInputPage, [\"prevent\"]),\n                role: \"button\",\n                \"data-test\": \"register-link\"\n              }, toDisplayString(unref(t)(\"register-here\")), 9, _hoisted_8$7)\n            ])) : !showLogin.value ? (openBlock(), createElementBlock(\"div\", _hoisted_9$6, [\n              createTextVNode(toDisplayString(unref(t)(\"already-have-an-account\")) + \" \", 1),\n              createBaseVNode(\"a\", {\n                onClick: withModifiers(changeInputPage, [\"prevent\"]),\n                role: \"button\",\n                \"data-test\": \"login-link\"\n              }, toDisplayString(unref(t)(\"login-here\")), 9, _hoisted_10$4)\n            ])) : createCommentVNode(\"\", true)\n          ])\n        ]),\n        createVNode(_sfc_main$q, { \"app-info\": _ctx.appInfo }, null, 8, [\"app-info\"])\n      ]);\n    };\n  }\n});\nfunction useUIState() {\n  const showFailure = ref(false);\n  const showSuccess = ref(false);\n  const loading = ref(false);\n  const pageLoading = ref(true);\n  const { t } = useLocale();\n  const title = computed(() => {\n    if (showSuccess.value) {\n      return t(\"success\");\n    }\n    if (showFailure.value) {\n      return t(\"something-went-wrong\");\n    }\n    return t(\"log-in-with-a-passkey\");\n  });\n  const uiSuccess = () => {\n    showSuccess.value = true;\n    showFailure.value = false;\n    loading.value = false;\n  };\n  const uiError = () => {\n    showSuccess.value = false;\n    showFailure.value = true;\n    loading.value = false;\n  };\n  const uiLoading = () => {\n    showSuccess.value = false;\n    showFailure.value = false;\n    loading.value = true;\n  };\n  return {\n    showFailure,\n    showSuccess,\n    loading,\n    pageLoading,\n    title,\n    uiSuccess,\n    uiError,\n    uiLoading\n  };\n}\nvar MagicLinkActionEnum = /* @__PURE__ */ ((MagicLinkActionEnum2) => {\n  MagicLinkActionEnum2[\"LOGIN\"] = \"psg_magic_link\";\n  MagicLinkActionEnum2[\"VERIFY\"] = \"psg_verify_link\";\n  return MagicLinkActionEnum2;\n})(MagicLinkActionEnum || {});\nconst useMagicLinkUtils = (magicLink) => {\n  const magicLinkAction = ref();\n  const invalidMagicLink = ref(false);\n  const isMagicLinkValid = () => {\n    const searchParams = new URLSearchParams(window.location.href.split(\"?\")[1]);\n    if (searchParams.has(\"psg_magic_link\")) {\n      magicLinkAction.value = \"psg_magic_link\";\n    } else if (searchParams.has(\"psg_verify_link\")) {\n      magicLinkAction.value = \"psg_verify_link\";\n    }\n    if (!magicLinkAction.value || !magicLink) {\n      invalidMagicLink.value = true;\n    }\n    return !invalidMagicLink.value;\n  };\n  return {\n    magicLinkAction,\n    invalidMagicLink,\n    isMagicLinkValid\n  };\n};\nconst useMagicLinkActivation = ({ magicLink, uiState, magicLinkUtils, passage }) => {\n  const authResult2 = ref(null);\n  const onBeforeActivate = () => {\n    uiState.uiLoading();\n    authResult2.value = { auth_token: \"\", redirect_url: \"\" };\n  };\n  const onActivateError = () => {\n    uiState.uiError();\n  };\n  const onActivateErrorInvalidMagicLink = () => {\n    magicLinkUtils.invalidMagicLink.value = true;\n    uiState.uiError();\n  };\n  const onActivateSuccess = (_0) => __async(void 0, [_0], function* ({\n    webauthnAllowed,\n    magicLinkAction,\n    result\n  }) {\n    authResult2.value = result;\n    if (!webauthnAllowed || magicLinkAction === MagicLinkActionEnum.VERIFY) {\n      uiState.uiSuccess();\n      yield new Promise((resolve) => {\n        setTimeout(resolve, 2e3);\n      });\n    }\n    if (authResult2.value.redirect_url) {\n      useAuthEvent().emitEvent({\n        type: magicLinkAction === MagicLinkActionEnum.VERIFY ? AuthEventType.AuthSuccess : AuthEventType.FallbackAuthSuccess,\n        payload: {\n          authResult: result\n        }\n      });\n    }\n  });\n  const activateWithoutBiometrics = (webauthnAllowed, magicLinkAction) => __async(void 0, null, function* () {\n    onBeforeActivate();\n    try {\n      const result = yield passage.magicLinkActivate(magicLink);\n      onActivateSuccess({ webauthnAllowed, magicLinkAction, result });\n    } catch (err) {\n      if (err.statusCode === T.NotFound) {\n        onActivateErrorInvalidMagicLink();\n      } else {\n        onActivateError();\n      }\n    }\n  });\n  return {\n    authResult: authResult2,\n    onBeforeActivate,\n    onActivateError,\n    onActivateErrorInvalidMagicLink,\n    onActivateSuccess,\n    activateWithoutBiometrics\n  };\n};\nconst _hoisted_1$l = { class: \"auth-flex-container\" };\nconst _hoisted_2$d = { class: \"image has-text-centered\" };\nconst _hoisted_3$b = {\n  class: \"content has-text-centered\",\n  \"data-test\": \"activate-magic-link-message\"\n};\nconst _hoisted_4$b = { key: 0 };\nconst _hoisted_5$a = { key: 1 };\nconst _hoisted_6$8 = { key: 2 };\nconst _hoisted_7$8 = { key: 3 };\nconst _hoisted_8$6 = { key: 4 };\nconst _hoisted_9$5 = {\n  key: 0,\n  class: \"flex-row flex-center\",\n  style: { \"padding\": \"20px 0px\" }\n};\nconst _hoisted_10$3 = [\"onClick\", \"disabled\"];\nconst _hoisted_11$3 = { key: 0 };\nconst _hoisted_12$3 = { key: 1 };\nconst _hoisted_13$3 = { key: 2 };\nconst _sfc_main$o = defineComponent({\n  __name: \"ActivateMagicLink\",\n  props: {\n    magicLink: {},\n    webauthnAllowed: { type: Boolean }\n  },\n  setup(__props) {\n    const props = __props;\n    const { t } = useLocale();\n    const { appId } = useAppId();\n    const passage = new Y(appId.value);\n    const uiState = useUIState();\n    const { showFailure, showSuccess, loading, pageLoading, title } = uiState;\n    const magicLinkUtils = useMagicLinkUtils(props.magicLink);\n    const { isMagicLinkValid, invalidMagicLink, magicLinkAction } = magicLinkUtils;\n    const activation = useMagicLinkActivation({\n      uiState,\n      magicLinkUtils,\n      passage,\n      magicLink: props.magicLink\n    });\n    function onButtonClick() {\n      if (invalidMagicLink.value) {\n        window.location.href = window.location.href.split(\"?\")[0];\n      } else {\n        activation.activateWithoutBiometrics(props.webauthnAllowed, magicLinkAction.value);\n      }\n    }\n    onMounted(() => __async(this, null, function* () {\n      if (isMagicLinkValid()) {\n        yield activation.activateWithoutBiometrics(props.webauthnAllowed, magicLinkAction.value);\n        useCallbacks().onEvent.value(OnEventType.onMagicLinkActivateSuccess);\n      } else {\n        uiState.uiError();\n      }\n      pageLoading.value = false;\n    }));\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(Transition, {\n        name: \"fade\",\n        mode: \"out-in\",\n        appear: \"\"\n      }, {\n        default: withCtx(() => [\n          withDirectives(createBaseVNode(\"div\", _hoisted_1$l, [\n            createBaseVNode(\"div\", {\n              class: normalizeClass([\"title has-text-centered\", [unref(showSuccess) ? \"main-title\" : \"secondary-title\"]])\n            }, toDisplayString(unref(showFailure) ? unref(invalidMagicLink) ? unref(t)(\"invalid-link\") : unref(t)(\"device-login-failed-title\") : unref(title)), 3),\n            createBaseVNode(\"figure\", _hoisted_2$d, [\n              unref(showSuccess) ? (openBlock(), createBlock(unref(InlineSvg), {\n                key: 0,\n                src: unref(Icons).success,\n                alt: \"Magic link success\"\n              }, null, 8, [\"src\"])) : unref(showFailure) ? (openBlock(), createBlock(unref(InlineSvg), {\n                key: 1,\n                src: unref(Icons).failure,\n                alt: \"Magic link failure\"\n              }, null, 8, [\"src\"])) : createCommentVNode(\"\", true)\n            ]),\n            createBaseVNode(\"div\", _hoisted_3$b, [\n              unref(showSuccess) && unref(magicLinkAction) === unref(MagicLinkActionEnum).LOGIN ? (openBlock(), createElementBlock(\"div\", _hoisted_4$b, toDisplayString(unref(t)(\"successfully-logged-in-redirect\")), 1)) : unref(showSuccess) && unref(magicLinkAction) === unref(MagicLinkActionEnum).VERIFY ? (openBlock(), createElementBlock(\"div\", _hoisted_5$a, toDisplayString(unref(t)(\"successfully-changed-email\")), 1)) : unref(showFailure) && unref(invalidMagicLink) && unref(magicLinkAction) === unref(MagicLinkActionEnum).VERIFY ? (openBlock(), createElementBlock(\"div\", _hoisted_6$8, toDisplayString(unref(t)(\"link-invalid\")), 1)) : unref(showFailure) && unref(invalidMagicLink) ? (openBlock(), createElementBlock(\"div\", _hoisted_7$8, toDisplayString(unref(t)(\"login-link-invalid\")), 1)) : unref(showFailure) && unref(magicLinkAction) === unref(MagicLinkActionEnum).VERIFY ? (openBlock(), createElementBlock(\"div\", _hoisted_8$6, toDisplayString(unref(t)(\"verification-failed-please-try-again\")), 1)) : createCommentVNode(\"\", true)\n            ]),\n            unref(showFailure) || unref(showSuccess) ? (openBlock(), createElementBlock(\"div\", _hoisted_9$5, [\n              createBaseVNode(\"button\", {\n                onClick: withModifiers(onButtonClick, [\"prevent\"]),\n                type: \"button\",\n                class: normalizeClass([\"button is-primary\", { \"is-loading\": unref(loading) }]),\n                part: \"button\",\n                disabled: unref(loading),\n                \"data-test\": \"activate-magic-link-button\"\n              }, [\n                unref(showFailure) && unref(invalidMagicLink) ? (openBlock(), createElementBlock(\"span\", _hoisted_11$3, toDisplayString(unref(t)(\"request-new-link\")), 1)) : unref(showFailure) ? (openBlock(), createElementBlock(\"span\", _hoisted_12$3, toDisplayString(unref(t)(\"try-again\")), 1)) : unref(showSuccess) ? (openBlock(), createElementBlock(\"span\", _hoisted_13$3, toDisplayString(unref(t)(\"redirect-now\")), 1)) : createCommentVNode(\"\", true)\n              ], 10, _hoisted_10$3)\n            ])) : createCommentVNode(\"\", true)\n          ], 512), [\n            [vShow, !unref(pageLoading)]\n          ])\n        ]),\n        _: 1\n      });\n    };\n  }\n});\nconst _hoisted_1$k = { class: \"view-verify-token\" };\nconst _sfc_main$n = defineComponent({\n  __name: \"ActivateMagicLinkView\",\n  props: {\n    magicLink: {},\n    webauthnAllowed: { type: Boolean }\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$k, [\n        createVNode(_sfc_main$o, {\n          magicLink: _ctx.magicLink,\n          webauthnAllowed: _ctx.webauthnAllowed\n        }, null, 8, [\"magicLink\", \"webauthnAllowed\"])\n      ]);\n    };\n  }\n});\nconst _hoisted_1$j = { class: \"view-email-input\" };\nconst _sfc_main$m = defineComponent({\n  __name: \"LoginView\",\n  props: {\n    register: { type: Boolean },\n    appInfo: {},\n    conditionalUI: { type: Boolean },\n    changeEmail: { type: Boolean }\n  },\n  setup(__props) {\n    const identifier = ref(\"\");\n    const { defaultCountryCode } = useDefaultCountryCode();\n    const countryCode = defaultCountryCode;\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$j, [\n        createVNode(_sfc_main$t, {\n          identifier: identifier.value,\n          \"onUpdate:identifier\": _cache[0] || (_cache[0] = ($event) => identifier.value = $event),\n          countryCode: unref(countryCode),\n          \"onUpdate:countryCode\": _cache[1] || (_cache[1] = ($event) => isRef(countryCode) ? countryCode.value = $event : null),\n          canToggleLoginRegister: false,\n          appInfo: _ctx.appInfo,\n          conditionalUI: _ctx.conditionalUI,\n          changeEmail: _ctx.changeEmail\n        }, {\n          loginInput: withCtx(() => [\n            renderSlot(_ctx.$slots, \"loginInput\")\n          ]),\n          _: 3\n        }, 8, [\"identifier\", \"countryCode\", \"appInfo\", \"conditionalUI\", \"changeEmail\"]),\n        createVNode(_sfc_main$q, { \"app-info\": _ctx.appInfo }, null, 8, [\"app-info\"])\n      ]);\n    };\n  }\n});\nconst _hoisted_1$i = { class: \"view-email-input\" };\nconst _sfc_main$l = defineComponent({\n  __name: \"RegisterView\",\n  props: {\n    register: { type: Boolean },\n    appInfo: {}\n  },\n  setup(__props) {\n    const identifier = ref(\"\");\n    const { defaultCountryCode } = useDefaultCountryCode();\n    const countryCode = defaultCountryCode;\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$i, [\n        createVNode(_sfc_main$s, {\n          identifier: identifier.value,\n          \"onUpdate:identifier\": _cache[0] || (_cache[0] = ($event) => identifier.value = $event),\n          countryCode: unref(countryCode),\n          \"onUpdate:countryCode\": _cache[1] || (_cache[1] = ($event) => isRef(countryCode) ? countryCode.value = $event : null),\n          canToggleLoginRegister: false,\n          appInfo: _ctx.appInfo\n        }, null, 8, [\"identifier\", \"countryCode\", \"appInfo\"]),\n        createVNode(_sfc_main$q, { \"app-info\": _ctx.appInfo }, null, 8, [\"app-info\"])\n      ]);\n    };\n  }\n});\nconst _sfc_main$k = defineComponent({\n  name: \"Spinner\"\n});\nconst _hoisted_1$h = { class: \"spinner-box\" };\nconst _hoisted_2$c = { class: \"spinner-content\" };\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$h, [\n    createBaseVNode(\"div\", _hoisted_2$c, [\n      renderSlot(_ctx.$slots, \"default\")\n    ])\n  ]);\n}\nvar Spinner = /* @__PURE__ */ _export_sfc(_sfc_main$k, [[\"render\", _sfc_render]]);\nconst _hoisted_1$g = { class: \"auth-flex-container\" };\nconst _hoisted_2$b = { class: \"title has-text-centered\" };\nconst _hoisted_3$a = {\n  key: 0,\n  class: \"content has-text-centered\",\n  style: { \"margin-bottom\": \"15px !important\" }\n};\nconst _hoisted_4$a = [\"innerHTML\"];\nconst _hoisted_5$9 = { class: \"flex-row flex-center\" };\nconst _hoisted_6$7 = [\"onClick\", \"disabled\"];\nconst _hoisted_7$7 = /* @__PURE__ */ createBaseVNode(\"div\", { class: \"spacer\" }, null, -1);\nconst _hoisted_8$5 = { class: \"link has-text-centered\" };\nconst _hoisted_9$4 = [\"onClick\"];\nconst _sfc_main$j = defineComponent({\n  __name: \"MagicLink\",\n  props: {\n    identifier: {},\n    userIsRegistering: { type: Boolean },\n    identifierVerifying: { type: Boolean },\n    setupNewDevice: { type: Boolean },\n    identifierType: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const { t, locale } = useLocale();\n    const { appId } = useAppId();\n    const passage = new Y(appId.value);\n    const { emitEvent: emitEvent2 } = useAuthEvent();\n    const isEmail = computed(() => {\n      return props.identifierType === IdentifierType.email;\n    });\n    const title = computed(() => {\n      if (props.identifierVerifying) {\n        if (isEmail.value) {\n          if (props.userIsRegistering) {\n            return t(\"verify-email-to-register\");\n          } else {\n            return t(\"verify-email-to-login\");\n          }\n        } else {\n          if (props.userIsRegistering) {\n            return t(\"verify-phone-to-register\");\n          } else {\n            return t(\"verify-phone-to-login\");\n          }\n        }\n      } else {\n        if (isEmail.value) {\n          if (props.userIsRegistering) {\n            return t(\"check-email-to-register\");\n          } else {\n            return t(\"check-email-to-login\");\n          }\n        } else {\n          if (props.userIsRegistering) {\n            return t(\"check-phone-to-register\");\n          } else {\n            return t(\"check-phone-to-login\");\n          }\n        }\n      }\n    });\n    const message = computed(() => {\n      let messageValue = \"\";\n      const messageType = props.identifierType === IdentifierType.email ? t(\"messagetype-email\") : t(\"messagetype-sms\");\n      const messageMedium = props.identifierType === IdentifierType.email ? t(\"email\") : t(\"phone-number\");\n      const registrationType = props.userIsRegistering ? t(\"registration\") : t(\"login\");\n      const loginMessage = props.identifierVerifying ? t(\"please-verify-identifier\", [messageMedium, registrationType]) : t(\"you-will-be-automatically-signed-in\");\n      messageValue = t(\"weve-sent-messagetype\", [messageType, props.identifier, loginMessage]);\n      if (props.setupNewDevice && !props.userIsRegistering) {\n        messageValue = t(\"we-dont-recognize-this-device\") + \" \" + messageValue;\n      }\n      return messageValue;\n    });\n    onMounted(() => {\n      if (props.userIsRegistering) {\n        magicLinkSendRegister();\n      } else {\n        magicLinkSendLogin();\n      }\n    });\n    function changeEmail() {\n      localStorage.removeItem(\"email\");\n      localStorage.removeItem(\"magic_link_id\");\n      localStorage.removeItem(\"wait_count\");\n      waitForActivatedMagicLink(721);\n      emitEvent2({ type: AuthEventType.ChangeIdentifier, payload: void 0 });\n    }\n    function resendMagicLink() {\n      return __async(this, null, function* () {\n        yield magicLinkSendLogin();\n      });\n    }\n    const showWaiting = ref(false);\n    const loading = ref(true);\n    function magicLinkSendRegister() {\n      return __async(this, null, function* () {\n        showWaiting.value = false;\n        loading.value = true;\n        yield new Promise((resolve) => {\n          setTimeout(resolve, 2e3);\n        });\n        try {\n          const res = yield passage.newRegisterMagicLink(props.identifier, locale.value.split(\"-\")[0]);\n          if (res.id != \"\") {\n            localStorage.setItem(\"magic_link_id\", res.id);\n            waitForActivatedMagicLink(0);\n          }\n        } catch (err) {\n          console.log(\"magicLinkSend error\", err);\n        } finally {\n          loading.value = false;\n        }\n      });\n    }\n    function magicLinkSendLogin() {\n      return __async(this, null, function* () {\n        showWaiting.value = false;\n        loading.value = true;\n        try {\n          const res = yield passage.newLoginMagicLink(props.identifier, locale.value.split(\"-\")[0]);\n          if (res.id != \"\") {\n            localStorage.setItem(\"magic_link_id\", res.id);\n            waitForActivatedMagicLink(0);\n          }\n        } catch (err) {\n          console.log(\"magicLinkSend error\", err);\n        } finally {\n          yield new Promise((resolve) => {\n            setTimeout(resolve, 3e3);\n          });\n          loading.value = false;\n        }\n      });\n    }\n    let authResult = void 0;\n    function lookupMagicLink() {\n      return __async(this, null, function* () {\n        const id = localStorage.getItem(\"magic_link_id\");\n        yield lookupMagicLinkActivated(id).then(() => __async(this, null, function* () {\n          if (authResult && authResult.redirect_url != \"\") {\n            localStorage.removeItem(\"magic_link_id\");\n            localStorage.removeItem(\"wait_count\");\n            useCallbacks().onEvent.value(OnEventType.onMagicLinkActivated);\n            emitEvent2({\n              type: AuthEventType.FallbackAuthSuccess,\n              payload: {\n                identifier: props.identifier,\n                authResult\n              }\n            });\n          }\n        }));\n      });\n    }\n    function lookupMagicLinkActivated(id) {\n      return __async(this, null, function* () {\n        yield passage.getMagicLinkStatus(id).then((res) => {\n          waitForActivatedMagicLink(721);\n          authResult = res;\n        }).catch(() => {\n        });\n        return;\n      });\n    }\n    let timer;\n    function waitForActivatedMagicLink(count) {\n      let i = count;\n      if (i < 720) {\n        showWaiting.value = true;\n        timer = setTimeout(() => __async(this, null, function* () {\n          delay(i);\n          i++;\n          waitForActivatedMagicLink(i);\n        }), 5e3);\n      } else {\n        clearTimeout(timer);\n        showWaiting.value = false;\n        return;\n      }\n    }\n    function delay(i) {\n      lookupMagicLink();\n      localStorage.setItem(\"wait_count\", i.toString());\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$g, [\n        createBaseVNode(\"div\", _hoisted_2$b, [\n          createBaseVNode(\"span\", null, toDisplayString(title.value), 1)\n        ]),\n        createVNode(Spinner, null, {\n          default: withCtx(() => [\n            isEmail.value ? (openBlock(), createBlock(unref(InlineSvg), {\n              key: 0,\n              src: unref(Icons).email,\n              alt: \"Email envelope\"\n            }, null, 8, [\"src\"])) : (openBlock(), createBlock(unref(InlineSvg), {\n              key: 1,\n              src: unref(Icons).phone,\n              alt: \"Message bubbles\"\n            }, null, 8, [\"src\"]))\n          ]),\n          _: 1\n        }),\n        message.value ? (openBlock(), createElementBlock(\"div\", _hoisted_3$a, [\n          createBaseVNode(\"span\", { innerHTML: message.value }, null, 8, _hoisted_4$a)\n        ])) : createCommentVNode(\"\", true),\n        createBaseVNode(\"div\", _hoisted_5$9, [\n          createBaseVNode(\"button\", {\n            onClick: withModifiers(resendMagicLink, [\"prevent\"]),\n            type: \"button\",\n            class: \"button is-primary\",\n            part: \"button\",\n            disabled: loading.value\n          }, toDisplayString(unref(t)(\"resend-isemail-email-message\", [isEmail.value ? unref(t)(\"email\") : unref(t)(\"message\")])), 9, _hoisted_6$7)\n        ]),\n        _hoisted_7$7,\n        createBaseVNode(\"div\", _hoisted_8$5, [\n          createBaseVNode(\"a\", {\n            onClick: withModifiers(changeEmail, [\"prevent\"]),\n            role: \"button\",\n            \"data-test\": \"change-email-button\"\n          }, toDisplayString(unref(t)(\"change-isemail-email-phone\", [isEmail.value ? unref(t)(\"email\") : unref(t)(\"phone\")])), 9, _hoisted_9$4)\n        ])\n      ]);\n    };\n  }\n});\nconst _hoisted_1$f = { class: \"view-access-token\" };\nconst _sfc_main$i = defineComponent({\n  __name: \"MagicLinkView\",\n  props: {\n    identifier: {},\n    userIsRegistering: { type: Boolean },\n    identifierVerifying: { type: Boolean },\n    setupNewDevice: { type: Boolean },\n    identifierType: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$f, [\n        createVNode(_sfc_main$j, {\n          identifier: _ctx.identifier,\n          userIsRegistering: _ctx.userIsRegistering,\n          identifierVerifying: _ctx.identifierVerifying,\n          setupNewDevice: _ctx.setupNewDevice,\n          identifierType: _ctx.identifierType\n        }, null, 8, [\"identifier\", \"userIsRegistering\", \"identifierVerifying\", \"setupNewDevice\", \"identifierType\"])\n      ]);\n    };\n  }\n});\nconst _hoisted_1$e = { class: \"passage-learnmore-modal\" };\nconst _hoisted_2$a = { class: \"passage-learnmore-top\" };\nconst _hoisted_3$9 = { class: \"passage-learnmore-close-button\" };\nconst _hoisted_4$9 = { class: \"passage-learnmore-content\" };\nconst _hoisted_5$8 = { style: { \"margin-bottom\": \"32px\" } };\nconst _sfc_main$h = defineComponent({\n  __name: \"LearnMoreLayout\",\n  setup(__props) {\n    const { t } = useLocale();\n    const showModal = ref(false);\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(Fragment, null, [\n        showModal.value ? (openBlock(), createElementBlock(\"div\", {\n          key: 0,\n          class: \"passage-learnmore\",\n          onClick: _cache[1] || (_cache[1] = ($event) => showModal.value = false)\n        }, [\n          createBaseVNode(\"div\", _hoisted_1$e, [\n            createBaseVNode(\"div\", _hoisted_2$a, [\n              createBaseVNode(\"div\", {\n                style: { \"cursor\": \"pointer\" },\n                onClick: _cache[0] || (_cache[0] = ($event) => showModal.value = false)\n              }, [\n                createBaseVNode(\"span\", _hoisted_3$9, toDisplayString(unref(t)(\"close\")), 1),\n                createVNode(unref(InlineSvg), {\n                  src: unref(Icons).close\n                }, null, 8, [\"src\"])\n              ])\n            ]),\n            createBaseVNode(\"div\", _hoisted_4$9, [\n              renderSlot(_ctx.$slots, \"body\")\n            ])\n          ])\n        ])) : createCommentVNode(\"\", true),\n        createBaseVNode(\"div\", null, [\n          createBaseVNode(\"div\", _hoisted_5$8, [\n            createBaseVNode(\"span\", null, [\n              renderSlot(_ctx.$slots, \"cta\"),\n              createTextVNode(\" \\xA0 \")\n            ]),\n            createBaseVNode(\"a\", {\n              style: { \"text-decoration\": \"underline\" },\n              onClick: _cache[2] || (_cache[2] = ($event) => showModal.value = true),\n              role: \"button\"\n            }, toDisplayString(unref(t)(\"learn-more\")), 1),\n            createTextVNode(\" \\u2192 \")\n          ])\n        ])\n      ], 64);\n    };\n  }\n});\nconst _hoisted_1$d = { style: { \"margin-bottom\": \"12px\" } };\nconst _hoisted_2$9 = { class: \"passage-learnmore-header\" };\nconst _hoisted_3$8 = { class: \"passage-learnmore-body\" };\nconst _hoisted_4$8 = { class: \"passage-learnmore-header\" };\nconst _hoisted_5$7 = { class: \"passage-learnmore-body\" };\nconst _hoisted_6$6 = { class: \"passage-learnmore-header\" };\nconst _hoisted_7$6 = { class: \"passage-learnmore-body\" };\nconst _sfc_main$g = defineComponent({\n  __name: \"LearnMorePasskey\",\n  props: {\n    cta: {}\n  },\n  setup(__props) {\n    const { t } = useLocale();\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$h, null, {\n        cta: withCtx(() => [\n          createBaseVNode(\"div\", _hoisted_1$d, toDisplayString(unref(t)(\"passkeys-are-a-simple\")), 1),\n          createTextVNode(\" \" + toDisplayString(_ctx.cta), 1)\n        ]),\n        body: withCtx(() => [\n          createBaseVNode(\"div\", _hoisted_2$9, [\n            createVNode(unref(InlineSvg), {\n              src: unref(Icons).privateIcon,\n              style: { \"margin-right\": \"8px\" }\n            }, null, 8, [\"src\"]),\n            createTextVNode(\" \" + toDisplayString(unref(t)(\"private\")), 1)\n          ]),\n          createBaseVNode(\"div\", _hoisted_3$8, toDisplayString(unref(t)(\"unlock-your-passkey\")), 1),\n          createBaseVNode(\"div\", _hoisted_4$8, [\n            createVNode(unref(InlineSvg), {\n              src: unref(Icons).secure,\n              style: { \"margin-right\": \"8px\" }\n            }, null, 8, [\"src\"]),\n            createTextVNode(\" \" + toDisplayString(unref(t)(\"secure\")), 1)\n          ]),\n          createBaseVNode(\"div\", _hoisted_5$7, toDisplayString(unref(t)(\"passkey-is-unique\")), 1),\n          createBaseVNode(\"div\", _hoisted_6$6, [\n            createVNode(unref(InlineSvg), {\n              src: unref(Icons).simple,\n              style: { \"margin-right\": \"8px\" }\n            }, null, 8, [\"src\"]),\n            createTextVNode(\" \" + toDisplayString(unref(t)(\"simple\")), 1)\n          ]),\n          createBaseVNode(\"div\", _hoisted_7$6, toDisplayString(unref(t)(\"easy-to-use\")), 1)\n        ]),\n        _: 1\n      });\n    };\n  }\n});\nconst _hoisted_1$c = {\n  class: \"auth-flex-container\",\n  \"data-tag\": \"register-device-message\"\n};\nconst _hoisted_2$8 = { class: \"title secondary-title has-text-centered\" };\nconst _hoisted_3$7 = { class: \"image has-text-centered\" };\nconst _hoisted_4$7 = { key: 0 };\nconst _hoisted_5$6 = {\n  key: 2,\n  class: \"flex-row flex-center\"\n};\nconst _hoisted_6$5 = [\"onClick\", \"disabled\"];\nconst _hoisted_7$5 = [\"onClick\", \"disabled\"];\nconst _hoisted_8$4 = {\n  key: 3,\n  class: \"flex-row flex-center\"\n};\nconst _hoisted_9$3 = [\"onClick\", \"disabled\"];\nconst _hoisted_10$2 = /* @__PURE__ */ createBaseVNode(\"div\", { class: \"spacer\" }, null, -1);\nconst _hoisted_11$2 = {\n  key: 4,\n  class: \"content has-text-centered\",\n  style: { \"margin-top\": \"20px !important\" }\n};\nconst _hoisted_12$2 = { class: \"link\" };\nconst _hoisted_13$2 = [\"onClick\"];\nconst _hoisted_14$2 = { class: \"link\" };\nconst _hoisted_15$2 = [\"onClick\"];\nconst _hoisted_16$2 = {\n  key: 0,\n  class: \"link\"\n};\nconst _hoisted_17 = [\"onClick\"];\nconst _sfc_main$f = defineComponent({\n  __name: \"RegisterDevice\",\n  props: {\n    identifier: {},\n    identifierType: {},\n    appInfo: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const showFailure = ref(false);\n    const loading = ref(false);\n    const { t, te: te2 } = useLocale();\n    const { appId } = useAppId();\n    const passage = new Y(appId.value);\n    const { emitEvent: emitEvent2 } = useAuthEvent();\n    const { autofocusButton } = useAutofocusButton();\n    const isEmail = computed(() => {\n      return props.identifierType === IdentifierType.email;\n    });\n    const fallbackAuth = computed(() => {\n      var _a;\n      return (_a = props.appInfo.auth_fallback_method) != null ? _a : ue.MagicLink;\n    });\n    const supportsFallback = computed(() => {\n      return props.appInfo.auth_fallback_method !== ue.None;\n    });\n    const fallbackRegisterWithCodeEmailOrTextBtnCopy = computed(() => {\n      if (fallbackAuth.value === ue.LoginCode) {\n        return te2(\"register-with-code\") ? t(\"register-with-code\") : \"Register with a code\";\n      } else {\n        return t(\"register-with-link\", [isEmail.value ? t(\"email\") : t(\"sms-text\")]);\n      }\n    });\n    const fallbackSendCodeEmailOrTextBtnCopy = computed(() => {\n      if (fallbackAuth.value === ue.LoginCode) {\n        return te2(\"send-code\") ? t(\"send-code\") : \"Send code\";\n      } else {\n        return t(\"send-email-or-text-link\", [isEmail.value ? t(\"email\") : t(\"sms-text\")]);\n      }\n    });\n    const failureCreateText = computed(() => {\n      switch (props.appInfo.auth_fallback_method) {\n        case ue.LoginCode:\n          return te2(\"passkey-create-fail-try-code\") ? t(\"passkey-create-fail-try-code\") : \"Unable to create a passkey. Try again or register with a one-time code.\";\n        case ue.MagicLink:\n          return t(\"passkey-create-fail-try-link\");\n        case ue.None:\n          return t(\"passkey-create-fail-no-fallback\");\n      }\n    });\n    function signUpWebAuthn(identifier) {\n      return __async(this, null, function* () {\n        loading.value = true;\n        showFailure.value = false;\n        try {\n          const authResult = yield passage.register(identifier);\n          loading.value = false;\n          emitEvent2({\n            type: AuthEventType.AuthSuccess,\n            payload: {\n              authResult,\n              identifier: props.identifier\n            }\n          });\n        } catch (err) {\n          showFailure.value = true;\n          loading.value = false;\n        }\n      });\n    }\n    function registerWithFallback() {\n      emitEvent2({\n        type: AuthEventType.FallbackAuth,\n        payload: {\n          identifier: props.identifier,\n          identifierType: props.identifierType,\n          userIsRegistering: true,\n          userInitiated: true\n        }\n      });\n    }\n    function changeEmail() {\n      localStorage.removeItem(\"email\");\n      useAuthEvent().emitEvent({ type: AuthEventType.ChangeIdentifier, payload: void 0 });\n    }\n    function onButtonClick() {\n      signUpWebAuthn(props.identifier);\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$c, [\n        createBaseVNode(\"div\", _hoisted_2$8, toDisplayString(unref(t)(\"register-with-a-passkey\")), 1),\n        createBaseVNode(\"figure\", _hoisted_3$7, [\n          createVNode(unref(InlineSvg), {\n            src: unref(Icons).passkey,\n            alt: \"Register with a passkey\",\n            style: { \"margin\": \"5px\" }\n          }, null, 8, [\"src\"])\n        ]),\n        showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_4$7, [\n          createBaseVNode(\"p\", null, toDisplayString(failureCreateText.value), 1)\n        ])) : (openBlock(), createBlock(_sfc_main$g, {\n          key: 1,\n          cta: unref(t)(\"register-your-account\")\n        }, null, 8, [\"cta\"])),\n        showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_5$6, [\n          createBaseVNode(\"button\", {\n            onClick: withModifiers(onButtonClick, [\"prevent\"]),\n            type: \"button\",\n            part: \"button\",\n            class: \"button is-primary\",\n            disabled: loading.value,\n            style: { \"margin-right\": \"5px\" }\n          }, toDisplayString(unref(t)(\"try-again\")), 9, _hoisted_6$5),\n          _ctx.appInfo.auth_fallback_method !== unref(ue).None ? (openBlock(), createElementBlock(\"button\", {\n            key: 0,\n            onClick: withModifiers(registerWithFallback, [\"prevent\"]),\n            type: \"button\",\n            part: \"button button-secondary\",\n            class: \"button is-secondary\",\n            disabled: loading.value,\n            style: { \"margin-left\": \"5px\" },\n            \"data-test\": \"login-with-email-button\",\n            ref_key: \"autofocusButton\",\n            ref: autofocusButton\n          }, toDisplayString(fallbackSendCodeEmailOrTextBtnCopy.value), 9, _hoisted_7$5)) : createCommentVNode(\"\", true)\n        ])) : (openBlock(), createElementBlock(\"div\", _hoisted_8$4, [\n          createBaseVNode(\"button\", {\n            onClick: withModifiers(onButtonClick, [\"prevent\"]),\n            type: \"button\",\n            class: normalizeClass([\"button\", [{ \"is-loading\": loading.value }]]),\n            part: \"button\",\n            disabled: loading.value,\n            \"data-test\": \"register-main-button\",\n            tabindex: \"0\",\n            ref_key: \"autofocusButton\",\n            ref: autofocusButton\n          }, [\n            createBaseVNode(\"span\", null, toDisplayString(unref(t)(\"register-with-passkey\")), 1)\n          ], 10, _hoisted_9$3)\n        ])),\n        _hoisted_10$2,\n        showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_11$2, [\n          createBaseVNode(\"div\", _hoisted_12$2, [\n            createBaseVNode(\"a\", {\n              onClick: withModifiers(changeEmail, [\"prevent\"]),\n              role: \"button\",\n              \"data-test\": \"change-email-button\"\n            }, toDisplayString(unref(t)(\"change-isemail-email-phone\", [isEmail.value ? unref(t)(\"email\") : unref(t)(\"phone\")])), 9, _hoisted_13$2)\n          ])\n        ])) : createCommentVNode(\"\", true),\n        !showFailure.value ? (openBlock(), createElementBlock(\"div\", {\n          key: 5,\n          class: normalizeClass([\"flex-row flex-wrap\", supportsFallback.value ? \"flex-between\" : \"flex-center\"])\n        }, [\n          createBaseVNode(\"div\", _hoisted_14$2, [\n            createBaseVNode(\"a\", {\n              onClick: withModifiers(changeEmail, [\"prevent\"]),\n              role: \"button\",\n              \"data-test\": \"change-email-button\"\n            }, toDisplayString(unref(t)(\"back\")), 9, _hoisted_15$2)\n          ]),\n          supportsFallback.value ? (openBlock(), createElementBlock(\"div\", _hoisted_16$2, [\n            createBaseVNode(\"a\", {\n              onClick: withModifiers(registerWithFallback, [\"prevent\"]),\n              role: \"button\",\n              \"data-test\": \"register-email-button\"\n            }, toDisplayString(fallbackRegisterWithCodeEmailOrTextBtnCopy.value), 9, _hoisted_17)\n          ])) : createCommentVNode(\"\", true)\n        ], 2)) : createCommentVNode(\"\", true)\n      ]);\n    };\n  }\n});\nconst _sfc_main$e = defineComponent({\n  __name: \"RegisterDeviceView\",\n  props: {\n    identifier: {},\n    identifierType: {},\n    appInfo: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$f, {\n        identifier: _ctx.identifier,\n        identifierType: _ctx.identifierType,\n        appInfo: _ctx.appInfo\n      }, null, 8, [\"identifier\", \"identifierType\", \"appInfo\"]);\n    };\n  }\n});\nconst _hoisted_1$b = { class: \"auth-flex-container\" };\nconst _hoisted_2$7 = { class: \"title has-text-centered\" };\nconst _hoisted_3$6 = {\n  class: \"image has-text-centered\",\n  style: { \"margin\": \"5px auto\" }\n};\nconst _hoisted_4$6 = {\n  key: 1,\n  class: \"wrap-text\",\n  style: { \"margin-bottom\": \"5px !important\" }\n};\nconst _hoisted_5$5 = { \"data-test\": \"failure-message\" };\nconst _hoisted_6$4 = {\n  key: 2,\n  class: \"flex-row flex-center\"\n};\nconst _hoisted_7$4 = [\"onClick\", \"disabled\"];\nconst _hoisted_8$3 = [\"onClick\", \"disabled\"];\nconst _hoisted_9$2 = /* @__PURE__ */ createBaseVNode(\"div\", { class: \"spacer\" }, null, -1);\nconst _hoisted_10$1 = {\n  key: 3,\n  class: \"content has-text-centered\",\n  style: { \"margin-top\": \"20px !important\" }\n};\nconst _hoisted_11$1 = { class: \"link\" };\nconst _hoisted_12$1 = [\"onClick\"];\nconst _hoisted_13$1 = { class: \"link\" };\nconst _hoisted_14$1 = [\"onClick\"];\nconst _hoisted_15$1 = {\n  key: 0,\n  class: \"link\"\n};\nconst _hoisted_16$1 = [\"onClick\"];\nconst _sfc_main$d = defineComponent({\n  __name: \"WebauthnSignIn\",\n  props: {\n    identifier: {},\n    identifierType: {},\n    appInfo: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const showFailure = ref(false);\n    const loading = ref(false);\n    const { t, te: te2 } = useLocale();\n    const { appId } = useAppId();\n    const passage = new Y(appId.value);\n    const { emitEvent: emitEvent2 } = useAuthEvent();\n    const isEmail = computed(() => {\n      return props.identifierType === IdentifierType.email;\n    });\n    const { autofocusButton } = useAutofocusButton();\n    const fallbackAuth = computed(() => {\n      var _a;\n      return (_a = props.appInfo.auth_fallback_method) != null ? _a : ue.MagicLink;\n    });\n    const supportsFallback = computed(() => {\n      return props.appInfo.auth_fallback_method !== ue.None;\n    });\n    const fallbackSendCodeEmailOrTextBtnCopy = computed(() => {\n      if (fallbackAuth.value === ue.LoginCode) {\n        return te2(\"send-code\") ? t(\"send-code\") : \"Send code\";\n      } else {\n        return t(\"send-email-or-text-link\", [isEmail.value ? t(\"email\") : t(\"sms-text\")]);\n      }\n    });\n    const loginWithCodeEmailOrTextBtnCopy = computed(() => {\n      if (fallbackAuth.value === ue.LoginCode) {\n        return te2(\"login-with-code\") ? t(\"login-with-code\") : \"Login with a code\";\n      } else {\n        return t(\"login-with-link\", [isEmail.value ? t(\"email\") : t(\"sms-text\")]);\n      }\n    });\n    const failureLoginText = computed(() => {\n      switch (props.appInfo.auth_fallback_method) {\n        case ue.LoginCode:\n          return te2(\"passkey-login-fail-try-code\") ? t(\"passkey-login-fail-try-code\") : \"Unable to log in with a passkey. Try again or log in with a one-time code.\";\n        case ue.MagicLink:\n          return t(\"passkey-login-fail-try-link\");\n        case ue.None:\n          return t(\"passkey-login-fail-no-fallback\");\n      }\n    });\n    function signInWebAuthn() {\n      return __async(this, null, function* () {\n        showFailure.value = false;\n        if (!props.identifier) {\n          return;\n        }\n        loading.value = true;\n        try {\n          const authResult = yield passage.login(props.identifier);\n          emitEvent2({\n            type: AuthEventType.AuthSuccess,\n            payload: {\n              authResult,\n              identifier: props.identifier\n            }\n          });\n          loading.value = false;\n        } catch (err) {\n          const error = err;\n          showFailure.value = true;\n          loading.value = false;\n          if (error.statusCode === T.PSGParsePublicKeyForLoginFailed) {\n            showFailure.value = true;\n          } else {\n            emitEvent2({\n              type: AuthEventType.FallbackAuth,\n              payload: {\n                identifier: props.identifier,\n                identifierType: props.identifierType,\n                userInitiated: false\n              }\n            });\n          }\n        }\n      });\n    }\n    function loginWithFallback() {\n      emitEvent2({\n        type: AuthEventType.FallbackAuth,\n        payload: {\n          identifier: props.identifier,\n          identifierType: props.identifierType,\n          userInitiated: true\n        }\n      });\n    }\n    function changeEmail() {\n      localStorage.removeItem(\"email\");\n      emitEvent2({\n        type: AuthEventType.ChangeIdentifier,\n        payload: void 0\n      });\n    }\n    onMounted(() => {\n      signInWebAuthn();\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$b, [\n        createBaseVNode(\"div\", _hoisted_2$7, toDisplayString(unref(t)(\"log-in-with-a-passkey\")), 1),\n        createBaseVNode(\"figure\", _hoisted_3$6, [\n          createVNode(unref(InlineSvg), {\n            src: unref(Icons).passkey,\n            alt: \"Log in with a passkey\",\n            style: { \"margin\": \"5px\" }\n          }, null, 8, [\"src\"])\n        ]),\n        !showFailure.value ? (openBlock(), createBlock(_sfc_main$g, {\n          key: 0,\n          cta: unref(t)(\"log-into-your-account\")\n        }, null, 8, [\"cta\"])) : showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_4$6, [\n          createBaseVNode(\"div\", _hoisted_5$5, [\n            createBaseVNode(\"p\", null, toDisplayString(failureLoginText.value), 1)\n          ])\n        ])) : createCommentVNode(\"\", true),\n        showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_6$4, [\n          createBaseVNode(\"button\", {\n            onClick: withModifiers(signInWebAuthn, [\"prevent\"]),\n            type: \"button\",\n            part: \"button\",\n            class: \"button is-primary\",\n            disabled: loading.value,\n            style: { \"margin-right\": \"5px\" }\n          }, toDisplayString(unref(t)(\"try-again\")), 9, _hoisted_7$4),\n          _ctx.appInfo.auth_fallback_method !== unref(ue).None ? (openBlock(), createElementBlock(\"button\", {\n            key: 0,\n            onClick: withModifiers(loginWithFallback, [\"prevent\"]),\n            type: \"button\",\n            part: \"button button-secondary\",\n            class: \"button is-secondary\",\n            disabled: loading.value,\n            style: { \"margin-left\": \"5px\" },\n            \"data-test\": \"login-with-email-button\",\n            ref_key: \"autofocusButton\",\n            ref: autofocusButton\n          }, toDisplayString(fallbackSendCodeEmailOrTextBtnCopy.value), 9, _hoisted_8$3)) : createCommentVNode(\"\", true)\n        ])) : createCommentVNode(\"\", true),\n        _hoisted_9$2,\n        showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_10$1, [\n          createBaseVNode(\"div\", _hoisted_11$1, [\n            createBaseVNode(\"a\", {\n              onClick: withModifiers(changeEmail, [\"prevent\"]),\n              role: \"button\",\n              \"data-test\": \"change-email-button\"\n            }, toDisplayString(unref(t)(\"change-isemail-email-phone\", [isEmail.value ? unref(t)(\"email\") : unref(t)(\"phone\")])), 9, _hoisted_12$1)\n          ])\n        ])) : createCommentVNode(\"\", true),\n        !showFailure.value ? (openBlock(), createElementBlock(\"div\", {\n          key: 4,\n          class: normalizeClass([\"flex-row flex-wrap\", supportsFallback.value ? \"flex-between\" : \"flex-center\"])\n        }, [\n          createBaseVNode(\"div\", _hoisted_13$1, [\n            createBaseVNode(\"a\", {\n              onClick: withModifiers(changeEmail, [\"prevent\"]),\n              role: \"button\",\n              \"data-test\": \"change-email-button\"\n            }, toDisplayString(unref(t)(\"back\")), 9, _hoisted_14$1)\n          ]),\n          supportsFallback.value ? (openBlock(), createElementBlock(\"div\", _hoisted_15$1, [\n            createBaseVNode(\"a\", {\n              onClick: withModifiers(loginWithFallback, [\"prevent\"]),\n              role: \"button\",\n              \"data-test\": \"register-email-button\"\n            }, toDisplayString(loginWithCodeEmailOrTextBtnCopy.value), 9, _hoisted_16$1)\n          ])) : createCommentVNode(\"\", true)\n        ], 2)) : createCommentVNode(\"\", true)\n      ]);\n    };\n  }\n});\nconst _hoisted_1$a = { class: \"view-webauthn-sign-in\" };\nconst _sfc_main$c = defineComponent({\n  __name: \"WebauthnSignInView\",\n  props: {\n    identifier: {},\n    identifierType: {},\n    appInfo: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$a, [\n        createVNode(_sfc_main$d, {\n          identifier: _ctx.identifier,\n          identifierType: _ctx.identifierType,\n          appInfo: _ctx.appInfo\n        }, null, 8, [\"identifier\", \"identifierType\", \"appInfo\"])\n      ]);\n    };\n  }\n});\nconst _hoisted_1$9 = {\n  style: { \"display\": \"flex\", \"align-items\": \"center\" },\n  class: \"psg-otp-single-input-container\"\n};\nconst _hoisted_2$6 = [\"data-test\", \"type\", \"inputtype\", \"placeholder\", \"inputmode\", \"disabled\", \"maxlength\", \"autocomplete\"];\nconst _hoisted_3$5 = { key: 0 };\nconst _hoisted_4$5 = [\"innerHTML\"];\nconst _sfc_main$b = defineComponent({\n  __name: \"OneTimePasscodeSingleInput\",\n  props: {\n    conditionalClass: {},\n    focus: { type: Boolean },\n    inputClasses: { default: () => [] },\n    inputmode: { default: \"numeric\" },\n    inputType: { default: \"number\" },\n    isDisabled: { type: Boolean },\n    isLastChild: { type: Boolean },\n    placeholder: {},\n    separator: { default: \"\" },\n    shouldAutoFocus: { type: Boolean, default: false },\n    value: { default: \"\" },\n    isFirstChild: { type: Boolean },\n    inputIdx: {},\n    inputCount: {}\n  },\n  emits: [\"on-change\", \"on-keydown\", \"on-paste\", \"on-focus\", \"on-blur\"],\n  setup(__props, { emit }) {\n    const props = __props;\n    const model = ref(props.value || \"\");\n    const input = ref(null);\n    const inputTypeValue = computed(() => {\n      return props.inputType === \"letter-numeric\" ? \"text\" : props.inputType;\n    });\n    const handleOnChange = () => {\n      model.value = model.value.toString();\n      if (model.value.length > 1) {\n        model.value = model.value.slice(0, 1);\n      }\n      return emit(\"on-change\", model.value);\n    };\n    const isCodeLetter = (charCode) => charCode >= 65 && charCode <= 90;\n    const isCodeNumeric = (charCode) => charCode >= 48 && charCode <= 57 || charCode >= 96 && charCode <= 105;\n    const handleOnKeyDown = (event) => {\n      if (props.isDisabled) {\n        event.preventDefault();\n      }\n      const keyEvent = event || window.event;\n      const charCode = keyEvent.which ? keyEvent.which : keyEvent.keyCode;\n      if (isCodeNumeric(charCode) || props.inputType === \"letter-numeric\" && isCodeLetter(charCode) || [8, 9, 13, 37, 39, 46, 86].includes(charCode)) {\n        emit(\"on-keydown\", event);\n      } else {\n        keyEvent.preventDefault();\n      }\n    };\n    const handleOnPaste = (event) => emit(\"on-paste\", event);\n    const handleOnFocus = () => {\n      input.value.select();\n      return emit(\"on-focus\");\n    };\n    const handleOnBlur = () => emit(\"on-blur\");\n    watch(\n      () => props.value,\n      (newValue, oldValue) => {\n        if (newValue !== oldValue) {\n          model.value = newValue;\n        }\n      }\n    );\n    watch(\n      () => props.focus,\n      (newFocusValue, oldFocusValue) => {\n        if (oldFocusValue !== newFocusValue && input.value && props.focus) {\n          input.value.focus();\n          input.value.select();\n        }\n      }\n    );\n    onMounted(() => {\n      if (input.value && props.focus && props.shouldAutoFocus) {\n        input.value.focus();\n        input.value.select();\n      }\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$9, [\n        withDirectives(createBaseVNode(\"input\", {\n          \"data-test\": `single-input-${_ctx.inputIdx}`,\n          type: inputTypeValue.value,\n          inputtype: inputTypeValue.value,\n          placeholder: _ctx.placeholder,\n          inputmode: _ctx.inputmode,\n          disabled: _ctx.isDisabled,\n          ref_key: \"input\",\n          ref: input,\n          pattern: \"[0-9]*\",\n          maxlength: _ctx.isFirstChild ? _ctx.inputCount : 1,\n          min: \"0\",\n          max: \"9\",\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => model.value = $event),\n          class: normalizeClass([\"psg-input\", \"psg-otp-input\", [..._ctx.inputClasses || []]]),\n          onInput: handleOnChange,\n          onKeydown: handleOnKeyDown,\n          onPaste: handleOnPaste,\n          onFocus: handleOnFocus,\n          onBlur: handleOnBlur,\n          autocomplete: _ctx.isFirstChild ? \"one-time-code\" : \"off\"\n        }, null, 42, _hoisted_2$6), [\n          [vModelDynamic, model.value]\n        ]),\n        !_ctx.isLastChild && _ctx.separator ? (openBlock(), createElementBlock(\"span\", _hoisted_3$5, [\n          createBaseVNode(\"span\", { innerHTML: _ctx.separator }, null, 8, _hoisted_4$5)\n        ])) : createCommentVNode(\"\", true)\n      ]);\n    };\n  }\n});\nconst _hoisted_1$8 = {\n  style: { \"display\": \"flex\", \"justify-content\": \"space-between\" },\n  class: \"psg-otp-input-container\"\n};\nconst _hoisted_2$5 = {\n  key: 0,\n  autocomplete: \"off\",\n  name: \"hidden\",\n  type: \"text\",\n  style: { \"display\": \"none\" }\n};\nconst _sfc_main$a = defineComponent({\n  __name: \"OneTimePasscodeInput\",\n  props: {\n    value: { default: \"\" },\n    numInputs: { default: 6 },\n    separator: { default: \"\" },\n    inputClasses: {},\n    conditionalClass: { default: () => [] },\n    inputType: { default: \"number\" },\n    inputmode: { default: \"numeric\" },\n    shouldAutoFocus: { type: Boolean, default: false },\n    placeholder: { default: () => [] },\n    isDisabled: { type: Boolean, default: false },\n    disableNonCurrent: { type: Boolean, default: false }\n  },\n  emits: [\"update:value\", \"on-complete\", \"on-change\"],\n  setup(__props, { emit }) {\n    const props = __props;\n    const activeInput = ref(0);\n    const otp = ref([]);\n    const oldOtp = ref([]);\n    watch(\n      () => props.value,\n      (val) => {\n        const fill = (unref(val) || \"\").padEnd(props.numInputs, \" \").split(\"\");\n        otp.value = fill;\n      },\n      { immediate: true }\n    );\n    const handleOnFocus = (index) => {\n      activeInput.value = index;\n    };\n    const handleOnBlur = () => {\n      activeInput.value = -1;\n    };\n    const checkFilledAllInputs = () => {\n      if (otp.value.join(\"\").length === props.numInputs) {\n        emit(\"update:value\", otp.value.join(\"\"));\n        return emit(\"on-complete\", otp.value.join(\"\"));\n      }\n      return \"Wait until the user enters the required number of characters\";\n    };\n    const focusInput = (input) => {\n      activeInput.value = Math.max(Math.min(props.numInputs - 1, input), 0);\n    };\n    const focusNextInput = () => {\n      if (props.disableNonCurrent) {\n        setTimeout(() => {\n          focusInput(activeInput.value + 1);\n        }, 200);\n      } else {\n        focusInput(activeInput.value + 1);\n      }\n    };\n    const focusPrevInput = () => {\n      focusInput(activeInput.value - 1);\n    };\n    const changeCodeAtFocus = (value) => {\n      oldOtp.value = Object.assign([], otp.value);\n      otp.value[activeInput.value] = value;\n      if (oldOtp.value.join(\"\") !== otp.value.join(\"\")) {\n        emit(\"update:value\", otp.value.join(\"\"));\n        emit(\"on-change\", otp.value.join(\"\"));\n      }\n    };\n    const handleOnPaste = (event) => {\n      var _a;\n      event.preventDefault();\n      const pastedData = (_a = event.clipboardData) == null ? void 0 : _a.getData(\"text/plain\").slice(0, props.numInputs - activeInput.value).split(\"\");\n      if (props.inputType === \"number\" && !(pastedData == null ? void 0 : pastedData.join(\"\").match(/^\\d+$/))) {\n        return \"Invalid pasted data\";\n      }\n      if (props.inputType === \"letter-numeric\" && !(pastedData == null ? void 0 : pastedData.join(\"\").match(/^\\w+$/))) {\n        return \"Invalid pasted data\";\n      }\n      const currentCharsInOTP = otp.value.slice(0, activeInput.value);\n      const combinedWithPastedData = currentCharsInOTP.concat(pastedData || \"\");\n      combinedWithPastedData.slice(0, props.numInputs).forEach((value, i) => {\n        otp.value[i] = value;\n      });\n      focusInput(combinedWithPastedData.slice(0, props.numInputs).length);\n      return checkFilledAllInputs();\n    };\n    const handleOnChange = (value) => {\n      changeCodeAtFocus(value);\n      focusNextInput();\n    };\n    const handleOnKeyDown = (event) => {\n      switch (event.keyCode) {\n        case 8:\n          event.preventDefault();\n          changeCodeAtFocus(\"\");\n          focusPrevInput();\n          break;\n        case 46:\n          event.preventDefault();\n          changeCodeAtFocus(\"\");\n          break;\n        case 37:\n          event.preventDefault();\n          focusPrevInput();\n          break;\n        case 39:\n          event.preventDefault();\n          focusNextInput();\n          break;\n      }\n    };\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$8, [\n        _ctx.inputType === \"password\" ? (openBlock(), createElementBlock(\"input\", _hoisted_2$5)) : createCommentVNode(\"\", true),\n        (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.numInputs, (_, i) => {\n          return openBlock(), createBlock(_sfc_main$b, {\n            key: i,\n            focus: activeInput.value === i,\n            value: otp.value[i],\n            separator: _ctx.separator,\n            \"input-type\": _ctx.inputType,\n            inputmode: _ctx.inputmode,\n            \"input-classes\": _ctx.inputClasses,\n            conditionalClass: _ctx.conditionalClass[i],\n            \"is-last-child\": i === _ctx.numInputs - 1,\n            \"is-first-child\": i === 0,\n            \"should-auto-focus\": _ctx.shouldAutoFocus,\n            placeholder: _ctx.placeholder[i],\n            \"is-disabled\": _ctx.isDisabled || _ctx.disableNonCurrent && i > otp.value.join(\"\").trim().length,\n            \"input-idx\": i,\n            \"input-count\": _ctx.numInputs,\n            onOnChange: handleOnChange,\n            onOnKeydown: handleOnKeyDown,\n            onOnPaste: handleOnPaste,\n            onOnFocus: ($event) => handleOnFocus(i),\n            onOnBlur: handleOnBlur\n          }, null, 8, [\"focus\", \"value\", \"separator\", \"input-type\", \"inputmode\", \"input-classes\", \"conditionalClass\", \"is-last-child\", \"is-first-child\", \"should-auto-focus\", \"placeholder\", \"is-disabled\", \"input-idx\", \"input-count\", \"onOnFocus\"]);\n        }), 128))\n      ]);\n    };\n  }\n});\nconst _hoisted_1$7 = { class: \"auth-flex-container\" };\nconst _hoisted_2$4 = { class: \"title has-text-centered\" };\nconst _hoisted_3$4 = { class: \"content wrap-text\" };\nconst _hoisted_4$4 = { style: { \"margin-top\": \"32px\", \"margin-bottom\": \"40px\" } };\nconst _hoisted_5$4 = [\"innerHTML\"];\nconst _hoisted_6$3 = { class: \"flex flex-row flex-center\" };\nconst _hoisted_7$3 = {\n  class: \"flex-row\",\n  style: { \"margin-top\": \"8px\" }\n};\nconst _hoisted_8$2 = {\n  class: \"error-message\",\n  style: { \"min-height\": \"17px\" }\n};\nconst _hoisted_9$1 = {\n  class: \"flex-row flex-center\",\n  style: { \"margin-top\": \"16px\" }\n};\nconst _hoisted_10 = [\"onClick\", \"disabled\"];\nconst _hoisted_11 = /* @__PURE__ */ createBaseVNode(\"div\", { class: \"spacer\" }, null, -1);\nconst _hoisted_12 = { class: \"flex-row flex-wrap flex-between\" };\nconst _hoisted_13 = { class: \"link\" };\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = { class: \"link\" };\nconst _hoisted_16 = [\"onClick\"];\nconst numInputs = 6;\nconst disableInputsOnSendCodeError = false;\nconst _sfc_main$9 = defineComponent({\n  __name: \"OneTimePasscode\",\n  props: {\n    identifier: {},\n    userIsRegistering: { type: Boolean },\n    identifierVerifying: { type: Boolean },\n    setupNewDevice: { type: Boolean },\n    identifierType: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const { t, te: te2, locale } = useLocale();\n    const { appId } = useAppId();\n    const loading = ref(true);\n    const oneTimePasscode = ref(void 0);\n    const errorWithOneTimePasscode = ref(false);\n    const errorSendingOneTimePasscode = ref(false);\n    const errorMessage = ref(void 0);\n    const otpId = ref(void 0);\n    const title = computed(() => {\n      return te2(\"enter-code\") ? t(\"enter-code\", {}) : \"Enter code\";\n    });\n    const message = computed(() => {\n      return te2(\"enter-code-sent\") ? t(\"enter-code-sent\", [props.identifier]) : `A one-time code has been sent to <span style=\"font-weight: 700;\">${props.identifier}</span>. Enter the code here to log in.`;\n    });\n    const btnGoBackText = computed(() => {\n      return te2(\"back\") ? t(\"back\") : \"Back\";\n    });\n    const btnResendText = computed(() => {\n      return te2(\"resend-code\") ? t(\"resend-code\") : \"Resend code\";\n    });\n    const oneTimePasscodeInputClasses = computed(() => {\n      return errorWithOneTimePasscode.value ? [\"has-error\"] : [];\n    });\n    const oneTimePasscodeInputsDisabled = computed(() => {\n      return disableInputsOnSendCodeError;\n    });\n    const continueBtnDisabled = computed(() => {\n      return loading.value;\n    });\n    watch(oneTimePasscode, () => {\n      var _a;\n      _resetErrorState();\n      if (((_a = oneTimePasscode.value) == null ? void 0 : _a.trim().length) === numInputs) {\n        activateOneTimePasscode();\n      }\n    });\n    const passage = new Y(appId.value);\n    const sendOneTimePasscode = (isRegistering = false) => __async(this, null, function* () {\n      _resetLoadingState();\n      _resetErrorState();\n      _resetOneTimePasscode();\n      loading.value = true;\n      try {\n        const res = isRegistering ? yield passage.newRegisterOneTimePasscode(props.identifier, locale.value.split(\"-\")[0]) : yield passage.newLoginOneTimePasscode(props.identifier, locale.value.split(\"-\")[0]);\n        if (res.otp_id != \"\") {\n          localStorage.setItem(\"otp_id\", res.otp_id);\n          otpId.value = res.otp_id;\n        }\n      } catch (err) {\n        setError(te2(\"code-send-error\") ? t(\"code-send-error\") : \"An error occurred sending the code.\", true);\n      } finally {\n        loading.value = false;\n      }\n    });\n    const activateOneTimePasscode = () => __async(this, null, function* () {\n      _resetLoadingState();\n      _resetErrorState();\n      loading.value = true;\n      try {\n        if (!oneTimePasscode.value) {\n          throw new Error(\"Login code is undefined.\");\n        }\n        if (oneTimePasscode.value.length !== numInputs) {\n          throw new Error(\"Login code is invalid length.\");\n        }\n        if (!otpId.value) {\n          throw new Error(\"Login code id is undefined.\");\n        }\n        const result = yield passage.oneTimePasscodeActivate(oneTimePasscode.value, otpId.value);\n        if (result && result.redirect_url != \"\") {\n          localStorage.removeItem(\"otp_id\");\n          useCallbacks().onEvent.value(OnEventType.onOneTimePasscodeActivated);\n          useAuthEvent().emitEvent({\n            type: AuthEventType.FallbackAuthSuccess,\n            payload: {\n              identifier: props.identifier,\n              authResult: result\n            }\n          });\n        }\n      } catch (err) {\n        setError(\n          te2(\"code-invalid-or-expired\") ? t(\"code-invalid-or-expired\") : \"Code is invalid or expired. Please try again.\"\n        );\n      } finally {\n        loading.value = false;\n      }\n    });\n    const onGoBackClicked = () => {\n      useAuthEvent().emitEvent({ type: AuthEventType.ChangeIdentifier, payload: void 0 });\n    };\n    const onResendCodeClicked = () => {\n      sendOneTimePasscode();\n    };\n    const onSubmitClicked = () => {\n      activateOneTimePasscode();\n    };\n    onMounted(() => {\n      sendOneTimePasscode(props.userIsRegistering);\n      moveInput();\n    });\n    onBeforeUnmount(() => {\n      cleanupInput();\n    });\n    const _resetLoadingState = () => {\n      loading.value = true;\n    };\n    const _resetErrorState = () => {\n      errorMessage.value = void 0;\n      errorWithOneTimePasscode.value = false;\n      errorSendingOneTimePasscode.value = false;\n    };\n    const _resetOneTimePasscode = () => {\n      oneTimePasscode.value = void 0;\n    };\n    const setError = (message2, sending = false) => {\n      errorMessage.value = message2;\n      errorWithOneTimePasscode.value = !sending;\n      errorSendingOneTimePasscode.value = sending;\n    };\n    const otpInput = ref();\n    function moveInput() {\n      const parent = otpInput.value.getRootNode().host;\n      otpInput.value.appendChild(otcStyles());\n      parent.appendChild(otpInput.value);\n    }\n    function cleanupInput() {\n      otpInput.value.remove();\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$7, [\n        createBaseVNode(\"form\", null, [\n          createBaseVNode(\"div\", _hoisted_2$4, [\n            createBaseVNode(\"span\", null, toDisplayString(title.value), 1)\n          ]),\n          createBaseVNode(\"div\", _hoisted_3$4, [\n            createBaseVNode(\"div\", _hoisted_4$4, [\n              createBaseVNode(\"p\", { innerHTML: message.value }, null, 8, _hoisted_5$4)\n            ])\n          ]),\n          createBaseVNode(\"div\", _hoisted_6$3, [\n            createBaseVNode(\"div\", {\n              ref_key: \"otpInput\",\n              ref: otpInput,\n              slot: \"otpInput\"\n            }, [\n              createVNode(_sfc_main$a, {\n                \"num-inputs\": numInputs,\n                \"is-disabled\": oneTimePasscodeInputsDisabled.value,\n                value: oneTimePasscode.value,\n                \"onUpdate:value\": _cache[0] || (_cache[0] = ($event) => oneTimePasscode.value = $event),\n                \"input-classes\": oneTimePasscodeInputClasses.value,\n                \"disable-non-current\": false\n              }, null, 8, [\"is-disabled\", \"value\", \"input-classes\"])\n            ], 512),\n            renderSlot(_ctx.$slots, \"otpInput\")\n          ]),\n          createBaseVNode(\"div\", _hoisted_7$3, [\n            createBaseVNode(\"div\", _hoisted_8$2, toDisplayString(errorMessage.value ? errorMessage.value : \" \"), 1)\n          ]),\n          createBaseVNode(\"div\", _hoisted_9$1, [\n            createBaseVNode(\"button\", {\n              type: \"submit\",\n              class: \"button is-primary\",\n              part: \"button\",\n              \"data-test\": \"continue-button\",\n              onClick: withModifiers(onSubmitClicked, [\"prevent\"]),\n              disabled: continueBtnDisabled.value\n            }, toDisplayString(unref(t)(\"continue\")), 9, _hoisted_10)\n          ]),\n          _hoisted_11,\n          createBaseVNode(\"div\", _hoisted_12, [\n            createBaseVNode(\"div\", _hoisted_13, [\n              createBaseVNode(\"a\", {\n                onClick: withModifiers(onGoBackClicked, [\"prevent\"]),\n                role: \"button\",\n                \"data-test\": \"one-time-passcode-goback-button\"\n              }, toDisplayString(btnGoBackText.value), 9, _hoisted_14)\n            ]),\n            createBaseVNode(\"div\", _hoisted_15, [\n              createBaseVNode(\"a\", {\n                onClick: withModifiers(onResendCodeClicked, [\"prevent\"]),\n                role: \"button\",\n                \"data-test\": \"one-time-passcode-resend-button\"\n              }, toDisplayString(btnResendText.value), 9, _hoisted_16)\n            ])\n          ])\n        ])\n      ]);\n    };\n  }\n});\nconst _hoisted_1$6 = { class: \"view-access-token\" };\nconst _sfc_main$8 = defineComponent({\n  __name: \"OneTimePasscodeView\",\n  props: {\n    identifier: {},\n    userIsRegistering: { type: Boolean },\n    identifierVerifying: { type: Boolean },\n    setupNewDevice: { type: Boolean },\n    identifierType: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$6, [\n        createVNode(_sfc_main$9, {\n          identifier: _ctx.identifier,\n          userIsRegistering: _ctx.userIsRegistering,\n          identifierVerifying: _ctx.identifierVerifying,\n          setupNewDevice: _ctx.setupNewDevice,\n          identifierType: _ctx.identifierType\n        }, {\n          otpInput: withCtx(() => [\n            renderSlot(_ctx.$slots, \"otpInput\")\n          ]),\n          _: 3\n        }, 8, [\"identifier\", \"userIsRegistering\", \"identifierVerifying\", \"setupNewDevice\", \"identifierType\"])\n      ]);\n    };\n  }\n});\nconst _hoisted_1$5 = { class: \"image has-text-centered\" };\nconst _hoisted_2$3 = { key: 0 };\nconst _hoisted_3$3 = {\n  class: \"flex-row flex-center\",\n  style: { \"padding\": \"20px 0px\" }\n};\nconst _hoisted_4$3 = [\"onClick\", \"disabled\"];\nconst _hoisted_5$3 = { key: 0 };\nconst _hoisted_6$2 = { key: 1 };\nconst _hoisted_7$2 = {\n  key: 2,\n  class: \"link has-text-centered\"\n};\nconst _hoisted_8$1 = [\"onClick\"];\nconst _sfc_main$7 = defineComponent({\n  __name: \"AddDevice\",\n  props: {\n    authResult: {},\n    identifier: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const { t } = useLocale();\n    const { appId } = useAppId();\n    const showFailure = ref(false);\n    const showSuccess = ref(false);\n    const newDevice = ref();\n    const { addDevice, addPending } = useAddDevice(appId.value);\n    const { autofocusButton } = useAutofocusButton();\n    const title = computed(() => {\n      if (showFailure.value) {\n        return t(\"something-went-wrong\");\n      } else {\n        return t(\"add-passkey\");\n      }\n    });\n    function onButtonClick() {\n      return __async(this, null, function* () {\n        var _a;\n        newDevice.value = yield addDevice();\n        if ((_a = newDevice.value) == null ? void 0 : _a.id) {\n          showSuccess.value = true;\n          showFailure.value = false;\n          finishAuth();\n        } else {\n          showFailure.value = true;\n          showSuccess.value = false;\n        }\n      });\n    }\n    const finishAuth = () => {\n      useAuthEvent().emitEvent({\n        type: AuthEventType.AuthSuccess,\n        payload: {\n          identifier: props.identifier,\n          authResult: props.authResult\n        }\n      });\n    };\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(Fragment, null, [\n        createBaseVNode(\"div\", {\n          class: normalizeClass([\"title has-text-centered\", [showFailure.value ? \"secondary-title\" : \"main-title\"]]),\n          \"data-test\": \"activate-magic-link-message\"\n        }, toDisplayString(title.value), 3),\n        createBaseVNode(\"figure\", _hoisted_1$5, [\n          showFailure.value ? (openBlock(), createBlock(unref(InlineSvg), {\n            key: 0,\n            src: unref(Icons).fingerprintFailed,\n            alt: \"Device failure\"\n          }, null, 8, [\"src\"])) : (openBlock(), createBlock(unref(InlineSvg), {\n            key: 1,\n            src: unref(Icons).passkey,\n            alt: \"Add a passkey\",\n            style: { \"margin\": \"5px\" }\n          }, null, 8, [\"src\"]))\n        ]),\n        showFailure.value ? (openBlock(), createElementBlock(\"div\", _hoisted_2$3, toDisplayString(unref(t)(\"failed-to-add-this-device\")), 1)) : (openBlock(), createBlock(_sfc_main$g, {\n          key: 1,\n          cta: unref(t)(\"log-into-your-account\")\n        }, null, 8, [\"cta\"])),\n        createBaseVNode(\"div\", _hoisted_3$3, [\n          createBaseVNode(\"button\", {\n            onClick: withModifiers(onButtonClick, [\"prevent\"]),\n            type: \"button\",\n            class: normalizeClass([\"button is-primary\", { \"is-loading\": unref(addPending) }]),\n            part: \"button\",\n            disabled: unref(addPending),\n            \"data-test\": \"save-device-button\",\n            ref_key: \"autofocusButton\",\n            ref: autofocusButton\n          }, [\n            showFailure.value ? (openBlock(), createElementBlock(\"span\", _hoisted_5$3, toDisplayString(unref(t)(\"try-again\")), 1)) : (openBlock(), createElementBlock(\"span\", _hoisted_6$2, toDisplayString(unref(t)(\"add-passkey\")), 1))\n          ], 10, _hoisted_4$3)\n        ]),\n        !showSuccess.value ? (openBlock(), createElementBlock(\"div\", _hoisted_7$2, [\n          createBaseVNode(\"div\", null, [\n            createBaseVNode(\"a\", {\n              onClick: withModifiers(finishAuth, [\"prevent\"]),\n              role: \"button\",\n              \"data-test\": \"add-device-skip\"\n            }, toDisplayString(unref(t)(\"skip\")), 9, _hoisted_8$1)\n          ])\n        ])) : createCommentVNode(\"\", true)\n      ], 64);\n    };\n  }\n});\nconst _hoisted_1$4 = { class: \"view-add-device\" };\nconst _sfc_main$6 = defineComponent({\n  __name: \"AddDeviceView\",\n  props: {\n    authResult: {},\n    identifier: {}\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$4, [\n        createVNode(_sfc_main$7, {\n          authResult: _ctx.authResult,\n          identifier: _ctx.identifier\n        }, null, 8, [\"authResult\", \"identifier\"])\n      ]);\n    };\n  }\n});\nconst _hoisted_1$3 = {\n  class: \"wrap-text\",\n  style: { \"margin-bottom\": \"12px !important\" }\n};\nconst _hoisted_2$2 = { class: \"passage-learnmore-header\" };\nconst _hoisted_3$2 = { class: \"passage-learnmore-body\" };\nconst _hoisted_4$2 = { class: \"passage-learnmore-header\" };\nconst _hoisted_5$2 = { class: \"passage-learnmore-body\" };\nconst _sfc_main$5 = defineComponent({\n  __name: \"LearnMoreDisabledFallbacks\",\n  setup(__props) {\n    const { t } = useLocale();\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$h, null, {\n        cta: withCtx(() => [\n          createBaseVNode(\"div\", _hoisted_1$3, toDisplayString(unref(t)(\"passkeys-are-required\")) + toDisplayString(\" \"), 1),\n          createTextVNode(\" \" + toDisplayString(unref(t)(\"try-again-on-device-with-passkeys\")), 1)\n        ]),\n        body: withCtx(() => [\n          createBaseVNode(\"div\", _hoisted_2$2, toDisplayString(unref(t)(\"what-are-passkeys\")), 1),\n          createBaseVNode(\"div\", _hoisted_3$2, toDisplayString(unref(t)(\"passkeys-are-a-simpler-and-more-secure-alternative\")), 1),\n          createBaseVNode(\"div\", _hoisted_4$2, toDisplayString(unref(t)(\"devices-that-support-passkeys\")), 1),\n          createBaseVNode(\"div\", _hoisted_5$2, toDisplayString(unref(t)(\"devices-with-a-biometric-sensor-are-likely-to-support-passkeys\")), 1)\n        ]),\n        _: 1\n      });\n    };\n  }\n});\nconst _hoisted_1$2 = { class: \"auth-flex-container\" };\nconst _hoisted_2$1 = { class: \"title has-text-centered\" };\nconst _hoisted_3$1 = {\n  class: \"image has-text-centered\",\n  style: { \"margin\": \"5px auto\" }\n};\nconst _hoisted_4$1 = /* @__PURE__ */ createBaseVNode(\"div\", { class: \"spacer\" }, null, -1);\nconst _hoisted_5$1 = { class: \"flex-row flex-wrap flex-center\" };\nconst _hoisted_6$1 = { class: \"link\" };\nconst _hoisted_7$1 = [\"onClick\"];\nconst _sfc_main$4 = defineComponent({\n  __name: \"DisableFallbacks\",\n  setup(__props) {\n    const { t } = useLocale();\n    const { emitEvent: emitEvent2 } = useAuthEvent();\n    function changeEmail() {\n      localStorage.removeItem(\"email\");\n      emitEvent2({\n        type: AuthEventType.ChangeIdentifier,\n        payload: void 0\n      });\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$2, [\n        createBaseVNode(\"div\", _hoisted_2$1, toDisplayString(unref(t)(\"device-not-supported\")), 1),\n        createBaseVNode(\"figure\", _hoisted_3$1, [\n          createVNode(unref(InlineSvg), {\n            src: unref(Icons).passkeyArrow,\n            alt: \"Device not supported\",\n            style: { \"margin\": \"5px\" }\n          }, null, 8, [\"src\"])\n        ]),\n        createVNode(_sfc_main$5),\n        _hoisted_4$1,\n        createBaseVNode(\"div\", _hoisted_5$1, [\n          createBaseVNode(\"div\", _hoisted_6$1, [\n            createBaseVNode(\"a\", {\n              onClick: withModifiers(changeEmail, [\"prevent\"]),\n              role: \"button\",\n              \"data-test\": \"change-email-button\"\n            }, toDisplayString(unref(t)(\"back\")), 9, _hoisted_7$1)\n          ])\n        ])\n      ]);\n    };\n  }\n});\nconst _sfc_main$3 = defineComponent({\n  __name: \"DisableFallbackView\",\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$4);\n    };\n  }\n});\nconst _hoisted_1$1 = { class: \"auth-flex-container\" };\nconst _hoisted_2 = { class: \"title has-text-centered\" };\nconst _hoisted_3 = {\n  class: \"image has-text-centered\",\n  style: { \"margin\": \"5px auto\" }\n};\nconst _hoisted_4 = {\n  class: \"wrap-text\",\n  style: { \"margin-bottom\": \"12px !important\" }\n};\nconst _hoisted_5 = { class: \"wrap-text\" };\nconst _hoisted_6 = /* @__PURE__ */ createBaseVNode(\"div\", { class: \"spacer\" }, null, -1);\nconst _hoisted_7 = { class: \"flex-row flex-wrap flex-center\" };\nconst _hoisted_8 = { class: \"link\" };\nconst _hoisted_9 = [\"onClick\"];\nconst _sfc_main$2 = defineComponent({\n  __name: \"LoginNotSupported\",\n  setup(__props) {\n    const { t } = useLocale();\n    const { emitEvent: emitEvent2 } = useAuthEvent();\n    function changeEmail() {\n      localStorage.removeItem(\"email\");\n      emitEvent2({\n        type: AuthEventType.ChangeIdentifier,\n        payload: void 0\n      });\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", _hoisted_1$1, [\n        createBaseVNode(\"div\", _hoisted_2, toDisplayString(unref(t)(\"login-not-supported\")), 1),\n        createBaseVNode(\"figure\", _hoisted_3, [\n          createVNode(unref(InlineSvg), {\n            src: unref(Icons).passkeyArrow,\n            alt: \"Device not supported\",\n            style: { \"margin\": \"5px\" }\n          }, null, 8, [\"src\"])\n        ]),\n        createBaseVNode(\"div\", _hoisted_4, toDisplayString(unref(t)(\"passkeys-are-now-required\")), 1),\n        createBaseVNode(\"div\", _hoisted_5, toDisplayString(unref(t)(\"please-contact-support-to-regain-access\")), 1),\n        _hoisted_6,\n        createBaseVNode(\"div\", _hoisted_7, [\n          createBaseVNode(\"div\", _hoisted_8, [\n            createBaseVNode(\"a\", {\n              onClick: withModifiers(changeEmail, [\"prevent\"]),\n              role: \"button\",\n              \"data-test\": \"change-email-button\"\n            }, toDisplayString(unref(t)(\"back\")), 9, _hoisted_9)\n          ])\n        ])\n      ]);\n    };\n  }\n});\nconst _sfc_main$1 = defineComponent({\n  __name: \"LoginNotSupportedView\",\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(_sfc_main$2);\n    };\n  }\n});\nconst AuthRoute = {\n  component: _sfc_main$p\n};\nconst LoginRoute = {\n  component: _sfc_main$m\n};\nconst RegisterRoute = {\n  component: _sfc_main$l\n};\nconst RegisterDeviceRoute = {\n  component: _sfc_main$e\n};\nconst MagicLinkRoute = {\n  component: _sfc_main$i\n};\nconst WebauthnSignInRoute = {\n  component: _sfc_main$c\n};\nconst ActivateMagicLinkRoute = {\n  component: _sfc_main$n\n};\nconst OneTimePasscodeRoute = {\n  component: _sfc_main$8\n};\nconst AddDeviceRoute = {\n  component: _sfc_main$6\n};\nconst DisableFallbacksRoute = {\n  component: _sfc_main$3\n};\nconst LoginNotSupportedRoute = {\n  component: _sfc_main$1\n};\nclass Router {\n  constructor(homeRoute) {\n    this._homeRoute = AuthRoute;\n    this._history = [];\n    if (homeRoute !== void 0) {\n      this._homeRoute = homeRoute;\n    }\n  }\n  get homeRoute() {\n    return this._homeRoute;\n  }\n  set homeRoute(homeRoute) {\n    this._homeRoute = homeRoute;\n  }\n  get currentRoute() {\n    if (this._history.length === 0) {\n      return void 0;\n    }\n    return this._history[this._history.length - 1];\n  }\n  push(route, props) {\n    this._history.push(__spreadProps(__spreadValues({}, route), { props }));\n  }\n  resetRouter() {\n    this._history = [];\n  }\n}\nconst _hoisted_1 = {\n  key: 0,\n  class: \"notification is-danger has-text-centered\",\n  \"data-test\": \"invalid-app-id\"\n};\nconst _sfc_main = defineComponent({\n  __name: \"SmartRouter\",\n  props: {\n    homeRoute: {}\n  },\n  setup(__props) {\n    const props = __props;\n    const router = reactive(new Router(props.homeRoute));\n    const currentRoute = computed(() => router.currentRoute);\n    const { t } = useLocale();\n    const { appInfo, loading, invalidAppId } = useAppInfo();\n    const { initEventHandler: initEventHandler2 } = useAuthEvent();\n    const currentComponent = computed(() => {\n      var _a;\n      return (_a = currentRoute.value) == null ? void 0 : _a.component;\n    });\n    const currentProps = computed(() => {\n      var _a;\n      const props2 = (_a = currentRoute.value) == null ? void 0 : _a.props;\n      if (props2 === void 0) {\n        return {};\n      }\n      return props2;\n    });\n    const initialized = ref(false);\n    watch(appInfo, () => __async(this, null, function* () {\n      initialized.value = false;\n      if (appInfo.value === void 0) {\n        return;\n      }\n      yield initEventHandler2(appInfo.value, router);\n      initialized.value = true;\n    }));\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(Fragment, null, [\n        createVNode(Transition, {\n          name: \"fade\",\n          mode: \"out-in\",\n          appear: \"\"\n        }, {\n          default: withCtx(() => [\n            !unref(loading) && initialized.value ? (openBlock(), createBlock(resolveDynamicComponent(currentComponent.value), normalizeProps(mergeProps({ key: 0 }, currentProps.value)), {\n              otpInput: withCtx(() => [\n                renderSlot(_ctx.$slots, \"otpInput\")\n              ]),\n              loginInput: withCtx(() => [\n                renderSlot(_ctx.$slots, \"loginInput\")\n              ]),\n              _: 3\n            }, 16)) : createCommentVNode(\"\", true)\n          ]),\n          _: 3\n        }),\n        unref(invalidAppId) ? (openBlock(), createElementBlock(\"div\", _hoisted_1, toDisplayString(unref(t)(\"invalid-app-id\")), 1)) : createCommentVNode(\"\", true)\n      ], 64);\n    };\n  }\n});\nfunction useElementSetup(props) {\n  function storeProps() {\n    const { updateAppId } = useAppId();\n    if (props.appId) {\n      updateAppId(props.appId);\n    }\n    const { updateDefaultCountryCode } = useDefaultCountryCode();\n    updateDefaultCountryCode(props.defaultCountryCode);\n    const { setBeforeAuth: setBeforeAuth2, setOnSuccess: setOnSuccess2, setOnEvent: setOnEvent2 } = useCallbacks();\n    setBeforeAuth2(props.beforeAuth);\n    setOnSuccess2(props.onSuccess);\n    setOnEvent2(props.onEvent);\n  }\n  storeProps();\n  onBeforeUpdate(() => {\n    storeProps();\n  });\n  const { languageLoading } = useStoreLocale(props);\n  const containerRef = ref();\n  useIntlTelInput(containerRef);\n  return {\n    languageLoading,\n    containerRef\n  };\n}\nexport { AuthRoute as A, LoginRoute as L, RegisterRoute as R, _sfc_main as _, useElementSetup as u };\n//# \n"],"mappings":"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,EAAE,MAAM;IAC3BC,SAAS,CAAC,CAAC;EACb,CAAC,CAAC;EACF,OAAO;IACLD;EACF,CAAC;AACH;AACA,SAASG,WAAWA,CAAA,EAAG;EACrB,MAAMC,GAAG,GAAI;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;EACJ,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;EAC7CF,KAAK,CAACG,WAAW,CAACF,QAAQ,CAACG,cAAc,CAACL,GAAG,CAAC,CAAC;EAC/C,OAAOC,KAAK;AACd;AACA,SAASK,SAASA,CAAA,EAAG;EACnB,MAAMC,IAAI,GAAGL,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;EAC3CI,IAAI,CAACC,GAAG,GAAG,YAAY;EACvBD,IAAI,CAACE,IAAI,GAAG,oFAAoF;EAChG,OAAOF,IAAI;AACb;AACA,SAASG,SAASA,CAAA,EAAG;EACnB,MAAMV,GAAG,GAAI;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;EACN,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;EAC7CF,KAAK,CAACG,WAAW,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"},"metadata":{},"sourceType":"module","externalDependencies":[]}