{"ast":null,"code":"import _regeneratorRuntime from\"/home/tejaswi/pdf-passage/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/tejaswi/pdf-passage/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/tejaswi/pdf-passage/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useAuthStatus}from'../hooks/useAuthStatus';import styles from'../styles/Dashboard.module.css';import TextField from'@mui/material/TextField';import Button from'@mui/material/Button';import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),targetEmail=_useState2[0],setTargetEmail=_useState2[1];var _useAuthStatus=useAuthStatus(),isLoading=_useAuthStatus.isLoading,isAuthorized=_useAuthStatus.isAuthorized,username=_useAuthStatus.username;console.log(isAuthorized);var sendMagicLink=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();fetch(\"/api/triggerMagic\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:{\"targetEmail\":targetEmail}}).then(function(response){return response.json();}).then(function(data){console.log(data);});//window.location.href='/magicLinkMessage'\n// let magicLink = await passage.createMagicLink({\n//     email: \"karasani.tejaswi01@gmail.com\",\n//     redirect_url: \"/magicLinkMessage\" ,\n//     magic_link_path: \"/magicLinkMessage\",\n//     send: true,\n//     channel: \"email\"\n//   });\n//   console.log(magicLink.url)\ncase 2:case\"end\":return _context.stop();}},_callee);}));return function sendMagicLink(_x){return _ref.apply(this,arguments);};}();if(isLoading){return null;}var authorizedBody=/*#__PURE__*/_jsxs(_Fragment,{children:[\"You successfully signed in with Passage.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Your username is: \",/*#__PURE__*/_jsx(\"b\",{children:username})]});var unauthorizedBody=/*#__PURE__*/_jsxs(_Fragment,{children:[\"You have not logged in and cannot view the dashboard.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:styles.link,children:\"Login to continue.\"})]});return/*#__PURE__*/_jsxs(\"div\",{className:styles.dashboard,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:isAuthorized?'Welcome!':'Unauthorized'}),/*#__PURE__*/_jsx(\"div\",{className:styles.message,children:isAuthorized?authorizedBody:unauthorizedBody}),isAuthorized?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Outlined\",variant:\"outlined\",onChange:function onChange(e){return setTargetEmail(e.target.value);}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(event){return sendMagicLink(event);},children:\"Send\"})]}):null]});}export default Dashboard;","map":{"version":3,"names":["useAuthStatus","styles","TextField","Button","useState","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Dashboard","_useState","_useState2","_slicedToArray","targetEmail","setTargetEmail","_useAuthStatus","isLoading","isAuthorized","username","console","log","sendMagicLink","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","wrap","_callee$","_context","prev","next","preventDefault","fetch","method","headers","body","then","response","json","data","stop","_x","apply","arguments","authorizedBody","children","unauthorizedBody","href","className","link","dashboard","title","message","id","label","variant","onChange","e","target","value","onClick"],"sources":["/home/tejaswi/pdf-passage/frontend/src/views/Dashboard.js"],"sourcesContent":["import {useAuthStatus} from '../hooks/useAuthStatus';\nimport styles from '../styles/Dashboard.module.css';\nimport TextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\nimport { useState } from 'react';\n\nfunction Dashboard() {\n    const [targetEmail,setTargetEmail] = useState(\"\");\n    const {isLoading, isAuthorized, username} = useAuthStatus();\n\n    console.log(isAuthorized);\n\n    const sendMagicLink = async (event)  => {\n        event.preventDefault()\n        fetch(\"/api/triggerMagic\", {\n            method: \"post\",\n            headers:{\n                \"Content-Type\": \"application/json\"\n            },\n            body: {\"targetEmail\": targetEmail}\n        }).then(response=> response.json()).then(data => {\n            console.log(data);\n        })\n        //window.location.href='/magicLinkMessage'\n        // let magicLink = await passage.createMagicLink({\n        //     email: \"karasani.tejaswi01@gmail.com\",\n        //     redirect_url: \"/magicLinkMessage\" ,\n        //     magic_link_path: \"/magicLinkMessage\",\n        //     send: true,\n        //     channel: \"email\"\n        //   });\n    \n        //   console.log(magicLink.url)\n    }\n\n    if (isLoading) {\n        return null;\n    }\n    const authorizedBody = \n    <>\n        You successfully signed in with Passage.\n        <br/><br/>\n        Your username is: <b>{username}</b>\n    </>\n\n    const unauthorizedBody = \n    <>\n        You have not logged in and cannot view the dashboard.\n        <br/><br/>\n        <a href=\"/\" className={styles.link}>Login to continue.</a>\n    </>\n\n    return (\n        <div className={styles.dashboard}>\n            <div className={styles.title}>{isAuthorized ? 'Welcome!' : 'Unauthorized'}</div>\n            <div className={styles.message}>\n                { isAuthorized ? authorizedBody : unauthorizedBody }\n            </div>\n            {isAuthorized?\n            <div><TextField id=\"outlined-basic\" label=\"Outlined\" variant=\"outlined\" onChange ={(e) => setTargetEmail(e.target.value)}/>\n            <Button variant=\"contained\" onClick={(event) => sendMagicLink(event)}>Send</Button></div>:null\n            }\n        </div>\n    );\n\n}\n\nexport default Dashboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}